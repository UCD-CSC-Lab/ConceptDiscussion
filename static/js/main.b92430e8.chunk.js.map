{"version":3,"sources":["HighlightModeSelector.js","newdirected/Video_info.js","components/BarField.js","components/AlertDialog.js","components/UserNameDialog.js","components/homepage3.png","components/AutoSuggestions.js","components/SearchField.js","newdirected/Node.js","newdirected/Link.js","newdirected/PopoverNode.js","newdirected/Masker.js","newdirected/Graph.js","components/MarkerIcon.js","components/VideoSequence.js","components/CardinalPath.js","components/ConceptSequence.js","components/Legend.js","components/WordCloud.js","components/RelatedVideosPanel.js","components/youtube.png","components/ConceptDetailPanel.js","components/MapApprovPanel.js","components/Notification.js","components/Editor.js","components/Card.js","components/Cards.js","components/LearningMapFrame.js","components/VideoMapFrame.js","components/LinearIndeterminate.js","components/CreatingField.js","components/MenuDrawer.js","index.js"],"names":["React","Component","styles","theme","area","margin","paper","padding","container","display","flexWrap","text","fontSize","Video_info","props","IconButton","color","onClick","this","CloseDrawer","Paper","elevation","style","Typography","variant","component","videos_info","vid","transcript","root","flexGrow","bar","background","APPName","marginLeft","fontFamily","menuButton","marginRight","BarField","HomeOnClick","bind","MenuOnClick","console","log","SetProgress","tmp","fetch","mode","then","res","json","myJson","SetSearchHistory","SetMenuOpen","AppBar","position","Toolbar","homeButton","title","AlertDialog","RenderButtons","CheckExistedMap","CreateNewMap","Go_CheckExistedMap","keyword","Go_CreateNewMap","alertCondition","Button","HandleAlertClose","message","Dialog","open","alertOpen","onClose","DialogTitle","id","DialogContent","DialogContentText","DialogActions","UserNameDialog","name","document","getElementById","value","SetUserId","HandleNameDialogClose","nameDialogOpen","type","listStyleType","input","backgroundColor","suggestionsContainerOpen","zIndex","left","right","suggestion","suggestionsList","getSuggestions","o","tmpthis","inputValue","trim","toLowerCase","inputLength","length","historyWords","filter","option","slice","getSuggestionValue","renderInputComponent","inputProps","Input","renderSuggestion","MenuItem","renderSuggestionsContainer","options","square","containerProps","children","AutoSuggestions","state","suggestions","onChange","onSuggestionsFetchRequested","onSuggestionsClearRequested","event","newValue","TextChange","setState","placeholder","root1","height","width","justifyContent","backgroundImage","HomePageImg","backgroundRepeat","backgroundSize","backgroundPosition","root2","paddingTop","paddingBottom","chip","img","opacity","SearchField","chipdata","SearchHistory","SearchKeyword","handleClick","TagClick","SetSearchKeyword","e","includes","size","userId","cursor","FadeTextStyle","Path_ConceptIndex","HighlightNodes","index","fill","fillOpacity","firebase","apps","app","initializeApp","databaseURL","Node","anchorEl","studentslist","handleClose","handleHover","NodeRadius","handleMouseOut","d3Node","d3","ReactDOM","findDOMNode","datum","data","database","ref","on","snapshot","studentlist","forEach","snap","val","replace","push","call","updateNode","SetPath_ConceptIndex","select","transition","duration","attr","i","SetHoverConceptIndex","SetHighlightNodes","cnt","Range","domain","range","ScaleDotSize","highlight","radius","r","ClearHoverConcept","NodeOpacityValue","NodeColor","HoverConceptIndex","DirectNodes","updated","className","onMouseOver","onMouseOut","count","ConceptRange","Object","assign","HighlightNodeText","textShadow","dx","dy","Link","d3Link","enterLink","d","prerequisite","updateLink","DoHighlight","loc","d_neighbors","source","target","similarity","circle","ConceptBigCircle","Sentcircle","conceptlabel","textAnchor","fontStyle","mask","Masker","overflowX","overflowY","Div","float","axisLeft","selection","x","y","updateGraph","selectAll","zoom","scaleExtent","transform","k","Graph","HighlightNodesAtIndex","DirectNodesAtIndex","d3Graph","force","concept_relationship","nodes","strength","links","distance","ans","BFSinput","parseInt","CheckDirectNodes","highlight_nodes","SetHighlightNodesAtIndex","SetDirectNodesAtIndex","data_db","contents","map","node","src","group","HighlightConceptIndex","BigCircleIndex","SetHightlightWord","err","link","viewBox","markerWidth","markerHeight","refX","refY","orient","xoverflow","stroke","MarkerIcon","undefined","cx","cy","strokeWidth","alignmentBaseline","flexDirection","ItemContainer","ImageContainer","rowContainer","videoImage","timeLabel","VideoSequence","handleHoverOut","SetHoverVideoIndex","score","sentmin","SentRange","interpolate","str","indexOf","video_sequences","ShowVideoItems","SentimentColor","video_info","userFeedbackScore","paddingLeft","href","rx","ry","TimeProcess","path","strokeOpacity","line","curve","CardinalPath","PathHovered","PathHover","onMouseEnter","onMouseLeave","markerEnd","conceptSeqGraph","marginTop","label","ylocation","calculatePath","dependencies","c_sequences","side","result","xloc","xloc_mid","keys","key","index2","num1","num2","points","ConceptSequence","number","SetBigCircleIndex","c_index","concept_sequences","conceptnode","concepts","ClickedNode","HighlightConcepts","pathsdata","paths","cycle_pathsdata","RemovedCycleLinks","cycle_paths","top","heading","constainer","ColorLegend","VideoNodesText","heading2","fontWeight","TermCountRange","Legend","scaleX","ConceptNodesCircle","VideoNodesCircle","strokeDasharray","ExpansionPanel","defaultExpanded","ExpansionPanelSummary","expandIcon","ExpansionPanelDetails","toFixed","tmpList","videos_id","Math","min","max","x1","x2","y1","y2","offset","stopColor","MarkerIndex","videotooptip","maxWidth","videotooptip_label1","lineHeight","videotooptip_label2","maxHeight","overflow","textOverflow","whiteSpace","RelatedVideosPanel","tooltip_open","Location","VideoRadius","videoClick","YoutubeIconClick","RenderNumMarker","prevProps","numNodes","angle","PI","cos","sin","SetVideoId","num","vlist","center","LikesList","likeCount","ShowVideoLinks","Hightlight","Tooltip","enterTouchDelay","placement","HoverVideoIndex","patternContentUnits","xlinkHref","preserveAspectRatio","full","CheckMarkerIndex","ShowMarkerIcons","BigCircleRadius","rootTitle","textAlign","containerTitle","OuterContainer","paper2","paper2_UpperContainer","paper2_BelowContainer","container3_1","container3_2","CloseBotton","content","ConceptDetailPanel","CloseOnClick","window","innerHeight","concept_index","HighlightConceptTextIndex","innerWidth","MapApprovPanel","ApproveClicked","SetNewJson","SetVisJson","forceUpdate","search_info","tmpList2","reduce","a","b","SetMapConsult","MapConsult","NewJson","Notification","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","plugin_command","buttonClass","innerHTML","add","core","targetElement","context","customCommand_2","targetButton","active","element","test","nodeName","util","addClass","removeClass","action","hasClass","nodeChange","newNode","createElement","Editor","handleChange","onInput","save","getSunEditorInstance","handleResize","windowWidth","windowHeight","createRef","sunEditor","current","prevState","cardEditing","setContents","editorContent","focusEdge","addEventListener","sendBackEnd","getText","concept","searchInfo","cardId","editingCardId","SetCardEdit","setOptions","plugins","buttonList","callBackSave","onFocus","onBlur","Card","handleEdit","ThumbOnClick","thumbColor","SetEditorContent","thumbsCnt","fullCard","ul","border","borderRadius","renderThumbCnt","disabled","onDelete","handleCancel","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","Cards","cards","handleDelete","addCard","handleThumbsCnt","JSON","parse","stringify","cardContent","likes","card","sort","method","c","concat","newCardContent","progress","graphWidth","onEdit","onSave","handleSave","bottom","LeftField","LearningMapFrame","PopoverIndexes","Hightlight_word","SetNewCardContent","SetPopoverIndexes","bool","word","HightlightWord","SetHoverConceptIndexAtIndex","VideoSequence_ConceptInfo","HoverConceptIndexAtIndex","OpenDrawer","url","videoId","controls","withStyles","classes","LinearProgress","buttonContainer","button","CreateMapField","secondsElapsed","minutesElapsed","NotFinish_Create","progressValue","interval","setInterval","secondtick","progresstick","clearInterval","align","chip2","DrawerName","hidden_list","MenuDrawer","drawer_switch","TagDelete","HandleClose","SetMenuClose","chips","Chip","clickable","Drawer","anchor","onKeyDown","ButtonClick","beforunload","userAgent","navigator","isOpera","myBrowser","clientY","ak","altKey","currentTarget","activeElement","App","MenuOpened","drawer","selectedVid","Progress","VisJson","uid","v","w","onbeforeunload","Set_NotFinishCreate","CreatingField","userSelect","fullScreen","VideoMapFrame","render"],"mappings":"8RAGoCA,IAAMC,U,mDCSpCC,EAAS,SAAAC,GAAK,MAAK,CACrBC,KAAM,CACJC,OAAO,IAITC,MAAO,CACDC,QAAS,GACTF,OAAS,IAEfG,UAAW,CACPC,QAAS,OACTC,SAAU,QAEdC,KAAK,CACDN,OAAO,GACPE,QAAQ,GACRK,SAAS,MAoCFC,E,kDA/BX,WAAYC,GAAQ,uCACVA,G,qDAIV,c,oBAMA,WACI,OAEI,cADA,CACA,iBACI,cAACC,EAAA,EAAD,CAAYC,MAAM,UAAUC,QAASC,KAAKJ,MAAMK,YAAa,aAAW,QAAxE,SACI,cAAC,IAAD,MAGJ,cAACC,EAAA,EAAD,CAAQC,UAAW,EAAGC,MAAOpB,EAAOI,MAApC,SACA,qBAAKgB,MAAOpB,EAAOM,UAAnB,SACQ,cAACe,EAAA,EAAD,CAAYC,QAAQ,WAAWC,UAAU,KAAzC,SACKP,KAAKJ,MAAMY,YAAYR,KAAKJ,MAAMa,KAAKC,wB,GAvB3C3B,a,8DCrBnBC,EAAM,aACR2B,KAAM,CACFC,SAAU,GAEZC,IAAI,CACFC,WAAW,WAGbC,QAAS,CACPH,SAAU,EACVI,WAAW,GACXtB,SAAS,GACTuB,WAAW,WAEbC,WAAY,CAEVC,YAAa,IAhBT,aAmBM,CAEVA,YAAa,IA2DNC,E,kDArDX,WAAYxB,GAAQ,IAAD,8BACf,cAAMA,IAKDyB,YAAc,EAAKA,YAAYC,KAAjB,gBACnB,EAAKC,YAAc,EAAKA,YAAYD,KAAjB,gBAPJ,E,+CASnB,WACIE,QAAQC,IAAI,oBACZzB,KAAKJ,MAAM8B,YAAY,K,yBAE3B,WAEI,IAAIC,EAAM3B,KAEV4B,MAAM,0DAA0D,CAACC,KAAM,YACtEC,MAAK,SAAUC,GAEZ,OAAOA,EAAIC,UACZF,MAAK,SAASG,GAKb,OAFAN,EAAI/B,MAAMsC,iBAAiBD,GAC3BN,EAAI/B,MAAMuC,cACHF,O,oBAIf,WAEI,OACI,qBAAK7B,MAAOpB,EAAO2B,KAAnB,SACA,cAACyB,EAAA,EAAD,CAAQC,SAAS,SAASjC,MAAOpB,EAAO6B,IAAxC,SACA,eAACyB,EAAA,EAAD,WACI,cAACzC,EAAA,EAAD,CAAYO,MAAOpB,EAAOkC,WAAYpB,MAAM,UAAU,aAAW,OAAjE,SACI,cAAC,IAAD,CAAUC,QAASC,KAAKuB,gBAE5B,cAAC1B,EAAA,EAAD,CAAYO,MAAOpB,EAAOuD,WAAYzC,MAAM,UAAU,aAAW,OAAjE,SACI,cAAC,IAAD,CAAUC,QAASC,KAAKqB,gBAE5B,cAAChB,EAAA,EAAD,CAAYC,QAAQ,QAAQR,MAAM,UAAUM,MAAOpB,EAAO+B,QAA1D,qC,GA3COhC,a,+DC5BjBC,EAAU,CACZwD,MAAM,CACF9C,SAAS,MAgGF+C,E,kDA5FX,WAAY7C,GAAQ,IAAD,8BACf,cAAMA,IACD8C,cAAgB,EAAKA,cAAcpB,KAAnB,gBACrB,EAAKqB,gBAAkB,EAAKA,gBAAgBrB,KAArB,gBACvB,EAAKsB,aAAe,EAAKA,aAAatB,KAAlB,gBAJL,E,mDAOnB,WACItB,KAAKJ,MAAMiD,mBAAmB7C,KAAKJ,MAAMkD,W,0BAE7C,WACI9C,KAAKJ,MAAMmD,gBAAgB/C,KAAKJ,MAAMkD,W,2BAI1C,WACI,MAA8B,QAA3B9C,KAAKJ,MAAMoD,eAEN,cAACC,EAAA,EAAD,CAAQlD,QAASC,KAAKJ,MAAMsD,iBAAkBpD,MAAM,UAApD,gBAK2B,SAA3BE,KAAKJ,MAAMoD,eAEX,gCACA,cAACC,EAAA,EAAD,CAAQlD,QAASC,KAAK2C,gBAAgBrB,KAAKtB,MAAOF,MAAM,UAAxD,gBAGA,cAACmD,EAAA,EAAD,CAAQlD,QAASC,KAAK4C,aAAatB,KAAKtB,MAAOF,MAAM,UAArD,oCAM2B,YAA3BE,KAAKJ,MAAMoD,eAEX,gCACA,cAACC,EAAA,EAAD,CAAQlD,QAASC,KAAK4C,aAAatB,KAAKtB,MAAOF,MAAM,UAArD,gBAGA,cAACmD,EAAA,EAAD,CAAQlD,QAASC,KAAKJ,MAAMsD,iBAAkBpD,MAAM,UAApD,4BANH,I,oBAcT,WAEI,IAAI0C,EAAMW,EAaV,MAZ8B,QAA3BnD,KAAKJ,MAAMoD,gBACVR,EAAM,QACNW,EAAU,4CAEqB,SAA3BnD,KAAKJ,MAAMoD,gBACfR,EAAM,0CACNW,EAAU,KAAKnD,KAAKJ,MAAMkD,QAAQ,2GAEH,YAA3B9C,KAAKJ,MAAMoD,iBACfR,EAAM,yBACNW,EAAU,yGAGd,qBAAM/C,MAAOpB,EAAOwD,MAApB,SACI,eAACY,EAAA,EAAD,CACAC,KAAMrD,KAAKJ,MAAM0D,UACjBC,QAASvD,KAAKJ,MAAMsD,iBACpB,kBAAgB,qBAChB,mBAAiB,2BAJjB,UAMA,cAACM,EAAA,EAAD,CAAaC,GAAG,qBAAhB,SAAsCjB,IACtC,cAACkB,EAAA,EAAD,UACI,cAACC,EAAA,EAAD,CAAmBF,GAAG,2BAAtB,SACCN,MAGL,cAACS,EAAA,EAAD,UACC5D,KAAK0C,2B,GAhFQ3D,aCLpBC,EAAU,CACZwD,MAAM,CACF9C,SAAS,MA0CFmE,E,kDAtCX,WAAYjE,GAAQ,IAAD,8BACf,cAAMA,IACDG,QAAQ,EAAKA,QAAQuB,KAAb,gBAFE,E,2CAInB,WACI,IACMwC,EADcC,SAASC,eAAe,QACnBC,MACzBjE,KAAKJ,MAAMsE,UAAUJ,GACrB9D,KAAKJ,MAAMuE,0B,oBAGf,WAEI,OACA,qBAAM/D,MAAOpB,EAAOwD,MAApB,SACI,eAACY,EAAA,EAAD,CACAC,KAAMrD,KAAKJ,MAAMwE,eACjBb,QAASvD,KAAKJ,MAAMuE,sBACpB,kBAAgB,wBAChB,mBAAiB,8BAJjB,UAMA,cAACX,EAAA,EAAD,CAAaC,GAAG,wBAAhB,SAAyC,sBACzC,cAACC,EAAA,EAAD,UACI,eAACC,EAAA,EAAD,CAAmBF,GAAG,8BAAtB,UACS,aACD,uBAAOY,KAAK,OAAOP,KAAK,OAAOL,GAAG,cAG9C,cAACG,EAAA,EAAD,UACA,cAACX,EAAA,EAAD,CAAQlD,QAASC,KAAKD,QAASD,MAAM,UAArC,2B,GA9BiBf,aCfd,MAA0B,sC,6CCSnCC,EAAU,CACdI,MAAM,CACJkF,cAAe,QAEjBC,MAAO,CAGL7E,SAAS,IAEXJ,UAAW,CACTsB,SAAU,EACV4D,gBAAiB,QACjBnC,SAAU,YAEdoC,yBAA0B,CACtBC,OAAQ,EACRrC,SAAU,WACVsC,KAAM,EACNC,MAAO,GAEXC,WAAY,CACRtF,QAAS,QACT8C,SAAW,WACX3C,SAAS,IAEboF,gBAAiB,CACbzC,SAAW,WACXlD,OAAQ,EACRE,QAAS,EACTiF,cAAe,OACf5E,SAAS,KAGX,SAASqF,EAAeC,EAAEC,GACxB,IAAMC,EAAaF,EAAEf,MAAMkB,OAAOC,cAC5BC,EAAcH,EAAWI,OAE/B,OAAuB,IAAhBD,EAAoB,GAAKJ,EAAQrF,MAAM2F,aAAaC,QAAO,SAAAC,GAAM,OACtEA,EAAOL,cAAcM,MAAM,EAAGL,KAAiBH,KAOrD,SAASS,EAAoBd,GAC3B,OAAQA,EAGR,SAASe,GAAuBC,GAE/B,OACK,8BACA,cAACC,EAAA,EAAD,2BAAWD,GAAX,IAAuBzF,MAAOpB,EAAOuF,WAS3C,SAASwB,GAAkBlB,GACzB,OACE,cAACmB,EAAA,EAAD,CACAzF,UAAU,MADV,SAECsE,IAIL,SAASoB,GAA2BC,GAClC,OACM,cAAChG,EAAA,EAAD,yBAAOE,MAAOpB,EAAOI,MACrB+G,QAAM,GACFD,EAAQE,gBAFZ,aAICF,EAAQG,Y,IAmFDC,G,kDA3Ed,WAAY1G,GAAQ,IAAD,8BACjB,cAAMA,IAOD2G,MAAQ,CACXtC,MAAO,GACPuC,YAAa,IAEf,EAAKC,SAAW,EAAKA,SAASnF,KAAd,gBAChB,EAAKoF,4BAA8B,EAAKA,4BAA4BpF,KAAjC,gBACnC,EAAKqF,4BAA8B,EAAKA,4BAA4BrF,KAAjC,gBAdlB,E,4CAkBnB,SAAUsF,EAAV,GAAiC,IAAdC,EAAa,EAAbA,SACjB7G,KAAKJ,MAAMkH,WAAWD,GACtB7G,KAAK+G,SAAS,CACZ9C,MAAO4C,M,yCASX,SAA6B5C,GAC3BjE,KAAK+G,SAAS,CACZP,YAAazB,EAAed,EAAMjE,U,yCAKtC,WACEA,KAAK+G,SAAS,CACZP,YAAa,O,oBAIjB,WACE,MAA+BxG,KAAKuG,MAA5BtC,EAAR,EAAQA,MAEF4B,GAFN,EAAeW,YAEI,CACjBQ,YAAa,UACb/C,QACAwC,SAAUzG,KAAKyG,WAIjB,OACE,qBAAKrG,MAAOpB,EAAOI,MAAnB,SACA,cAAC,IAAD,CACAH,MAAO,CACKK,UAAWN,EAAOM,UAClBmF,yBAA0BzF,EAAOyF,yBACjCK,gBAAiB9F,EAAO8F,gBACxBD,WAAY7F,EAAO6F,YAE7B2B,YAAaxG,KAAKuG,MAAMC,YACxBE,4BAA6B1G,KAAK0G,4BAA4BpF,KAAKtB,MACnE2G,4BAA6B3G,KAAK2G,4BAA4BrF,KAAKtB,MACnE2F,mBAAoBA,EACpBC,qBAAsBA,GAAqBtE,KAAKtB,MAChD+F,iBAAkBA,GAClBE,2BAA4BA,GAA2B3E,KAAKtB,MAC5D6F,WAAYA,U,GAtEU9G,aC7E1BC,GAAU,CACZiI,MAAM,CACFC,OAAO,MACPC,MAAM,MACN5H,QAAS,OACT6H,eAAgB,SAChBC,gBAAiB,OAASC,EAAc,IACxCC,iBAAkB,YAClBC,eAAgB,MAChBC,mBAAoB,SACpBtI,OAAO,IAGXuI,MAAO,CAELP,MAAQ,MACR9H,QAAS,GACTF,OAAS,KAEXG,UAAW,CACTC,QAAS,OACT6H,eAAgB,SAChB5H,SAAU,OACVmI,WAAW,GACXC,cAAc,GAEhBrD,MAAO,CAELpF,OAAQ,GACRO,SAAS,IAEXmI,KAAM,CACF1I,OAAQ,EACRE,QAAQ,EACRK,SAAS,IAEboI,IAAI,CACAC,QAAQ,KAkKDC,G,kDA5JX,WAAYpI,GAAQ,IAAD,8BACf,cAAMA,IACD2G,MAAQ,CACT0B,SAAS,EAAKrI,MAAMsI,cACpBC,cAAgB,KAChB5C,aAAa,GACbjC,WAAU,EACVN,eAAiB,KACjBoB,gBAAe,GAEnB,EAAKgE,YAAc,EAAKA,YAAY9G,KAAjB,gBACnB,EAAK+G,SAAW,EAAKA,SAAS/G,KAAd,gBAChB,EAAKwF,WAAa,EAAKA,WAAWxF,KAAhB,gBAClB,EAAK4B,iBAAmB,EAAKA,iBAAiB5B,KAAtB,gBACxB,EAAKyB,gBAAkB,EAAKA,gBAAgBzB,KAArB,gBACvB,EAAKuB,mBAAqB,EAAKA,mBAAmBvB,KAAxB,gBAC1B,EAAK6C,sBAAwB,EAAKA,sBAAsB7C,KAA3B,gBAhBd,E,sDAkBnB,WAEI,IAAIK,EAAM3B,KACV4B,MAAM,uDACLE,MAAK,SAAUC,GAEZ,OAAOA,EAAIC,UACZF,MAAK,SAASG,GAIb,OAHAN,EAAIoF,SAAS,CACTxB,aAAatD,IAEVA,O,6BAIf,SAAgBa,GACZ9C,KAAKJ,MAAM8B,YAAY,GACvB1B,KAAKJ,MAAM0I,iBAAiBxF,K,gCAEhC,SAAmBA,GACf,GAAa,wBAATA,EAAgC,CAChCtB,QAAQC,IAAI,uBACZ,IAAIE,EAAM3B,KAEV4B,MAAM,0DACLE,MAAK,SAAUC,GACZ,OAAOA,EAAIC,UACZF,MAAK,SAASG,GAEb,OADAN,EAAI/B,MAAM8B,YAAY,EAAEO,GACjBA,SAGX,CACIN,EAAM3B,KACV4B,MAAM,yDAAyDkB,GAC9DhB,MAAK,SAAUC,GACZ,OAAOA,EAAIC,UACZF,MAAK,SAASG,GAGb,OADAN,EAAI/B,MAAM8B,YAAY,EAAEO,GACjBA,Q,yBAKnB,SAAYsG,GACqB,MAA1BvI,KAAKuG,MAAM4B,cACVnI,KAAK+G,SAAS,CACVzD,WAAU,EACVN,eAAe,SAEdhD,KAAKuG,MAAMhB,aAAaiD,SAASxI,KAAKuG,MAAM4B,eACjDnI,KAAK+G,SAAS,CACVzD,WAAU,EACVN,eAAe,UAGnBhD,KAAK+G,SAAS,CACVzD,WAAU,EACVN,eAAe,e,sBAK3B,SAASF,GACL,IAAInB,EAAM3B,KACV4B,MAAM,yDAAyDkB,GAC9DhB,MAAK,SAAUC,GACZ,OAAOA,EAAIC,UACZF,MAAK,SAASG,GAGb,OADAN,EAAI/B,MAAM8B,YAAY,EAAEO,GACjBA,O,uBAGf,SAAUa,GAEN,IAAInB,EAAM3B,KACV4B,MAAM,4DAA4DkB,GACjEhB,MAAK,SAAUC,GACZ,OAAOA,EAAIC,UACZF,MAAK,SAASG,GAEb,OADAN,EAAI/B,MAAMsC,iBAAiBD,GACpBA,O,wBAGf,SAAWsG,GAEPvI,KAAK+G,SAAS,CACVoB,cAAcI,M,8BAItB,WACIvI,KAAK+G,SAAS,CACVzD,WAAU,M,mCAGlB,WACItD,KAAK+G,SAAS,CACV3C,gBAAe,M,oBAGvB,WAEI,OACI,sBAAKhE,MAAOpB,GAAOiI,MAAnB,UAGA,cAAC/G,EAAA,EAAD,CAAOE,MAAOpB,GAAO0I,MAAOvH,UAAW,GAAvC,SACI,sBAAKC,MAAOpB,GAAOM,UAAnB,UAEI,cAAC,GAAD,CAAiBiG,aAAcvF,KAAKuG,MAAMhB,aAAcuB,WAAY9G,KAAK8G,aACzE,cAAC7D,EAAA,EAAD,CAAQwF,KAAO,QAAQ1I,QAASC,KAAKoI,YAArC,SACI,cAAC,IAAD,CAAQhI,MAAS,CAACjB,OAAO,aAKrC,cAAC,EAAD,CACI2D,QAAW9C,KAAKuG,MAAM4B,cACtB7E,UAAWtD,KAAKuG,MAAMjD,UACtBJ,iBAAkBlD,KAAKkD,iBACvBF,eAAgBhD,KAAKuG,MAAMvD,eAC3BD,gBAAiB/C,KAAK+C,gBACtBF,mBAAoB7C,KAAK6C,qBAE7B,cAAC,EAAD,CACAuB,eAAmC,MAAnBpE,KAAKJ,MAAM8I,OAC3BvE,sBAAuBnE,KAAKmE,sBAC5BuE,OAAU1I,KAAKJ,MAAM8I,OACrBxE,UAAalE,KAAKJ,MAAMsE,mB,GAtJVnF,a,UC7CpBC,I,cAIM,CACJ2J,OAAQ,YALV3J,GAUY,CAEVqD,SAAU,WACVqC,QAAS,EACThF,SAAU,IA4BlB,SAASkJ,GAAcC,EAAmBC,EAAgBC,GACtD,OAAyB,MAArBF,GAAsD,GAAzBC,EAAexD,QAAgBwD,EAAeN,SAASO,GAIjF,CAAEC,KAAM,SAFJ,CAAEC,YAAa,OA1BzBC,SAASC,KAAK7D,OAKf4D,SAASE,MAJTF,SAASG,cAAc,CACnBC,YAAa,0E,IA2PNC,G,kDA7NX,WAAY3J,GAAQ,IAAD,8BACf,cAAMA,IACD2G,MAAQ,CACTiD,SAAU,KACVC,aAAc,IAElB,EAAKrB,YAAc,EAAKA,YAAY9G,KAAjB,gBACnB,EAAKoI,YAAc,EAAKA,YAAYpI,KAAjB,gBACnB,EAAKqI,YAAc,EAAKA,YAAYrI,KAAjB,gBACnB,EAAKsI,WAAa,EAAKA,WAAWtI,KAAhB,gBAClB,EAAKuI,eAAiB,EAAKA,eAAevI,KAApB,gBAVP,E,qDAcnB,WAAqB,IAAD,OAChBtB,KAAK8J,OAASC,IAAUC,IAASC,YAAYjK,OACxCkK,MAAMlK,KAAKJ,MAAMuK,MAItBjB,SAASkB,WAAWC,IAAI,WAAWC,GAAG,SAAS,SAAAC,GAC3C,IAAIC,EAAc,GAClBD,EAASE,SAAQ,SAAAC,GAEb,IAEIP,GAFAA,EAAOO,EAAKC,OAEAC,QAAQ,MAAO,IAAIA,QAAQ,OAAQ,IACnDJ,EAAYK,KAAKV,MAGrB,EAAKpD,SAAS,CAAE0C,aAAce,S,gCAMtC,WACIxK,KAAK8J,OAAOI,MAAMlK,KAAKJ,MAAMuK,MACxBW,KAAK9K,KAAKJ,MAAMmL,c,yBAMzB,SAAYxC,GAWRvI,KAAK+G,SAAS,CACVyC,SAAUQ,IAASC,YAAYjK,QAEnCA,KAAKJ,MAAMoL,qBAAqB,MAAOhL,KAAKJ,MAAMuK,KAAKpB,S,yBAE3D,WAEIgB,IAAUC,IAASC,YAAYjK,OAAOiL,OAAO,QACxCC,aACAC,SAAS,KACTC,KAAK,cAAe,SACpBhL,MAAM,aAAc,UACpBA,MAAM,cAAe,QACrBA,MAAM,YAAa,MAExBJ,KAAK+G,SAAS,CACVyC,SAAU,S,yBAKlB,SAAY6B,GAkBR7J,QAAQC,IAAI,yBAA0B,IAAKzB,KAAKJ,MAAMuK,KAAKrG,KAAM,IAAK9D,KAAKJ,MAAMuK,KAAKpB,OAItFvH,QAAQC,IAAI,0BAA2BzB,KAAKuG,MAAMkD,cAElDjI,QAAQC,IAAI,gBACZzB,KAAKJ,MAAM0L,qBAAqBtL,KAAKJ,MAAMuK,KAAKpB,OAChD/I,KAAKJ,MAAM2L,kBAAkBvL,KAAKJ,MAAMuK,KAAKpB,S,wBAMjD,SAAWyC,EAAKC,GAIZ,OAHmB1B,MACd2B,OAAO,CAACD,EAAM,GAAIA,EAAM,KACxBE,MAAM,CAAC,EAAG,IACRC,CAAaJ,K,yBAGxB,SAAYK,EAAWC,GACnB,GAAiB,GAAbD,EACA,OACI,wBAAQxB,IAAI,SACRrB,KAAK,UACL+C,EAAGD,EACH/D,QAAS,O,4BAKzB,WACI/H,KAAKJ,MAAMoM,oBACXxK,QAAQC,IAAI,iB,oBAIhB,WAGI,GAAoC,MAAhCzB,KAAKJ,MAAMiJ,kBACX,IAAIoD,EAAmBjM,KAAKJ,MAAMkJ,eAAeN,SAASxI,KAAKJ,MAAMuK,KAAKpB,OAAS,EAAI,QAEnFkD,EAAmBjM,KAAKJ,MAAMkJ,eAAeN,SAASxI,KAAKJ,MAAMuK,KAAKpB,OAAS,EAAI,GAK3F,GAAI/I,KAAKJ,MAAMiJ,mBAAqB7I,KAAKJ,MAAMuK,KAAKpB,MAAO,CACvD,IAAImD,EAAY,UAChB1K,QAAQC,IAAI,sBAAuBzB,KAAKJ,MAAMiJ,wBAC3C,GAAI7I,KAAKJ,MAAMuM,mBAAqBnM,KAAKJ,MAAMuK,KAAKpB,MACnDmD,EAAY,eAKhB,GAAIlM,KAAKJ,MAAMwM,YAAY5D,SAASxI,KAAKJ,MAAMuK,KAAKpB,OAC5CmD,EAAY,eACb,GAAIlM,KAAKJ,MAAMkJ,eAAeN,SAASxI,KAAKJ,MAAMuK,KAAKpB,OACtDmD,EAAY,eAEZA,EAAY,OAGxB,GAAuC,GAAnClM,KAAKJ,MAAMoL,qBAA+B,CACtCkB,EAAY,UAChB1K,QAAQC,IAAI,mBAEhB,GAA0B,GAAtBzB,KAAKJ,MAAMyM,QACPH,EAAY,UAGpB,OACI,oBAAGI,UAAU,OAAb,UAIY9K,QAAQC,IAA4B,GAAvBzB,KAAKJ,MAAMuK,KAAKpB,OAAW,eAAgBmD,GAEhE,wBAAQ7B,IAAI,SACRtK,QAASC,KAAKoI,YAAY9G,KAAKtB,MAC/BuM,YAAavM,KAAK2J,YAAYrI,KAAKtB,MAGnCwM,WAAYxM,KAAK6J,eACjBkC,EAAG/L,KAAK4J,WAAW5J,KAAKJ,MAAMuK,KAAKsC,MAAOzM,KAAKJ,MAAM8M,cAGrDtM,MAAOuM,OAAOC,OAAO,GAAI5N,GAAe,CAAE+I,QAASkE,EAAkBjD,KAAMkD,MAwB/E,sBACI9L,MAAOuM,OAAOC,OAAO,GACjB5N,IAtOI6N,EAuOe7M,KAAKJ,MAAMiN,kBAvOP/D,EAuO0B9I,KAAKJ,MAAMkJ,eAvOrBC,EAuOqC/I,KAAKJ,MAAMuK,KAAKpB,MAtOvF,MAArB8D,GACIA,EAAkBrE,SAASO,IAAUD,EAAeN,SAASO,GAEtD,CAAE+D,WAAY,6CAKtB,CAAE9D,KAAM,UA+NKJ,GAAc5I,KAAKJ,MAAMiJ,kBAAmB7I,KAAKJ,MAAMkJ,eAAgB9I,KAAKJ,MAAMuK,KAAKpB,QAC3FgE,GAAG,IACHC,GAAG,IANP,SAMYhN,KAAKJ,MAAMuK,KAAKrG,UA1O5C,IAA4B+I,EAAmB/D,EAAgBC,M,GAmB5ChK,aCfJkO,G,kDAxCX,WAAYrN,GAAQ,uCACVA,G,qDAEV,WACII,KAAKkN,OAASnD,IAAUC,IAASC,YAAYjK,OACxCkK,MAAMlK,KAAKJ,MAAMuK,MACjBW,KAAK9K,KAAKJ,MAAMuN,WACrBpD,IAAUC,IAASC,YAAYjK,OAAOoL,KAAK,cAAa,SAASgC,GACzD,GAAmB,MAAhBA,EAAEC,aAAoB,MAAO,yB,gCAI5C,WACIrN,KAAKkN,OAAOhD,MAAMlK,KAAKJ,MAAMuK,MACxBW,KAAK9K,KAAKJ,MAAM0N,YAErBtN,KAAKuN,YAAYvD,IAASC,YAAYjK,MAAMA,KAAKJ,MAAMkJ,kB,yBAE3D,SAAY0E,EAAIC,GACZ1D,IAAUyD,GAITpN,MAAM,WAAW,SAAU4E,GAC1B,OAAIyI,EAAYjF,SAASxD,EAAE0I,OAAO3E,OAAS0E,EAAYjF,SAASxD,EAAE2I,OAAO5E,OAAyB,MAAhB/D,EAAEqI,aAAqBrI,EAAE4I,WAAW,EAC1G,EACc,MAAhB5I,EAAEqI,aAAqBrI,EAAE4I,WAAW,EAClC,GAEA,O,oBAKlB,WACI,OACI,sBAAMtB,UAAU,a,GArCTvN,a,mBCGbC,GAAS,CACX6O,OAAQ,CACJlF,OAAQ,WAGZmF,iBAAiB,CAEb9E,KAAM,UACNjB,QAAS,IACTY,OAAQ,WAGZoF,WAAW,CACPhG,QAAS,IAEbiG,aAAa,CAETtO,SAAS,GACTuO,WAAW,SACXC,UAAU,SACVpB,WAAW,qBAeO/N,Y,ICnCpBC,GAAS,CACXmP,KAAK,CACDpG,QAAQ,OACRiB,KAAM,UAgCCoF,G,kDA1BX,WAAYxO,GAAQ,IAAD,8BACf,cAAMA,IACD2G,MAAQ,GAEb,EAAK6B,YAAc,EAAKA,YAAY9G,KAAjB,gBAJJ,E,+CAMnB,WACItB,KAAKJ,MAAMoL,qBAAqB,QAAQ,Q,oBAE5C,WACI,OAAiC,MAA9BhL,KAAKJ,MAAMiJ,kBAEN,sBACIzI,MAAOpB,GAAOmP,KACdhH,MAAOnH,KAAKJ,MAAMuH,MAClBD,OAAQlH,KAAKJ,MAAMsH,OACnBnH,QAASC,KAAKoI,YAAY9G,KAAKtB,QAMvC,S,GAvBSjB,a,2BCKhBmK,SAASC,KAAK7D,OAKf4D,SAASE,MAJTF,SAASG,cAAc,CACnBC,YAAa,0EASrB,IAAMtK,GAAU,CACZ2B,KAAK,CACD0N,UAAW,SACXC,UAAW,UAEf5G,MAAM,GAGNyG,KAAK,CACDpG,QAAQ,OAEZwG,IAAI,CACAC,MAAMC,MAMA1E,IAAgBA,KAChBA,MA8Bd,IAQMgB,GAAa,SAAC2D,GAChBA,EAAUtD,KAAK,aAAa,SAACgC,GAAD,MAAO,aAAeA,EAAEuB,EAAI,IAAMvB,EAAEwB,EAAI,QAElEzB,GAAY,SAACuB,GACfA,EAAUtD,KAAK,eAAgB,GAC9BhL,MAAM,SAAS,QACXA,MAAM,UAAU,OAEnBkN,GAAa,SAACoB,GAChBA,EACKtD,KAAK,MAAM,SAACgC,GAAD,OAAOA,EAAEM,OAAOiB,KAC3BvD,KAAK,MAAM,SAACgC,GAAD,OAAOA,EAAEM,OAAOkB,KAC3BxD,KAAK,MAAM,SAACgC,GAAD,OAAOA,EAAEO,OAAOgB,KAC3BvD,KAAK,MAAM,SAACgC,GAAD,OAAOA,EAAEO,OAAOiB,MAE9BC,GAAc,SAACH,GAEjBA,EAAUI,UAAU,SACfhE,KAAKC,IAEV2D,EAAUI,UAAU,SACfhE,KAAKwC,IAEV,IAAIyB,EAAOhF,MACNiF,YAAY,CAAC,GAAI,IACjB1E,GAAG,QAAQ,SAAS8C,GACjB5L,QAAQC,IAAI,OAAOsI,IAASkF,UAAUC,EAAE,IAAInF,IAASkF,UAAWlF,IAASkF,UAAUC,EAAI,IACvFR,EAAUzD,OAAO,KAAKG,KAAK,YAAarB,IAASkF,WACjDP,EAAUI,UAAU,QAAQ1O,MAAM,YAAY,IAAI2J,IAASkF,UAAWlF,IAASkF,UAAUC,EAAI,OAGrGR,EAAUzD,OAAO,mBAChBH,KAAKiE,I,IAsRKI,G,kDAtQX,WAAYvP,GAAQ,IAAD,8BACf,cAAMA,IACD2G,MAAQ,CACTuC,eAAgB,EAAKlJ,MAAMwP,sBAC3BhD,YAAY,EAAKxM,MAAMyP,mBAEvB5F,aAAe,IAGnB,EAAK8B,kBAAoB,EAAKA,kBAAkBjK,KAAvB,gBATV,E,qDAYnB,WAAqB,IAAD,OAChBtB,KAAKsP,QAAUvF,IAAUC,IAASC,YAAYjK,OAC9C,IAAIuP,EAAQxF,IAAmB/J,KAAKJ,MAAMuK,KAAKqF,qBAAqBC,OAEpEvG,SAASkB,WAAWC,IAAI,WAAWC,GAAG,SAAS,SAAAC,GAC3C,IAAIC,EAAc,GAClBD,EAASE,SAAQ,SAAAC,GAEb,IAAIP,EAAOO,EAAKC,MAChBnJ,QAAQC,IAAI,YAAYiJ,EAAKC,OAE7BH,EAAYK,KAAKV,GACjB3I,QAAQC,IAAI0I,MAEhB,EAAKpD,SAAS,CAAE0C,aAAce,OAIlC+E,EAAMjF,GAAG,QAAQ,WACbiF,EACCA,MAAM,SAAUxF,MAAmB2F,UAAU,KAC7CH,MAAM,OAAQxF,IAAa,EAAKnK,MAAMuK,KAAKqF,qBAAqBG,OAAOC,UAAS,SAASxC,GAAI,OAAQ,GAAIA,EAAEQ,WAAW,IAAM,OAAQ8B,SAAS,KAC7IH,MAAM,SAAUxF,MAAiB4E,EAAmB,GAAjB,EAAK/O,MAAMuH,MAAY,GAAGyH,EAAE,EAAKhP,MAAMsH,OAAS,IAGpF,EAAKoI,QAAQxE,KAAK+D,S,+BAI1B,SAAkB9F,GACd,IAAI8G,EAtDZ,SAA0B9G,EAAM+G,GAC5B,IAAID,EAAI,GACR,IAAK,IAAIxE,KAAKyE,EACPA,EAASzE,GAAG7C,SAASO,IACpB8G,EAAIhF,KAAKkF,SAAS1E,IAI1B,OADA7J,QAAQC,IAAI,oBACLoO,EA8COG,CAAiBjH,EAAM/I,KAAKJ,MAAMuK,KAAK2F,SAAS/G,IAG1D/I,KAAK+G,SACD,CACI+B,eAAe9I,KAAKJ,MAAMuK,KAAK8F,gBAAgBlH,GAC/CqD,YAAYyD,IAGpB7P,KAAKJ,MAAMsQ,yBAAyBlQ,KAAKJ,MAAMuK,KAAK8F,gBAAgBlH,IACpE/I,KAAKJ,MAAMuQ,sBAAsBN,K,0BAErC,WAEa3G,SAASkB,WACfC,IAAI,SAASC,GAAG,SAAQ,SAAUC,GAE7B,IACI6F,EAAS7F,EAASI,MAAM0F,SAASzF,QAAQ,MAAM,IAAIA,QAAQ,OAAO,IADpD,GAENC,KAAKuF,MAGzBpQ,KAAK+G,SACD,CACI0C,aAAae,cAGrBhJ,QAAQC,IAAI,6B,oBAKhB,WAAU,IAAD,OACLD,QAAQC,IAAI,WAAYzB,KAAKJ,MAAMuK,KAAKqF,qBAAqBC,OAC7D,IAAIA,EAAQzP,KAAKJ,MAAMuK,KAAKqF,qBAAqBC,MAAMa,KAAK,SAACC,GACzD,IA0BW,MAAsB,eAAjB,EAAK3Q,MAAM4Q,KAAsC,GAAZD,EAAKE,OAElDjP,QAAQC,IAAI,aAGR,cAAC,GAAD,CACI0I,KAAMoG,EACNzM,KAAMyM,EAAKzM,KAGXiH,WAAcA,GAEdQ,kBAAqB,EAAKA,kBAC1BzC,eAAkB,EAAKvC,MAAMuC,eAC7BkD,kBAAqB,EAAKpM,MAAMoM,kBAChCI,YAAe,EAAK7F,MAAM6F,YAC1BD,kBAAqB,EAAKvM,MAAMuM,kBAChCb,qBAAsB,EAAK1L,MAAM0L,qBACjCzC,kBAAmB,EAAKjJ,MAAMiJ,kBAC9BmC,qBAAsB,EAAKpL,MAAMoL,qBACjC0B,aAAc,EAAK9M,MAAM8M,aACzBG,kBAAmB,EAAKjN,MAAM8Q,sBAC9BC,eAA2C,MAA3B,EAAK/Q,MAAM+Q,eAAqB,EAAK/Q,MAAMiJ,kBAAkB,EAAKjJ,MAAM+Q,eACxFC,kBAAmB,EAAKrK,MAAMqK,kBAC9BvE,SAAS,GAhBJ,OAAOkE,EAAKxH,QAuBzB,cAAC,GAAD,CACIoB,KAAMoG,EACNzM,KAAMyM,EAAKzM,KAGXiH,WAAcA,GAEdQ,kBAAqB,EAAKA,kBAC1BzC,eAAkB,EAAKvC,MAAMuC,eAE7BsD,YAAe,EAAK7F,MAAM6F,YAC1BD,kBAAqB,EAAKvM,MAAMuM,kBAChCb,qBAAsB,EAAK1L,MAAM0L,qBACjCU,kBAAqB,EAAKpM,MAAMoM,kBAChCnD,kBAAmB,EAAKjJ,MAAMiJ,kBAC9BmC,qBAAsB,EAAKpL,MAAMoL,qBACjC0B,aAAc,EAAK9M,MAAM8M,aACzBG,kBAAmB,EAAKjN,MAAM8Q,sBAC9BC,eAA2C,MAA3B,EAAK/Q,MAAM+Q,eAAqB,EAAK/Q,MAAMiJ,kBAAkB,EAAKjJ,MAAM+Q,eACxFC,kBAAmB,EAAKhR,MAAMgR,mBAhBzB,OAAOL,EAAKxH,OAoB7B,MAAO8H,GAEH,OAEI,cAAC,GAAD,CACI1G,KAAMoG,EACNzM,KAAMyM,EAAKzM,KAGXiH,WAAcA,GAEdQ,kBAAqB,EAAKA,kBAC1BzC,eAAkB,EAAKvC,MAAMuC,eAE7BsD,YAAe,EAAK7F,MAAM6F,YAC1BD,kBAAqB,EAAKvM,MAAMuM,kBAChCb,qBAAsB,EAAK1L,MAAM0L,qBACjCU,kBAAqB,EAAKpM,MAAMoM,kBAChCnD,kBAAmB,EAAKjJ,MAAMiJ,kBAC9BmC,qBAAsB,EAAKpL,MAAMoL,qBACjC0B,aAAc,EAAK9M,MAAM8M,aACzBG,kBAAmB,EAAKjN,MAAM8Q,sBAC9BC,eAA2C,MAA3B,EAAK/Q,MAAM+Q,eAAqB,EAAK/Q,MAAMiJ,kBAAkB,EAAKjJ,MAAM+Q,eACxFC,kBAAmB,EAAKhR,MAAMgR,mBAhBzB,OAAOL,EAAKxH,WA0B7B4G,EAAQ3P,KAAKJ,MAAMuK,KAAKqF,qBAAqBG,MAAMW,KAAK,SAACQ,EAAKzF,GAC9D,OACI,cAAC,GAAD,CAGIlB,KAAM2G,EACN3D,UAAaA,GACbG,WAAcA,GACdxE,eAAkB,EAAKvC,MAAMuC,eAC7B8H,kBAAmB,EAAKhR,MAAMgR,mBANvB,OAAOvF,MAiC1B,OAFA7J,QAAQC,IAAI,WAAYgO,GACxBjO,QAAQC,IAAI,WAAYkO,GAEpB,qBAAKxI,MAAOnH,KAAKJ,MAAMuH,MAAOD,OAAQlH,KAAKJ,MAAMsH,OAAQ9G,MAAOpB,GAAO2B,KAAvE,SACQ,qBAAK2L,UAAU,QAAQnF,MAAQnH,KAAKJ,MAAMuH,MAAQD,OAAQlH,KAAKJ,MAAMsH,OAAQ9G,MAAOpB,GAAO0I,MAA3F,SACI,oBAAG4E,UAAU,iBAAb,UACA,+BACA,wBAAQ7I,GAAG,cAAcsN,QAAQ,aAAaC,YAAY,IAAIC,aAAa,IAAIC,KAAK,KAAKC,KAAK,IAAIC,OAAO,OAAOC,UAAU,UAA1H,SACI,sBAAMjE,EAAE,oBAAoBpE,KAAK,UAAUsI,OAAS,gBAGxD,4BACK3B,IAEL,4BACKF,IAEL,4BACI,cAAC,GAAD,CACItI,MAAOnH,KAAKJ,MAAMuH,MAClBD,OAAQlH,KAAKJ,MAAMsH,OACnB2B,kBAAmB7I,KAAKJ,MAAMiJ,kBAC9BmC,qBAAuBhL,KAAKJ,MAAMoL,yBAG1C,iC,GA1PJjM,aC1FLwS,G,kDAjCX,WAAY3R,GAAQ,uCACVA,G,0CAGV,WAEI,OAEI,cADA,CACA,OACI+O,OAAkB6C,GAAfxR,KAAKJ,MAAM6R,GAAc,EAAEzR,KAAKJ,MAAM6R,GACzC7C,OAAkB4C,GAAfxR,KAAKJ,MAAM6R,GAAc,EAAEzR,KAAKJ,MAAM8R,GACzCvK,MAA2B,EAAnBnH,KAAKJ,MAAMkM,OAAW5E,OAA4B,EAAnBlH,KAAKJ,MAAMkM,OAClDiF,QAAS,OAA6B,GAArB/Q,KAAKJ,MAAMkM,OAAO,GAAK,IAA0B,GAArB9L,KAAKJ,MAAMkM,OAAO,GAJnE,UAMI,wBAAQ2F,GAAIzR,KAAKJ,MAAMkM,OAAO,EACtB4F,GAAI1R,KAAKJ,MAAMkM,OAAO,EACtBC,EAAG/L,KAAKJ,MAAMkM,OACdwF,OAAO,QACPK,YAAY,IACZ3I,KAAMhJ,KAAKJ,MAAME,QACzB,sBAAMJ,SAA4B,EAAlBM,KAAKJ,MAAMkM,OAAS,GAChC9C,KAAK,QAELiF,WAAW,SACX2D,kBAAkB,WAClBjD,EAAG3O,KAAKJ,MAAMkM,OAAO,EACrB8C,EAAyB,GAArB5O,KAAKJ,MAAMkM,OAAO,GAAK,EAN/B,SAMmC9L,KAAKJ,MAAMH,c,GA3BrCV,aCNnBC,GAAU,CACZM,UAAU,CACNC,QAAS,OACTsS,cAAe,SACflK,WAAW,IAEfmK,cAAc,CACVvS,QAAS,OACTsS,cAAe,OAEnBE,eAAe,CACX1S,QAAQ,GAEZ2S,aAAa,GAIbC,WAAW,GAKXC,UAAU,CACNxS,SAAS,GACTsJ,KAAK,QACL/H,WAAW,W,IA0HJkR,G,kDA9GX,WAAYvS,GAAQ,IAAD,8BACf,cAAMA,IACD2G,MAAQ,GAEb,EAAKoD,YAAc,EAAKA,YAAYrI,KAAjB,gBACnB,EAAK8Q,eAAiB,EAAKA,eAAe9Q,KAApB,gBACtB,EAAK8G,YAAc,EAAKA,YAAY9G,KAAjB,gBANJ,E,+CAQnB,SAAYb,EAAIsI,GACZvH,QAAQC,IAAI,wBAAwB,IAAIhB,EAAI,IAAIsI,GAChD/I,KAAKJ,MAAMyS,mBAAmB5R,K,yBAElC,SAAYA,EAAIsI,GACZvH,QAAQC,IAAI,wBAAwB,IAAIhB,EAAI,IAAIsI,K,4BAGpD,WACI/I,KAAKJ,MAAMyS,mBAAmB,Q,4BAElC,SAAeC,GACX,IAAIC,EAAUvS,KAAKJ,MAAM4S,UAAU,GAAG,EAAGxS,KAAKJ,MAAM4S,UAAU,IAAI,GAKlE,OAJYzI,MACP2B,OAAO,CAAC6G,EAAQ,EAAEvS,KAAKJ,MAAM4S,UAAU,GAAG,KAC1C7G,MAAM,CAAC,MAAM,SAAU,UACvB8G,YAAY1I,IACVjK,CAAMwS,K,yBAEjB,SAAYI,GACR,OAAIA,EAAIC,QAAQ,MAAQ,EACbD,EAAI9H,QAAQ,KAAK,IAAIA,QAAQ,IAAI,KAAKA,QAAQ,IAAI,KAAKA,QAAQ,IAAI,IAEnE8H,EAAI9H,QAAQ,KAAK,IAAIA,QAAQ,IAAI,KAAKA,QAAQ,IAAI,S,oBAGjE,WAAU,IAAD,OACL,QAA+B4G,GAA5BxR,KAAKJ,MAAMgT,gBACV,IAAIC,EAAiB7S,KAAKJ,MAAMgT,gBAAgBtC,KAAK,WAAYvH,GAAW,IAAD,oBAApBtI,EAAoB,UAE3E,OACI,sBAAgCL,MAASpB,GAAO8S,cAAhD,UACI,8BACA,cAAC,GAAD,CAAYrS,KAAMsJ,EAAM,EACpB+C,OAAQ,GAERhM,MAAO,EAAKgT,eAAe,EAAKlT,MAAMmT,WAAWtS,GAAKuS,uBAG1D,sBAAK5S,MAAO,CAAC6S,YAAY,EAAG9L,MAAM,IAAlC,UACI,cAAC9G,EAAA,EAAD,CAAYC,QAAQ,QAAQC,UAAU,KAAtC,SACA,mBAAG2S,KAAM,mCAAmCzS,EAC5CkN,OAAO,SACPpB,YAAa,EAAK5C,YAAYrI,KAAK,EAAKb,EAAIsI,GAC5CyD,WAAY,EAAK4F,eAAe9Q,KAAK,GACrCvB,QAAS,EAAKqI,YAAY9G,KAAK,EAAKb,EAAIsI,GAJxC,SAMC,EAAKnJ,MAAMmT,WAAWtS,GAAK+B,UAGhC,4BACI,qBAAKpC,MAAQpB,GAAO+S,eAApB,SACI,sBAAK7K,OAAO,KAAKC,MAAM,KAAvB,UACA,sBAAOwH,EAAG,EACFC,EAAG,EACHzH,MAAM,KAAKD,OAAO,KAClBiM,GAAG,IACHC,GAAG,IACHhT,MAAO,CAAC4I,KAAK,UAAWjB,QAAS,MAErC,sBACI4G,EAAG,GACHC,EAAG,GACHX,WAAW,SACX7N,MAAOpB,GAAOkT,UAJlB,SAKE,EAAKmB,YAAY,EAAKzT,MAAMmT,WAAWtS,GAAK0K,wBAlCpD,eAAepC,MA+DjC,OACI,qBAAK3I,MAASpB,GAAOM,UAArB,SACKuT,Q,GAzGW9T,aCpCtBC,GAAU,CACZsU,KAAK,CACDtK,KAAM,OACNsI,OAAQ,UACRK,YAAa,EACnB4B,cAAe,GACf5K,OAAQ,YAIN6K,GAAOzJ,MAEF0J,MAAM1J,KACN4E,GAAE,SAASvB,GAAK,OAAOA,EAAEuB,KACzBC,GAAE,SAASxB,GAAK,OAAOA,EAAEwB,KA2CnB8E,G,kDAtCX,WAAY9T,GAAQ,IAAD,8BACf,cAAMA,IACD2G,MAAQ,CACToN,aAAY,GAEhB,EAAKC,UAAY,EAAKA,UAAUtS,KAAf,gBALF,E,6CAQnB,WAEItB,KAAK+G,SAAS,CACV4M,aAAe3T,KAAKuG,MAAMoN,gB,oBAIlC,WAEI,OACI,gCACI,+BACA,wBAAQlQ,GAAG,iBAAiBsN,QAAQ,aAAaG,KAAK,KAAKC,KAAK,IAAIH,YAAY,IAAIC,aAAa,IAAIG,OAAO,OAA5G,SACA,sBAAMhE,EAAE,uBAGR,sBACIA,EAAGoG,GAAKxT,KAAKJ,MAAMuK,MACnB/J,MAAOpB,GAAOsU,KACdvL,QAAS/H,KAAKuG,MAAMoN,YAAY,EAAE,GAClCE,aAAe7T,KAAK4T,UAAUtS,KAAKtB,MACnC8T,aAAe9T,KAAK4T,UAAUtS,KAAKtB,MACnC+T,UAAW,gC,GA/BJhV,aChBvB0S,GAAK,GAGHzS,GAAU,CACZgV,gBAAgB,CACZrM,WAAY,GACZsM,UAAU,GACV9M,MAAM,KAGV+M,MAAM,GAGNrG,OAAO,CACHlF,OAAQ,YAchB,SAASwL,GAAUpL,GACf,OAAa,GAANA,EAAW,GAGtB,SAASqL,GAAcC,EAAaC,EAAYC,GAC5C,IAAIC,EAAS,GACb,GAAU,SAAPD,EACC,IAAIE,EAAOhD,GACPiD,EAAWjD,OACb,GAAU,SAAN8C,EACFE,EAAOhD,GACPiD,EAAWjD,GAuBnB,OApBA9E,OAAOgI,KAAKN,GAAc/D,KAAI,SAASsE,GAC3BP,EAAaO,GAAKtE,KAAI,SAACuE,GAC3B,IAAIC,EAAOR,EAAY3B,QAAQ5C,SAAS6E,IACpCG,EAAOT,EAAY3B,QAAQkC,GAC/BL,EAAO3J,KAAM,CACTmK,OAAO,CACH,CACIrG,EAAG8F,EACH7F,EAAGuF,GAAUW,IACd,CACCnG,EAAG+F,EACH9F,GAAIuF,GAAUW,GAAQX,GAAUY,IAAO,GACxC,CACCpG,EAAG8F,EACH7F,EAAGuF,GAAUY,aAM1BP,E,IA2HIS,G,kDA3GX,WAAYrV,GAAQ,IAAD,8BACf,cAAMA,IACD2G,MAAQ,CACToN,aAAa,GAEjB,EAAKC,UAAY,EAAKA,UAAUtS,KAAf,gBACjB,EAAK8G,YAAc,EAAKA,YAAY9G,KAAjB,gBANJ,E,sDAQnB,WACkByI,IAAU,gBACP+E,UAAU,Y,uBAE/B,WACI9O,KAAK+G,SAAS,CACV4M,aAAa,M,yBAGrB,SAAYpL,EAAE2M,EAAOpR,GACjBtC,QAAQC,IAAI,8BAA8B,IAAIqC,EAAK,IAAIoR,EAAO,IAAI3M,GAClEvI,KAAKJ,MAAMuV,kBAAkB5M,K,yBAEjC,SAAYsD,EAAU4F,EAAGC,GACrB,GAAc,GAAX7F,EACC,OACI,wBACI4F,GAAIA,EACJC,GAAIA,EACJ1I,KAAK,UACL+C,EAAG,GACHhE,QAAS,O,oBAMzB,WAAU,IAAD,OAIL,GAAuB,MAApB/H,KAAKJ,MAAMwV,QAAc,CACxB,IAAId,EAActU,KAAKJ,MAAMyV,kBAAkBrV,KAAKJ,MAAMwV,SAC1D,GAAmB,SAAhBd,EAAY,GACX,OACI,uCAIR,IAAI7E,EAAQ6E,EAAYhE,KAAK,SAACgF,EAAYJ,GAEtC,OACI,gCACA,wBACIzD,GAAIA,GACJC,GAAIyC,GAAUe,GACdnJ,EAnIX,EAoIW3L,MAAOpB,GAAO6O,OACd7E,KAAM,EAAKpJ,MAAMwV,UAAUE,EAAY,YAAW,UAClDvV,QAAS,EAAKqI,YAAY9G,KAAK,EAAKgU,EAAYJ,EAAO,EAAKtV,MAAM2V,SAASD,GAAaxR,OAN/EwR,EAAYJ,GASxB,EAAKM,YAAuC,MAA3B,EAAK5V,MAAM+Q,eAAqB2E,GAAa,EAAK1V,MAAMwV,QAAQE,GAAa,EAAK1V,MAAM+Q,eAAec,GAAG0C,GAAUe,IACtI,uBAAOvG,EAAG8C,GAAO7C,EAAGuF,GAAUe,GAAQ,EAAG9U,OA3E1CqV,EA2E2D,EAAK7V,MAAM8Q,sBA3EpD3H,EA2E0E,EAAKnJ,MAAM2V,SAASD,GAAavM,MA1EtH,MAAnB0M,GACIA,EAAkBjN,SAASO,GAEnB,CAAC+D,WAAW,6CAKpB,CAAC9D,KAAK,UAkEG,UAAqI,EAAKpJ,MAAM2V,SAASD,GAAaxR,KAAtK,SAXU,iBAAiBoR,GAhE/C,IAAmBO,EAAkB1M,KAgFrB2M,EAAYtB,GADGpU,KAAKJ,MAAMkQ,SAAS9P,KAAKJ,MAAMwV,SACPd,EAAY,QACnDqB,EAAQhJ,OAAOgI,KAAKe,GAAWpF,KAAI,SAASsE,GAE5C,OACI,cAAC,GAAD,CAAuCzK,KAAMuL,EAAUd,GAAKI,OAAQ5U,MAASpB,GAAOsU,MAAjE,eAAesB,MAKtCgB,EAAkBxB,GAAcpU,KAAKJ,MAAMiW,kBAAkB7V,KAAKJ,MAAMwV,SAASd,EAAY,SAC7FwB,EAAcnJ,OAAOgI,KAAKiB,GAAiBtF,KAAI,SAASsE,GAExD,OACI,cAAC,GAAD,CAAoCzK,KAAMyL,EAAgBhB,GAAKI,OAAQ5U,MAASpB,GAAOsU,MAApE,YAAYsB,MAKvC,OACI,qBAAKnR,GAAG,cAAR,SACI,sBAAK6I,UAAU,kBAAkBpF,OAAQ,GAAGoN,EAAYhP,OAAQlF,MAAQpB,GAAOgV,gBAA/E,UACI,4BACKvE,IAGL,4BACKkG,IAEL,4BACKG,SAMrB,OACI,4BAAI9V,KAAKJ,MAAMwV,c,GAvGGrW,a,mDC3ExBC,GAAU,CACZ2B,KAAM,CAGF0B,SAAU,WACV0T,IAAI,IACJpR,KAAM,GACND,OAAQ,GAEVsR,QAAQ,CACNtW,SAAS,IAEXuW,WAAW,CACT1W,QAAS,OACTsS,cAAe,SACfrS,SAAU,QAEZ0W,YAAY,CACV3W,QAAS,OACTsS,cAAe,SACfrS,SAAU,QAEZ2W,eAAe,CACblI,WAAW,OAGbmI,SAAS,CACP1W,SAAS,GACT2W,WAAY,OACZ1O,WAAW,EACXC,cAAc,IAGlB0O,GAAiB,GAqJNC,G,kDAnJX,WAAY3W,GAAQ,uCACVA,G,+CAQV,SAAYmJ,GACR,OAAQ,GAAU,IAANA,I,0BAahB,c,oBAOA,WAGI,IAAIyN,EAASzM,MACH4B,MAAM,CAAC,EAAE,KACTD,OAAO,CAAC,EAAE,IAGhB+K,EADa,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,GACUnG,KAAK,SAACvH,GACxC,OACI,4BACA,wBAAQ0I,GAAI,GAAS,GAAN1I,EAAU2I,GAAI,GAAI3F,EAAGyK,EAAOzN,GAAQC,KAAK,OAAOjB,QAAQ,MAAvE,gBADQ,oBAAoBgB,MAQhC2N,EAFW,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAEMpG,KAAK,SAACvH,GACpC,OAEI,4BACA,wBACI0I,GAAG,KAAKC,GAAI,GAAS,IAAN3I,EACfgD,EAPE,GAOiB,IAANhD,EACbC,KAAK,OACLjB,QAAQ,MACRuJ,OAAO,UACPK,YAAY,IACZgF,gBAAgB,OARZ,mBAAmB5N,MAanC,GAAiC,MAA9B/I,KAAKJ,MAAMiJ,kBACV,OACI,qBAAKzI,MAAOpB,GAAO2B,KAAnB,SACI,eAACiW,GAAA,EAAD,CAAgBC,iBAAiB,EAAjC,UACI,cAACC,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACA,cAAC1W,EAAA,EAAD,CAAYD,MAAOpB,GAAOgX,QAA1B,sBAEA,cAACgB,GAAA,EAAD,UACI,qBAAK5W,MAAOpB,GAAOM,UAAnB,SAEI,qBAAKc,MAAOpB,GAAOkX,YAAnB,SAEI,sBAAKhP,OAAO,KAAKC,MAAM,MAAvB,UACA,sBAAQyH,EAAE,KAAK5F,KAAK,QAApB,4BACCyN,EACD,sBAAQ7H,EAAE,KAAK5F,KAAK,UAApB,UAAgChJ,KAAKJ,MAAM8M,aAAa,GAAG1M,KAAKJ,MAAM8M,aAAa,IAAIuK,QAAQ,KAC/F,sBAAMtI,EAAE,MAAMC,EAAE,KAAK5F,KAAK,UAA1B,UAAsChJ,KAAKJ,MAAM8M,aAAa,GAAG1M,KAAKJ,MAAM8M,aAAa,IAAIuK,QAAQ,mBAU7H,IAAIC,EAAU,GACd,IAAI,IAAI3O,KAAKvI,KAAKJ,MAAMuK,KAAKnK,KAAKJ,MAAM+Q,gBAAgBwG,UACpDD,EAAQrM,KAAK7K,KAAKJ,MAAMuK,KAAKnK,KAAKJ,MAAM+Q,gBAAgBwG,UAAU5O,GAAG,IAKzE,OAFA+N,GAAe,CAACc,KAAKC,IAAL,MAAAD,KAAYF,GAASE,KAAKE,IAAL,MAAAF,KAAYF,IAG7C,qBAAK9W,MAAOpB,GAAO2B,KAAnB,SACI,eAACiW,GAAA,EAAD,WACI,cAACE,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACA,cAAC1W,EAAA,EAAD,CAAYD,MAAOpB,GAAOgX,QAA1B,sBAEA,cAACgB,GAAA,EAAD,UACI,sBAAK5W,MAAOpB,GAAOM,UAAnB,UACI,sBAAKc,MAAOpB,GAAOkX,YAAnB,UAEI,qBAAKhP,OAAO,KAAKC,MAAM,MAAvB,SACI,sBAAMyH,EAAE,KAAK5F,KAAK,QAAlB,0BAEJ,sBAAK9B,OAAO,MAAMC,MAAM,MAAxB,UACKuP,EAED,uBAAM/H,EAAE,MAAMC,EAAE,KAAK5F,KAAK,UAAU5I,MAAOpB,GAAOmX,eAAlD,cAAoEG,GAAe,MACnF,sBAAM3H,EAAE,MAAMC,EAAG,GAAU5F,KAAK,UAAU5I,MAAOpB,GAAOmX,eAAxD,SAAyEG,GAAe,KACxF,sBAAMiB,GAAI,GAAcC,GAAI,IAAKC,GAAG,KAAKC,GAAG,KAAKpG,OAAO,YACxD,sBAAMiG,GAAI,GAAoBC,GAAI,IAAKC,GAAI,GAAUC,GAAI,GAAUpG,OAAO,kBAGlF,sBAAKlR,MAAOpB,GAAOkX,YAAnB,UACI,qBAAKhP,OAAO,KAAKC,MAAM,MAAvB,SACA,sBAAQyH,EAAE,KAAK5F,KAAK,QAApB,yBAEA,sBAAK9B,OAAO,KAAKC,MAAM,MAAvB,UACI,+BACI,iCAAgB1D,GAAG,cAAnB,UACI,sBAAMkU,OAAO,KAAMC,UAAU,QAC7B,sBAAMD,OAAO,MAAMC,UAAU,WAC7B,sBAAMD,OAAO,MAAMC,UAAU,iBAGrC,sBAAM5O,KAAK,oBAAoBjB,QAAQ,MACnC6G,EAAE,KAAKzH,MAAM,MAAMD,OAAO,OAC9B,sBAAQ0H,EAAE,KAAK5F,KAAK,UAApB,sBACA,sBAAM2F,EAAE,MAAMC,EAAE,KAAK5F,KAAK,UAA1B,0C,GAvInBjK,a,UClCfC,GAAU,GCFZ6Y,IDmCoB9Y,YCnCR,IAEVC,GAAS,CACX6O,OAAQ,CACJlF,OAAQ,WAGZmF,iBAAiB,CAEb9E,KAAM,UACNjB,QAAS,KAGbgG,WAAW,CACPhG,QAAS,IAEbiG,aAAa,CAETtO,SAAS,GACTuO,WAAW,SACXC,UAAU,SACVpB,WAAW,oBAEfoF,UAAU,CACNxS,SAAS,GACTsJ,KAAK,QACL/H,WAAW,UAEf6W,aAAa,CACTC,SAAU,IAEdC,oBAAoB,CAChBtY,SAAS,GACTqY,SAAU,IAEVE,WAAY,QAEhBC,oBAAoB,CAChBxY,SAAS,GACTqY,SAAU,IACVI,UAAU,GACVC,SAAW,SACXC,aAAe,WACfC,WAAa,SAEbL,WAAY,S,IA0RLM,G,kDA1QX,WAAY3Y,GAAQ,IAAD,8BACf,cAAMA,IACD2G,MAAQ,CACTiS,cAAa,GAKjB,EAAKC,SAAW,EAAKA,SAASnX,KAAd,gBAChB,EAAKoX,YAAc,EAAKA,YAAYpX,KAAjB,gBAEnB,EAAKqI,YAAc,EAAKA,YAAYrI,KAAjB,gBACnB,EAAK8Q,eAAiB,EAAKA,eAAe9Q,KAApB,gBACtB,EAAKqX,WAAa,EAAKA,WAAWrX,KAAhB,gBAClB,EAAKsX,iBAAmB,EAAKA,iBAAiBtX,KAAtB,gBAExB,EAAKuX,gBAAkB,EAAKA,gBAAgBvX,KAArB,gBAhBR,E,sDAoBnB,WACIuW,GAAY,K,iCAEhB,SAAoBiB,GAEZ9Y,KAAKJ,MAAMuK,OAAS2O,EAAU3O,OAC9B0N,GAAY,M,sBAIpB,SAAS9O,EAAMgQ,EAAShN,GACpB,IAAID,EAASC,EAAW,IAAPhD,EACbiQ,EAASjQ,GAASgQ,EAAS,GAAM3B,KAAK6B,GAAK,GAAI7B,KAAK6B,GAGxD,MAAO,CAFGnN,EAASsL,KAAK8B,IAAIF,GAClBlN,EAASsL,KAAK+B,IAAIH,M,yBAGhC,SAAYjQ,GAER,OAAQ,GAAU,IAANA,I,4BA4BhB,SAAeuJ,GACX,IAAIC,EAAUvS,KAAKJ,MAAM4S,UAAU,GAAG,EAAGxS,KAAKJ,MAAM4S,UAAU,IAAI,GAKlE,OAJYzI,MACP2B,OAAO,CAAC6G,EAAQ,EAAEvS,KAAKJ,MAAM4S,UAAU,GAAG,KAC1C7G,MAAM,CAAC,MAAM,SAAU,UACvB8G,YAAY1I,IACVjK,CAAMwS,K,yBAnBjB,SAAY7R,EAAIsI,GACZvH,QAAQC,IAAI,wBAAwB,IAAIhB,EAAI,IAAIsI,GAChD/I,KAAKJ,MAAMyS,mBAAmB5R,K,wBAElC,SAAWA,EAAIsI,GACXvH,QAAQC,IAAI,wBAAwB,IAAIhB,EAAI,IAAIsI,GAChD/I,KAAKJ,MAAMwZ,WAAW3Y,GACtBT,KAAKJ,MAAM8B,YAAY,K,4BAE3B,WACI1B,KAAKJ,MAAMyS,mBAAmB,Q,yBAWlC,SAAYK,GACR,OAAIA,EAAIC,QAAQ,MAAQ,EACbD,EAAI9H,QAAQ,KAAK,IAAIA,QAAQ,IAAI,KAAKA,QAAQ,IAAI,KAAKA,QAAQ,IAAI,IAEnE8H,EAAI9H,QAAQ,KAAK,IAAIA,QAAQ,IAAI,KAAKA,QAAQ,IAAI,S,8BAGjE,SAAiB7B,EAAMsQ,IACP,GAAPtQ,GAAYsQ,EAAI,GAAY,GAAPtQ,GAAYsQ,EAAI,IAEtCxB,GAAYhN,KAAK9B,K,6BAOzB,SAAgBtI,EAAIsI,EAAMsQ,EAAI1K,EAAEC,EAAEoE,GAI9B,OAFArE,EAAKA,EAAE,GAAI,GACXC,EAAKA,EAAE,GAAI,GACA,GAAP7F,GAAYsQ,EAAI,GAAKxB,GAAY,IAAI9O,GAYxB,GAAPA,GAAYsQ,EAAI,GAAIxB,GAAY,IAAI9O,EATtC,cAAC,GAAD,CACI0I,GAAI9C,EACJ+C,GAAI9C,EACJnP,KAAM4Z,EACNvN,OAAQ,GAERhM,MAAOE,KAAK8S,eAAeE,KAgB5B,O,8BAGf,WACIxR,QAAQC,IAAI,wBAAwB,IAAIzB,KAAKJ,MAAMuK,KAAKrG,Q,oBAE5D,WAAU,IAAD,OAEDwV,EAAM,GACV,QAAgC9H,GAA5BxR,KAAKJ,MAAMgT,gBACX,IAAK,IAAIvH,EAAE,EAAEA,EAAErL,KAAKJ,MAAMgT,gBAAgBtN,OAAO+F,IAC7CiO,EAAMzO,KAAK7K,KAAKJ,MAAMgT,gBAAgBvH,GAAG,IAGjD,IAEIkO,EAAQpS,IACZ,QAAoBqK,GAAjBxR,KAAKJ,MAAMuK,KAAgB,CAE1B,IAAI4O,EAAW/Y,KAAKJ,MAAMuK,KAAKgN,UAAU7R,OACrCyN,EAAa/S,KAAKJ,MAAMmT,WACxByG,EAAU,GACdxZ,KAAKJ,MAAMuK,KAAKgN,UAAU7G,KAAK,WAAYvH,GAAW,IAAD,oBAApBtI,EAAoB,UAAC+Y,EAAU3O,KAAKkI,EAAWtS,GAAKgZ,cACrErC,KAAKC,IAAL,MAAAD,KAAYoC,GAAWpC,KAAKE,IAAL,MAAAF,KAAYoC,GAAnD,IAGIE,EAAiB1Z,KAAKJ,MAAMuK,KAAKgN,UAAU7G,KAAK,WAAYvH,GAAW,IA9J/D4Q,EA8J8D,oBAApBlZ,EAAoB,UAGtE,OACI,8BACI,cAACmZ,GAAA,EAAD,CAASpX,MAAO,qBAAKpC,MAAO,EAAKmG,MAAMiS,aAAaxZ,GAAOkZ,oBAAoBlZ,GAAOgZ,oBAClF6B,gBAAiB,EADL,SAGX,EAAKtT,MAAMiS,aAAa,EAAK5Y,MAAMmT,WAAWtS,GAAK+B,MAAM,MAAM,EAAK5C,MAAMmT,WAAWtS,GAAK+B,QAEvFsX,UAAU,MACVzW,OAAM,EAAKkD,MAAMiS,cAAkB,KAN3C,SASA,8BACI,wBACI/G,GAAI8H,EAAO,EAAKd,SAAS1P,EAAMgQ,EAAS,IAAI,GAC5CrH,GAAI6H,EAAO,EAAKd,SAAS1P,EAAMgQ,EAAS,IAAI,GAC5ChN,EAAK,EAAK2M,YAAY3P,GACtBC,KAAM,EAAK8J,eAAeC,EAAWtS,GAAKuS,mBAE1C5S,MAASuM,OAAOC,OAAO,GAAI5N,GAAO+O,YAnL1C4L,EAmLmElZ,IAAM,EAAKb,MAAMma,gBAlLrGJ,EACO,CAACrI,OAAO,UAAWK,YAAY,EAAG4B,cAAc,IAGhD,MAwK2B9S,GAUb,yBAASgD,GAAM,gBAAgBhD,EAAKyG,OAAS,OAAOC,MAAQ,OAAO6S,oBAAsB,oBAAzF,SACA,uBAAOC,UAAalH,EAAWtS,GAAX,UAA8ByZ,oBAAsB,gBAAgB/S,MAAQ,MAAM/G,MAAOpB,GAAO8I,QAEpH,wBACI2J,GAAI8H,EAAO,EAAKd,SAAS1P,EAAMgQ,EAAS,IAAI,GAC5CrH,GAAI6H,EAAO,EAAKd,SAAS1P,EAAMgQ,EAAS,IAAI,GAE5ChN,EAAG,EAAK2M,YAAY3P,GAAO,EAC3BC,KAAM,qBAAqBvI,EAAI,IAC/BL,MAASpB,GAAO6O,OAChBtB,YAAa,EAAK5C,YAAYrI,KAAK,EAAKb,EAAIsI,GAC5CyD,WAAY,EAAK4F,eAAe9Q,KAAK,GACrCvB,QAAS,EAAK4Y,WAAWrX,KAAK,EAAKb,EAAIsI,IAT9BtI,EAAI,YAerB,sBAAOkO,EAAG4K,EAAO,EAAKd,SAAS1P,EAAMgQ,EAAS,IAAI,GAAG,GACjDnK,EAAG2K,EAAO,EAAKd,SAAS1P,EAAMgQ,EAAS,IAAI,GAAG,EAAKL,YAAY3P,GAAO,GACtE5B,MAAM,KAAKD,OAAO,KAClBiM,GAAG,IACHC,GAAG,IACHhT,MAAO,CAAC+Z,KAAK,UAAWpS,QAAS,MAErC,sBACI4G,EAAG4K,EAAO,EAAKd,SAAS1P,EAAMgQ,EAAS,IAAI,GAC3CnK,EAAG2K,EAAO,EAAKd,SAAS1P,EAAMgQ,EAAS,IAAI,GAAG,EAAKL,YAAY3P,GAAO,EACtEkF,WAAW,SACX7N,MAAOpB,GAAOkT,UAJlB,SAKE,EAAKmB,YAAY,EAAKzT,MAAMmT,WAAWtS,GAAK0K,YAE9C,yBAAS1H,GAAM,eAAehD,EAAKyG,OAAS,OAAOC,MAAQ,OAAO6S,oBAAsB,oBAAxF,SACI,uBAAOC,UCnRpB,yqXDmR8CC,oBAAsB,gBAAgB/S,MAAQ,QAGnF,sBACI/G,MAAOpB,GAAOgP,aAEdW,EAAG4K,EAAQ3K,EAAG2K,EAHlB,SAKK,EAAK3Z,MAAMuK,KAAKrG,OAGrB,mBAAGmW,UAAW,gDAAgD,EAAKra,MAAMuK,KAAKrG,KAAM6J,OAAO,SAA3F,SACI,sBACIxG,MAAM,KACND,OAAO,KACP8B,KAAM,oBAAoBvI,EAAI,IAC9BkO,EAAG4K,IAAW3K,EAAG2K,IACjBnZ,MAASpB,GAAO6O,OAChB9N,QAAS,EAAK6Y,iBAAiBtX,KAAK,GANxC,SAQI,0DAGP,EAAK8Y,iBAAiBrR,EAAMuQ,EAAM3G,QAAQlS,GAAK,KA7E5C,cAAcsI,MAmF1BsR,EAAkBra,KAAKJ,MAAMuK,KAAKgN,UAAU7G,KAAK,WAAYvH,GAAW,IAAD,oBAApBtI,EAAoB,UACvE,OACI,4BACK,EAAKoY,gBAAgBpY,EAAIsI,EAAMuQ,EAAM3G,QAAQlS,GAAK,EAAE8Y,EAAO,EAAKd,SAAS1P,EAAMgQ,EAAS,IAAI,GAAGQ,EAAO,EAAKd,SAAS1P,EAAMgQ,EAAS,IAAI,GAAG,EAAKnZ,MAAMmT,WAAWtS,GAAKuS,oBADlK,kBAAkBjK,MAMlC,OACI,qBAAK5B,MA5GDmT,IA4GepT,OA5GfoT,IA4GJ,SACA,oBAAGhO,UAAU,OAAb,UACI,wBAEImF,GAAI8H,EACJ7H,GAAI6H,EACJxN,EAvTA,IAwTA3L,MAASpB,GAAO8O,mBAEnB4L,EACAW,OAKb,OACI,mBAAG/N,UAAU,a,GApQQvN,aEpD3BC,GAAU,CACZub,UAAU,CAEN3S,cAAc,GACd4S,UAAU,SACV9a,SAAS,GACTuB,WAAW,WAEfwZ,eAAe,CACXlb,QAAQ,OACRG,SAAS,GACT2W,WAAW,QAEfqE,eAAgB,CACZnb,QAAS,OACTsS,cAAe,MACfxP,SAAS,WAETuC,MAAM,KACNpF,SAAU,UACVkF,OAAO,GAKbiW,OAAQ,CACNxT,MAAO,IAEPkH,UAAW,SACXC,UAAW,SACXjP,QAAS,GACTF,OAAS,IAEXyb,sBAAuB,CACrBrb,QAAS,OACTsS,cAAe,UAEjBgJ,sBAAuB,CACrBtb,QAAS,OACTsS,cAAe,OAEjBiJ,aAAc,CACZ3T,MAAO,KAGT4T,aAAc,CACZ5T,MAAO,KAGT6T,YAAa,CAEXxM,MAAM,QACNrN,YAAa,GAGf8Z,QAAQ,CAEN9b,OAAQ,OACRI,QAAQ,SAoFG2b,G,kDA/EX,WAAYtb,GAAQ,IAAD,8BACf,cAAMA,IACDub,aAAe,EAAKA,aAAa7Z,KAAlB,gBAFL,E,gDAInB,WACItB,KAAKJ,MAAMoL,qBAAqB,QAAQ,Q,oBAE5C,WAEI,OAAiC,MAA9BhL,KAAKJ,MAAMiJ,kBAEN,qBAAKzI,MAASpB,GAAO0b,eAArB,SAEI,eAACxa,EAAA,EAAD,CAAOE,MAAQuM,OAAOC,OAAO,GAAI5N,GAAO2b,OAAQ,CAACzT,OAAOkU,OAAOC,YAAY,MAAOlb,UAAW,GAA7F,UACA,sBAAKC,MAAOpB,GAAOub,UAAnB,UACCva,KAAKJ,MAAMuK,KAAKqF,qBAAqBC,MAAMzP,KAAKJ,MAAMiJ,mBAAmB/E,KAC1E,cAACjE,EAAA,EAAD,CAAYO,MAAOpB,GAAOgc,YAAalb,MAAM,UAAU,aAAW,QAAlE,SACI,cAAC,IAAD,CAAWC,QAASC,KAAKmb,aAAa7Z,KAAKtB,aAG/C,sBAAKI,MAASpB,GAAO4b,sBAArB,UACI,qBAAKxa,MAAOpB,GAAOyb,eAAnB,yBACA,qBAAKra,MAAOpB,GAAOic,QAAnB,SACA,4BACI,cAAC,GAAD,CACI9Q,KAAiC,MAA3BnK,KAAKJ,MAAM+Q,eAAqB3Q,KAAKJ,MAAMuK,KAAKqF,qBAAqBC,MAAMzP,KAAKJ,MAAMiJ,mBAAmB7I,KAAKJ,MAAMuK,KAAKqF,qBAAqBC,MAAMzP,KAAKJ,MAAM+Q,gBACrKoC,WAAc/S,KAAKJ,MAAMuK,KAAK3J,YAC9B8a,cAAetb,KAAKJ,MAAM+Q,eAE1B6B,UAAaxS,KAAKJ,MAAM4S,UACxBH,mBAAsBrS,KAAKJ,MAAMyS,mBACjC0H,gBAAmB/Z,KAAKJ,MAAMma,gBAC9BrY,YAAe1B,KAAKJ,MAAM8B,YAC1BkR,gBAAiB5S,KAAKJ,MAAMuK,KAAKyI,gBAAgB5S,KAAKJ,MAAMiJ,mBAC5DuQ,WAAcpZ,KAAKJ,MAAMwZ,oBAMrC,qBAAKlS,OAAO,IAAZ,SAAgB,yBAChB,sBAAK9G,MAASpB,GAAO6b,sBAArB,UACI,sBAAKza,MAASpB,GAAO8b,aAArB,UAGI,qBAAK1a,MAAOpB,GAAOyb,eAAnB,4BACA,cAAC,GAAD,CACQrF,QAAWpV,KAAKJ,MAAMiJ,kBACtBiH,SAAU9P,KAAKJ,MAAMuK,KAAK2F,SAC1B+F,kBAAqB7V,KAAKJ,MAAMuK,KAAK0L,kBACrCN,SAAUvV,KAAKJ,MAAMuK,KAAKqF,qBAAqBC,MAC/C4F,kBAAmBrV,KAAKJ,MAAMuK,KAAKkL,kBACnC3E,sBAAuB1Q,KAAKJ,MAAM2b,0BAClC5K,eAAkB3Q,KAAKJ,MAAM+Q,eAC7BwE,kBAAoBnV,KAAKJ,MAAMuV,uBAG3C,sBAAK/U,MAASpB,GAAO+b,aAArB,UAEI,qBAAK3a,MAAOpB,GAAOyb,eAAnB,wBAGA,cAAC,GAAD,CACI7H,gBAAiB5S,KAAKJ,MAAMuK,KAAKyI,gBAAgB5S,KAAKJ,MAAMiJ,mBAC5DkK,WAAc/S,KAAKJ,MAAMuK,KAAK3J,YAC9B6R,mBAAsBrS,KAAKJ,MAAMyS,mBACjC0H,gBAAmB/Z,KAAKJ,MAAMma,gBAC9BvH,UAAaxS,KAAKJ,MAAM4S,uBAQzC,S,GA5EkBzT,aClE3BC,GAAU,CACZub,UAAU,CAEN3S,cAAc,GACd4S,UAAU,SACV9a,SAAS,GACTuB,WAAW,WAEfwZ,eAAe,CACXlb,QAAQ,OACRG,SAAS,GACT2W,WAAW,QAEfqE,eAAgB,CACZnb,QAAS,OACTsS,cAAe,MACfxP,SAAS,WAETuC,MAAM,KACNpF,SAAU,UACVkF,OAAO,EAGPyC,MAAMiU,OAAOI,WAAa,GAC1BtU,OAAOkU,OAAOC,YAAc,KAGlCV,OAAQ,CACNxT,MAAO,KAEPkH,UAAW,SACXC,UAAW,SACXjP,QAAS,GACTF,OAAS,IAEXyb,sBAAuB,CACrBrb,QAAS,OACTsS,cAAe,UAEjBgJ,sBAAuB,CACrBtb,QAAS,OACTsS,cAAe,OAEjBiJ,aAAc,CACZ3T,MAAO,KAGT4T,aAAc,CACZ5T,MAAO,KAGT6T,YAAa,CAEXxM,MAAM,QACNrN,YAAa,GAGf8Z,QAAQ,CAEN9b,OAAQ,OACRI,QAAQ,SAGRiT,GAAY,GACZ9F,GAAe,GAsGJ+O,G,kDApGX,WAAY7b,GAAQ,IAAD,8BACf,cAAMA,IACDub,aAAe,EAAKA,aAAa7Z,KAAlB,gBACpB,EAAKoa,eAAiB,EAAKA,eAAepa,KAApB,gBAHP,E,kDAmBnB,WACIM,MAAM,6DACDE,MAAK,SAAUC,GAEZ,OAAOA,EAAIC,UACZF,MAAK,SAASG,GAGb,OAFAjC,KAAKJ,MAAM+b,WAAW1Z,GACtBjC,KAAKJ,MAAMgc,WAAW3Z,GACfA,O,gCAInB,SAAmB6W,GAEX9Y,KAAKJ,QAAUkZ,GACb9Y,KAAK6b,gB,gCAGb,WACEra,QAAQC,IAAI,UAAW,IAAKzB,KAAKJ,MAAMuK,KAAK2R,YAAYlH,KAGxD,IAAIsC,EAAU,GACd,IAAK,IAAI3O,KAAKvI,KAAKJ,MAAMuK,KAAK3J,YAE1B0W,EAAQrM,KAAK7K,KAAKJ,MAAMuK,KAAK3J,YAAY+H,GAAGyK,mBAEhD,IAAI+I,EAAW,GACf,IAAK,IAAIxT,KAAKvI,KAAKJ,MAAMuK,KAAKqF,qBAAqBC,MAC/CsM,EAASlR,KAAK7K,KAAKJ,MAAMuK,KAAKqF,qBAAqBC,MAAMlH,GAAGkE,OAIhE+F,GAAY,CAAC4E,KAAKC,IAAL,MAAAD,KAAYF,GAAUE,KAAKE,IAAL,MAAAF,KAAYF,IAC/CxK,GAAe,CAAC0K,KAAKC,IAAL,MAAAD,KAAY2E,GAAW3E,KAAKE,IAAL,MAAAF,KAAY2E,GAAWA,EAASC,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,IAAG,M,0BAEnG,WACIlc,KAAKJ,MAAMuc,cAAc,c,oBAE7B,WAEI,OAA0B,GAAvBnc,KAAKJ,MAAMwc,WAEN,qBAAKhc,MAASpB,GAAO0b,eAArB,SAEI,eAACxa,EAAA,EAAD,CAAOE,MAAQuM,OAAOC,OAAO,GAAI5N,GAAO2b,OAAQ,CAACzT,OAAOkU,OAAOC,YAAY,MAAOlb,UAAW,GAA7F,UACA,sBAAKC,MAAOpB,GAAOub,UAAnB,UACA,sDACA,cAAC1a,EAAA,EAAD,CAAYO,MAAOpB,GAAOgc,YAAalb,MAAM,UAAU,aAAW,QAAlE,SACI,cAAC,IAAD,CAAWC,QAASC,KAAKmb,aAAa7Z,KAAKtB,aAG/C,qBAAKI,MAASpB,GAAO4b,sBAArB,SACI,sBAAKxa,MAAOpB,GAAOic,QAAnB,UACI,wBAAQlb,QAAWC,KAAK0b,eAChBpP,UAAU,6BADlB,qBAEA,wBAAQvM,QAAWC,KAAKmb,aAChB7O,UAAU,4BADlB,2BAKR,qBAAKpF,OAAO,IAAZ,SAAgB,yBAChB,qBAAK9G,MAASpB,GAAO6b,sBAArB,SACI,cAAC,GAAD,CAAO1Q,KAAMnK,KAAKJ,MAAMyc,QAChBlV,MAA2B,EAAnBiU,OAAOI,WAAetU,OAAQkU,OAAOC,YAC7C7I,UAAWA,GACX9F,aAAcA,GACd8D,IAAK,uBAQlB,S,GA/FUzR,a,UCpEvBC,GAAU,CACZ2B,KAAK,CAGDjB,SAAS,IAEbub,QAAQ,CAEJvb,SAAS,KAwDF4c,G,kDAnDX,WAAY1c,GAAQ,uCACVA,G,0CAYV,WAEI,OACI,qBAAKQ,MAAOpB,GAAO2B,KAAnB,SACI,cAAC4b,GAAA,EAAD,CACAC,aAAc,CACVC,SAAU,SACVC,WAAY,QAEhBrZ,KAAMrD,KAAKJ,MAAMyD,KACjBsZ,iBAAkB,IAClBvc,MAAOpB,GAAOic,QAKd9X,QAAS,sBAAM/C,MAAOpB,GAAOic,QAApB,0D,GA9BElc,a,OCbtBmK,SAASC,KAAK7D,OAKjB4D,SAASE,MAJTF,SAASG,cAAc,CACrBC,YAAa,0EAMEJ,SAASkB,WAA5B,IAgBIwS,GAAiB,CACnB9Y,KAAM,gBACNvE,QAAS,UAETiD,MAAM,mBACNqa,YAAY,GAEZC,UAAU,8BAEVC,IAAK,SAAUC,EAAMC,GACDD,EAAKE,QACbC,gBAAkB,CACtBC,aAAcH,IAGtBI,OAAQ,SAAUC,GACd,GAAKA,GAEE,GAAI,UAAUC,KAAKD,EAAQE,WAAaF,EAAQld,MAAMoE,gBAAgBc,OAAS,EAElF,OADAtF,KAAKyd,KAAKC,SAAS1d,KAAKkd,QAAQC,gBAAgBC,aAAc,WACvD,OAHPpd,KAAKyd,KAAKE,YAAY3d,KAAKkd,QAAQC,gBAAgBC,aAAc,UAMrE,OAAO,GAEXQ,OAAQ,WACJ,GAAK5d,KAAKyd,KAAKI,SAAS7d,KAAKkd,QAAQC,gBAAgBC,aAAc,UAK/Dpd,KAAK8d,WAAW,KAAM,CAAC,oBAAqB,CAAC,SAAS,OALoB,CAC1E,IAAMC,EAAU/d,KAAKyd,KAAKO,cAAc,QACxCD,EAAQ3d,MAAMoE,gBAAkB,kBAChCxE,KAAK8d,WAAWC,EAAS,CAAC,oBAAqB,KAAM,SAqL9CE,G,kDAzKb,WAAYre,GAAQ,IAAD,8BACjB,cAAMA,IAEDse,aAAa,EAAKA,aAAa5c,KAAlB,gBAClB,EAAK6c,QAAQ,EAAKA,QAAQ7c,KAAb,gBACb,EAAK8c,KAAO,EAAKA,KAAK9c,KAAV,gBACZ,EAAK+c,qBAAuB,EAAKA,qBAAqB/c,KAA1B,gBAC5B,EAAKgd,aAAe,EAAKA,aAAahd,KAAlB,gBACpB,EAAKiF,MAAQ,CACX0U,QAAQ,EAAKrb,MAAMqb,QACnBsD,YAAYnD,OAAOI,WACnBgD,aAAapD,OAAOC,aAEtB,EAAKhR,IAAMvL,IAAM2f,YAbA,E,gDAenB,SAAaxD,M,qBA8Bb,SAAQ1S,EAAGyU,GACTxb,QAAQC,IAAI,UAAW8G,EAAGyU,K,kCAG9B,SAAqB0B,GACjB1e,KAAKqK,IAAIsU,QAAUD,EACnBld,QAAQC,IAAI,cAAczB,KAAKqK,O,qBAEjC,SAAQzD,EAAOoW,GACbxb,QAAQC,IAAI,gB,oBAEd,SAAOmF,EAAOoW,GACZxb,QAAQC,IAAI,e,gCAEd,SAAmBqX,EAAW8F,EAAWrU,GAgCZ,GAAvBuO,EAAU+F,aAA8C,GAAxB7e,KAAKJ,MAAMif,cAC7C7e,KAAKqK,IAAIsU,QAAQG,YAAY9e,KAAKJ,MAAMmf,eACxC/e,KAAKqK,IAAIsU,QAAQ3B,KAAKgC,e,+BAK5B,WACE5D,OAAO6D,iBAAiB,SAAUjf,KAAKse,gB,0BAEzC,SAAa/V,GACTvI,KAAK+G,SAAS,CAACwX,YAAcnD,OAAOI,WACpBgD,aAAepD,OAAOC,gB,kBAE1C,WAGE,IAwBM6D,EAxBFjE,EAAUjb,KAAKqK,IAAIsU,QAAQQ,UAE3BzW,EAAS1I,KAAKJ,MAAM8I,OACpB0W,EAAUpf,KAAKJ,MAAMyf,WACrBC,EAAStf,KAAKJ,MAAM2f,cAEG,GAAxBvf,KAAKJ,MAAMif,aAGZK,GADIA,EAAY,wDACUE,EAAQ,IAAI1W,EAAO,IAAIuS,EACjDrZ,MAAMsd,KAeNA,GADIA,EAAY,sDACUE,EAAQ,IAAIE,EAAO,IAAI5W,EAAO,IAAIuS,EAC5DzZ,QAAQC,IAAI,iBAAkByd,GAC9Btd,MAAMsd,GACNlf,KAAKJ,MAAM4f,aAAY,EAAM,O,oBAK/B,WACE,IAAIrY,EAASnH,KAAKuG,MAAMgY,YAAY,EAAE,IAAK,KACvCrX,EAAUlH,KAAKuG,MAAMiY,aAAa,EAAG,IAAI,KAC7C,OACE,8BACA,cAAC,KAAD,aACgBrX,MAASA,EACTD,OAAUA,EACViV,cAAiBnc,KAAKJ,MAAMuc,cAC5BsD,WAAc,CACZC,QAAS,CAAC9C,IACV+C,WAAW,CACT,CAAC,OAAQ,QACT,CAAC,OAAQ,SACT,CAAC,SAAU,SAEbC,aAAe5f,KAAKoe,MAE1B3X,SAAYzG,KAAKke,aACjBG,qBAAsBre,KAAKqe,qBAC3BwB,QAAW7f,KAAK6f,QAChBC,OAAU9f,KAAK8f,QAhB3B,gBAiB2B9f,KAAKJ,MAAMuc,sB,GAvKzBpd,a,4BC1DhBmK,SAASC,KAAK7D,OAKf4D,SAASE,MAJTF,SAASG,cAAc,CACrBC,YAAa,0EAMNJ,SAASkB,WAApB,IAoJa2V,G,kDAhJX,WAAYngB,GAAQ,IAAD,8BACf,cAAMA,IACDogB,WAAa,EAAKA,WAAW1e,KAAhB,gBAElB,EAAK2e,aAAe,EAAKA,aAAa3e,KAAlB,gBACpB,EAAKgd,aAAe,EAAKA,aAAahd,KAAlB,gBACpB,EAAK+I,IAAMvL,IAAM2f,YACjB,EAAKlY,MAAQ,CACG0U,QAAQ,EAAKrb,MAAMqb,QACnBsD,YAAYnD,OAAOI,WACvB0E,WAAW,YAVR,E,gDAanB,SAAa3X,GACTvI,KAAK+G,SAAS,CAACwX,YAAcnD,OAAOI,e,+BAExC,WACIJ,OAAO6D,iBAAiB,SAAUjf,KAAKse,gB,wBAU3C,WACIte,KAAKJ,MAAM4f,YAAYxf,KAAKJ,MAAM0f,QAClCtf,KAAKJ,MAAMugB,iBAAiBngB,KAAKJ,MAAMqb,SACvCjb,KAAKJ,MAAM4f,aAAY,EAAMxf,KAAKJ,MAAM0f,U,0BAQ5C,WACItf,KAAKJ,MAAM4f,YAAY,IACvBxf,KAAKJ,MAAM4f,aAAY,EAAOxf,KAAKJ,MAAM0f,U,gCAE7C,SAAmBxG,GACX9Y,KAAKJ,MAAM6D,KAAOqV,EAAUrV,IAC5BzD,KAAK+G,SAAS,CAACkU,QAAQjb,KAAKJ,MAAMqb,Y,0BAG1C,WACI,GAA2B,YAAxBjb,KAAKuG,MAAM2Z,WACV,IAAIA,EAAY,eAEZA,EAAY,WAEpB,IAAIhB,EAAY,qDAAqDlf,KAAKJ,MAAMwf,QAAQ,IAAIpf,KAAKJ,MAAM0f,OACvG9d,QAAQC,IAAI,OAAQyd,GACpBtd,MAAMsd,GACNlf,KAAK+G,SAAS,CAACmZ,iB,4BAEnB,WACI,OAAyB,GAAtBlgB,KAAKJ,MAAMwgB,UACH,KAEApgB,KAAKJ,MAAMwgB,Y,oBAG1B,WAAS,IAAD,OAENphB,EAAU,CACZqhB,SAAS,CACPlZ,MAHYnH,KAGDJ,MAAMQ,MAAMkgB,GAAGnZ,MAAM,GAChCoZ,OAAQ,mCACRC,aAAc,MACdrhB,OAAO,YACPE,QAAS,QAGH,OACI,sBAAKe,MAAOpB,EAAOqhB,SAAnB,UACI,qBAAK/T,UAAU,cAAf,SACI,sBAAKA,UAAU,WAAf,UACI,6BAAKtM,KAAKJ,MAAM8I,SAChB,mBAAGtI,MAAOpB,EAAOic,QAAjB,SAA2Bjb,KAAKJ,MAAMqb,eAG9C,gCACI,eAACpb,EAAA,EAAD,CAAYC,MAAM,UAAU,aAAW,OAAvC,UACKE,KAAKygB,iBACN,cAAC,KAAD,CAAa3gB,MAAOE,KAAKuG,MAAM2Z,WAAYngB,QAASC,KAAKigB,kBAE7D,wBACIlgB,QAASC,KAAKggB,WACdU,SAAU1gB,KAAKJ,MAAMif,YACrBvS,UAAU,yBAHd,oBAOItM,KAAKJ,MAAMif,aAAe7e,KAAKJ,MAAM2f,gBAAgBvf,KAAKJ,MAAM0f,SAAU,wBAC1Evf,QAAS,kBAAI,EAAKH,MAAM+gB,SAAS,EAAK/gB,MAAM0f,SAC5ChT,UAAU,4BAFgE,oBAM5EtM,KAAKJ,MAAMif,aAAiB7e,KAAKJ,MAAM2f,eAAevf,KAAKJ,MAAM0f,QAAS,wBAAQvf,QAAS,kBAAI,EAAK6gB,gBAC1EtU,UAAU,4BADsC,8B,GAvGjFvN,aCfdmK,SAASC,KAAK7D,OAYf4D,SAASE,MAXTF,SAASG,cAAc,CACnBwX,OAAQ,0CACRC,WAAY,6BACZxX,YAAa,uEACbyX,UAAW,aACXC,cAAe,yBACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAMvB,IAAMC,GAAKlY,SAASkB,WA8KLiX,G,kDA1KX,WAAYzhB,GAAO,IAAD,uBACd,cAAMA,IACD2G,MAAM,CACP+a,MAAO,GAEPlC,QAAQ,EAAKxf,MAAMyf,WACnBd,YAAYnD,OAAOI,WACnBgD,aAAapD,OAAOC,aAExB,EAAKkG,aAAa,EAAKA,aAAajgB,KAAlB,gBAClB,EAAK0e,WAAW,EAAKA,WAAW1e,KAAhB,gBAChB,EAAKkgB,QAAQ,EAAKA,QAAQlgB,KAAb,gBACb,EAAKmgB,gBAAgB,EAAKA,gBAAgBngB,KAArB,gBACrB,EAAKgd,aAAe,EAAKA,aAAahd,KAAlB,gBACpB,IACIgS,EAAO,IADG,EAAK/M,MAAM6Y,QAErBzd,EAAG,eACPyf,GAAG/W,IAAIiJ,GAAMhJ,GAAG,SAAS,SAASC,GAK9B,GAJA5I,EAAI4E,MAAM+a,MAAQI,KAAKC,MAAMD,KAAKE,UAAUrX,EAASI,QAIhC,MAAjBhJ,EAAI4E,MAAM+a,YAAgC9P,GAAjB7P,EAAI4E,MAAM+a,MAAkB,CAIrD,IAHA,IAAI3M,EAAOhI,OAAOgI,KAAKhT,EAAI4E,MAAM+a,OAC7BA,EAAQ,GACRjW,EAAG,EACDA,EAAEsJ,EAAKrP,QAAO,CAChB,IAAIga,EAAS3K,EAAKtJ,GACdwW,EAAclgB,EAAI4E,MAAM+a,MAAMhC,GAAQuC,YACtCC,EAAQngB,EAAI4E,MAAM+a,MAAMhC,GAAQwC,MAEhCC,EAAO,CAACzC,OAAOA,EAAQuC,YAAYA,EAAanZ,OADvC/G,EAAI4E,MAAM+a,MAAMhC,GAAQ5W,OAC+BoZ,MAAMA,GAC1ER,EAAMzW,KAAKkX,GACX1W,GAAM,EAEV7J,QAAQC,IAAI,WAAY6f,GACxBA,EAAMU,MAAK,SAAS/F,EAAGC,GACnB,OAAOA,EAAE4F,MAAM7F,EAAE6F,SAGzBngB,EAAI4E,MAAM+a,MAAQA,EAClB3f,EAAIka,iBAOM,EAAKtV,MAAMgY,YACV,EAAKhY,MAAMiY,aAjDZ,S,qDAsDlB,WACIpD,OAAO6D,iBAAiB,SAAUjf,KAAKse,gB,0BAE3C,SAAa/V,GACTvI,KAAK+G,SAAS,CAACwX,YAAcnD,OAAOI,WACpBgD,aAAepD,OAAOC,gB,qBAE1C,SAAQJ,GACJ,IAAIqG,EAAQthB,KAAKuG,MAAM+a,MACvBA,EAAMzW,KAAK,CAACpH,GAAG6d,EAAMhc,OAAO,EAAG2V,QAASA,EAASmF,UAAW,IAC5DpgB,KAAK+G,SAAS,CAACua,Y,0BAEnB,SAAahC,GACT,IAAIJ,EAAY,uDAAuDlf,KAAKuG,MAAM6Y,QAAQ,IAAIE,EAC9F9d,QAAQC,IAAI,kBAAkByd,GAC9Btd,MAAMsd,K,wBAEV,SAAWI,GACP9d,QAAQC,IAAI,aAAa6d,K,wBAG7B,SAAWA,GACP9d,QAAQC,IAAI,aAAc6d,K,6BAE9B,SAAgBA,EAAO2C,GACnB,IAAIF,EAAO/hB,KAAKuG,MAAM+a,MAAM9b,QAAO,SAAA0c,GAAC,OAAEA,EAAEze,IAAI6b,KAExCyC,EAAK,GAAG3B,UADD,OAAR6B,EACmBF,EAAK,GAAG3B,UAAU,EAGlB2B,EAAK,GAAG3B,UAAU,EAIxC,IAAIkB,EAAOS,EAAKI,OAAQniB,KAAKuG,MAAM+a,MAAM9b,QAAO,SAAA0c,GAAC,OAAEA,EAAEze,KAAK6b,MAE1DgC,EAAMU,MAAK,SAAS/F,EAAGC,GACnB,OAAOA,EAAEkE,UAAUnE,EAAEmE,aAEzBpgB,KAAK+G,SAAS,CAACua,Y,gCAkBnB,SAAmBxI,EAAU8F,GAErB5e,KAAKJ,MAAMwiB,iBAAmBtJ,EAAUsJ,gBACtCpiB,KAAKwhB,QAAQxhB,KAAKJ,MAAMwiB,gBAE1BpiB,KAAKuG,QAASqY,GACdpd,QAAQC,IAAI,gBAAiBzB,KAAKuG,S,oBAG1C,WAAU,IAAD,OACD5E,EAAM3B,KACNhB,EAAO,GAoBX,OAlBIA,EADqB,KAArBgB,KAAKJ,MAAMyiB,SACD,CACN/B,GAAI,CAEAhS,UAAW,SACXnH,MAAMxF,EAAI/B,MAAM0iB,WAChBpb,OAAQvF,EAAI4E,MAAMiY,aAAa,EAAE,MAI/B,CACN8B,GAAI,CAEAhS,UAAW,SACXnH,MAAMxF,EAAI4E,MAAMgY,YAAY,EAC5BrX,OAAQvF,EAAI4E,MAAMiY,aAAa,EAAI7c,EAAI4E,MAAMiY,aAAa,IAIjD,MAAlBxe,KAAKuG,MAAM+a,MAEN,qBAAKhV,UAAU,WAAWlM,MAAOpB,EAAOshB,GAAxC,SACKtgB,KAAKuG,MAAM+a,MAAMhR,KAAI,SAAAyR,GAAI,OACrB,cAAC,GAAD,CAAM9G,QAAS8G,EAAKF,YAEbvC,OAAUyC,EAAKzC,OACf5W,OAAUqZ,EAAKrZ,OACfiY,SAAU,EAAKY,aACfgB,OAAQ,EAAKvC,WACbwC,OAAQ,EAAKC,WACbhB,gBAAiB,EAAKA,gBACtBrB,UAAW2B,EAAKD,MAChBtC,YAAa,EAAK5f,MAAM4f,YACxBJ,QAAW,EAAK7Y,MAAM6Y,QACtBe,iBAAoB,EAAKvgB,MAAMugB,iBAC/BtB,YAAe,EAAKjf,MAAMif,YAC1BU,cAAiB,EAAK3f,MAAM2f,cAC5Bnf,MAASpB,GAbF+iB,EAAKzC,aAkBzB,S,GAtKCvgB,aCTdC,GAAU,CACZM,UAAW,CAEPC,QAAS,OACTsS,cAAe,MAEfrS,SAAU,OAGVmI,WAAY,GACZsL,YAAa,GAEbjS,WAAY,IAGhBid,OAAQ,CAGJ5b,SAAU,QACVqgB,OAAO,GACP9d,MAAM,IAEV+d,UAAW,IAUXnQ,GAAY,GACZ9F,GAAe,GAqQJkW,G,kDAnQX,WAAYhjB,GAAQ,IAAD,8BACf,cAAMA,IACD2G,MAAQ,CACT4F,kBAAmB,KACnB4N,gBAAiB,KACjB8I,eAAgB,GAChBha,kBAAmB,KACnB8H,eAAgB,KAChBmS,gBAAiB,KACjB7H,QAAQ,CACJ,KAEJmH,gBAAe,EACfhG,YAAY,EACZyC,aAAY,EACZU,cAAc,GACdR,cAAc,IAElB,EAAKoB,iBAAmB,EAAKA,iBAAiB7e,KAAtB,gBACxB,EAAKgK,qBAAuB,EAAKA,qBAAqBhK,KAA1B,gBAC5B,EAAK6a,cAAgB,EAAKA,cAAc7a,KAAnB,gBACrB,EAAKyhB,kBAAoB,EAAKA,kBAAkBzhB,KAAvB,gBACzB,EAAK+Q,mBAAqB,EAAKA,mBAAmB/Q,KAAxB,gBAC1B,EAAK0hB,kBAAoB,EAAKA,kBAAkB1hB,KAAvB,gBACzB,EAAK0J,qBAAuB,EAAKA,qBAAqB1J,KAA1B,gBAC5B,EAAK6T,kBAAoB,EAAKA,kBAAkB7T,KAAvB,gBACzB,EAAK0K,kBAAoB,EAAKA,kBAAkB1K,KAAvB,gBAEzB,EAAKsP,kBAAoB,EAAKA,kBAAkBtP,KAAvB,gBACzB,EAAKke,YAAc,EAAKA,YAAYle,KAAjB,gBA7BJ,E,oDA+BnB,SAAiB2Z,GACbjb,KAAK+G,SAAS,CAACgY,cAAc9D,M,yBAEjC,SAAYgI,EAAM3D,GACdtf,KAAK+G,SAAS,CAAC8X,YAAYoE,EACX1D,cAAcD,M,gCAElC,WACI9d,QAAQC,IAAI,UAAW,IAAKzB,KAAKJ,MAAMuK,KAAK2R,YAAYlH,KAGxD,IAAIsC,EAAU,GACd,IAAK,IAAI3O,KAAKvI,KAAKJ,MAAMuK,KAAK3J,YAE1B0W,EAAQrM,KAAK7K,KAAKJ,MAAMuK,KAAK3J,YAAY+H,GAAGyK,mBAEhD,IAAI+I,EAAW,GACf,IAAK,IAAIxT,KAAKvI,KAAKJ,MAAMuK,KAAKqF,qBAAqBC,MAC/CsM,EAASlR,KAAK7K,KAAKJ,MAAMuK,KAAKqF,qBAAqBC,MAAMlH,GAAGkE,OAIhE+F,GAAY,CAAC4E,KAAKC,IAAL,MAAAD,KAAYF,GAAUE,KAAKE,IAAL,MAAAF,KAAYF,IAC/CxK,GAAe,CAAC0K,KAAKC,IAAL,MAAAD,KAAY2E,GAAW3E,KAAKE,IAAL,MAAAF,KAAY2E,GAAWA,EAASC,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,IAAG,M,kCAEnG,SAAqB7Q,EAAG6X,GAGpB1hB,QAAQC,IAAI,UAAWyhB,GACvB1hB,QAAQC,IAAI,OAAO4J,GACnBrL,KAAK+G,SAAS,CACVoF,kBAAmBd,EACnB8X,eAAgBD,IAEpBljB,KAAK+G,SAAS,CACVkU,QAASiI,IAGbljB,KAAKJ,MAAMwjB,4BAA4B/X,K,+BAI3C,WACIrL,KAAK+G,SAAS,CAACkU,QAAQ,MACvBzZ,QAAQC,IAAI,uB,+BAGhB,SAAkByhB,GAIdljB,KAAK+G,SAAS,CACVoc,eAAgBD,IAEpB1hB,QAAQC,IAAI,uBACZD,QAAQC,IAAIyhB,K,gCAIhB,SAAmBziB,GACfT,KAAK+G,SAAS,CACVgT,gBAAiBtZ,M,+BAGzB,SAAkBwhB,EAAQlZ,GACR,OAAVkZ,EACiD,GAA7CjiB,KAAKuG,MAAMsc,eAAera,SAASO,IACnC/I,KAAK+G,SAAS,CACV8b,eAAe,GAAD,oBAAM7iB,KAAKuG,MAAMsc,gBAAjB,CAAiC9Z,MAItC,UAAVkZ,EACPjiB,KAAK+G,SAAS,CACV8b,eAAgB7iB,KAAKuG,MAAMsc,eAAerd,QAAO,SAAAmF,GAAG,OAAIA,IAAQ5B,OAEnD,SAAVkZ,GACPjiB,KAAK+G,SAAS,CACV8b,eAAgB,O,kCAI5B,SAAqBZ,EAAQlZ,GACX,OAAVkZ,EACAjiB,KAAK+G,SAAS,CACV8B,kBAAmBE,IAEN,SAAVkZ,IACPzgB,QAAQC,IAAI,8BACZzB,KAAK+G,SAAS,CACV8B,kBAAmB,KACnB8H,eAAgB,U,2BAI5B,SAAcsR,GACI,OAAVA,EAWAjiB,KAAK+G,SAAS,CAACqV,YAAY,IAEX,YAAT6F,IACPzgB,QAAQC,IAAI,2BACZzB,KAAK+G,SAAS,CAACqV,YAAW,O,+BAGlC,SAAkBrT,GACd/I,KAAK+G,SAAS,CACV4J,eAAgB5H,M,+BAIxB,SAAkBkS,GACdjb,KAAK+G,SAAS,CACVqb,eAAgBnH,M,gCAGxB,SAAmB2D,GACZ5e,KAAKuG,MAAM4F,oBAAoByS,EAAUzS,mBACxC3K,QAAQC,IAAI,sBAAsBmd,EAAUzS,kBAAkB,QAASnM,KAAKuG,MAAM4F,qB,oBAI1F,WACI3K,QAAQC,IAAIzB,KAAKJ,MAAMuK,KAAKkZ,2BAC5B,IAAI9H,EAA0D,MAA9Bvb,KAAKuG,MAAMwT,gBAA0B,GAAK/Z,KAAKJ,MAAMuK,KAAKkZ,0BAA0BrjB,KAAKuG,MAAM4F,mBAAmBnM,KAAKuG,MAAMwT,iBAG7J,OADAvY,QAAQC,IAAKzB,KAAKJ,MAAMuK,MAEpB,sBAAK/J,MAAOpB,GAAOM,UAAnB,UAGI,sBAAK6H,MAAOiU,OAAOI,WAAa,GAAItU,OAAQkU,OAAOC,YAAc,IAAjE,UACI,cAAChb,EAAA,EAAD,CAAYC,QAAQ,WAAWC,UAAU,KAAzC,SACKP,KAAKJ,MAAMuK,KAAK2R,YAAYlH,MAEjC,cAAC,GAAD,CAAQ/L,kBAAmB7I,KAAKuG,MAAMsC,kBAClC8H,eAA6C,MAA7B3Q,KAAKuG,MAAMoK,eAAyB3Q,KAAKuG,MAAMsC,kBAAoB7I,KAAKuG,MAAMoK,eAC9FjE,aAAcA,GACdvC,KAAMnK,KAAKJ,MAAMuK,KAAKqF,qBAAqBC,QAG/C,cAAC,GAAD,CAAOtF,KAAMnK,KAAKJ,MAAMuK,KACpBgC,kBAAmBnM,KAAKJ,MAAM0jB,yBAC9BhY,qBAAsBtL,KAAKsL,qBAC3BU,kBAAqBhM,KAAKgM,kBAC1BuX,WAAY,SAAC9jB,GAAD,OAAUG,MAAM2jB,WAAW9jB,IACvC0H,MAAOiU,OAAOI,WAAW,EAAI,GAAItU,OAAQkU,OAAOC,YAAc,IAC9D7I,UAAWA,GACX9F,aAAcA,GACd2F,mBAAoBrS,KAAKqS,mBACzB0H,gBAAiB/Z,KAAKuG,MAAMwT,gBAC5BlR,kBAAmB7I,KAAKuG,MAAMsC,kBAC9BmC,qBAAsBhL,KAAKgL,qBAC3B2F,eAAgB3Q,KAAKuG,MAAMoK,eAC3BC,kBAAmB5Q,KAAK4Q,kBACxB0S,yBAA4BtjB,KAAKJ,MAAM0jB,yBACvClU,sBAAyBpP,KAAKJ,MAAMwP,sBACpCC,mBAAsBrP,KAAKJ,MAAMyP,mBACjCc,sBAAyBnQ,KAAKJ,MAAMuQ,sBACpCD,yBAA4BlQ,KAAKJ,MAAMsQ,8BAI/C,gCACI,8BACA,cAAC,GAAD,CACQiQ,iBAAoBngB,KAAKmgB,iBACzBiC,eAAkBpiB,KAAKuG,MAAM6b,eAC7B/C,WAAcrf,KAAKJ,MAAMuK,KAAK2R,YAAYlH,IAC1C4K,YAAexf,KAAKwf,YACpBD,cAAiBvf,KAAKuG,MAAMgZ,cAC5BV,YAAe7e,KAAKuG,MAAMsY,gBAElC,qBAAKze,MAASpB,GAAOif,OAArB,SACA,cAAC,GAAD,CAAQhD,QAAWjb,KAAKuG,MAAM0U,QACtBvS,OAAQ1I,KAAKJ,MAAM8I,OACnByT,cAAiBnc,KAAKmc,cACtBR,WAAc3b,KAAKJ,MAAM+b,WACzB0D,WAAcrf,KAAKJ,MAAMuK,KAAK2R,YAAYlH,IAC1CmO,kBAAqB/iB,KAAK+iB,kBAC1BvD,YAAexf,KAAKwf,YACpBX,YAAe7e,KAAKuG,MAAMsY,YAC1BU,cAAiBvf,KAAKuG,MAAMgZ,cAC5BR,cAAe/e,KAAKuG,MAAMwY,qBAOtC,cAAC,GAAD,CACI5U,KAAMnK,KAAKJ,MAAMuK,KACjBtB,kBAAmB7I,KAAKuG,MAAMsC,kBAC9BmC,qBAAsBhL,KAAKgL,qBAC3BwH,UAAWA,GACXH,mBAAoBrS,KAAKqS,mBACzBzB,kBAAmB5Q,KAAK4Q,kBACxBmJ,gBAAiB/Z,KAAKuG,MAAMwT,gBAC5BwB,0BAA2BA,EAC3B5K,eAAgB3Q,KAAKuG,MAAMoK,eAC3BwE,kBAAmBnV,KAAKmV,kBACxBzT,YAAe1B,KAAKJ,MAAM8B,YAC1BqhB,kBAAqB/iB,KAAK+iB,kBAC1B3J,WAAcpZ,KAAKJ,MAAMwZ,aAE7B,cAAC,GAAD,CACIjP,KAAMnK,KAAKJ,MAAMuK,KACjBiS,WAAYpc,KAAKuG,MAAM6V,WACvBD,cAAenc,KAAKmc,cACpBP,WAAc5b,KAAKJ,MAAMgc,WACzBD,WAAc3b,KAAKJ,MAAM+b,WACzBU,QAAWrc,KAAKJ,MAAMyc,UAE1B,cAAC,GAAD,CAAchZ,KAAsC,MAAhCrD,KAAKuG,MAAMsC,2B,GA9PhB9J,a,8BC5BzBC,GAAU,CACZM,UAAW,CAEPC,QAAS,OACTsS,cAAe,MAEfrS,SAAU,OAGVmI,WAAY,GACZsL,YAAa,GAEbjS,WAAY,IAGhBid,OAAQ,CAGJ5b,SAAU,QACVqgB,OAAO,GACP9d,MAAM,IAEV+d,UAAW,GASXjI,eAAgB,CACZnb,QAAS,OACTsS,cAAe,MACfxP,SAAS,WAETuC,MAAM,KACNpF,SAAU,UACVkF,OAAO,IAKX8N,GAAY,GACZ9F,GAAe,GAwQJkW,G,kDAtQX,WAAYhjB,GAAQ,IAAD,8BACf,cAAMA,IACD2G,MAAQ,CACT4F,kBAAmB,KACnB4N,gBAAiB,KACjB8I,eAAgB,GAChBha,kBAAmB,KACnB8H,eAAgB,KAChBmS,gBAAiB,KACjB7H,QAAQ,CACJ,KAEJmH,gBAAe,EACfhG,YAAY,EACZyC,aAAY,EACZU,cAAc,GACdR,cAAc,IAElB,EAAKoB,iBAAmB,EAAKA,iBAAiB7e,KAAtB,gBACxB,EAAKgK,qBAAuB,EAAKA,qBAAqBhK,KAA1B,gBAC5B,EAAK6a,cAAgB,EAAKA,cAAc7a,KAAnB,gBACrB,EAAKyhB,kBAAoB,EAAKA,kBAAkBzhB,KAAvB,gBACzB,EAAK+Q,mBAAqB,EAAKA,mBAAmB/Q,KAAxB,gBAC1B,EAAK0hB,kBAAoB,EAAKA,kBAAkB1hB,KAAvB,gBACzB,EAAK0J,qBAAuB,EAAKA,qBAAqB1J,KAA1B,gBAC5B,EAAK6T,kBAAoB,EAAKA,kBAAkB7T,KAAvB,gBACzB,EAAK0K,kBAAoB,EAAKA,kBAAkB1K,KAAvB,gBAEzB,EAAKsP,kBAAoB,EAAKA,kBAAkBtP,KAAvB,gBACzB,EAAKke,YAAc,EAAKA,YAAYle,KAAjB,gBA7BJ,E,oDA+BnB,SAAiB2Z,GACbjb,KAAK+G,SAAS,CAACgY,cAAc9D,M,yBAEjC,SAAYgI,EAAM3D,GACdtf,KAAK+G,SAAS,CAAC8X,YAAYoE,EACX1D,cAAcD,M,gCAElC,WACI9d,QAAQC,IAAI,UAAW,IAAKzB,KAAKJ,MAAMuK,KAAK2R,YAAYlH,KAGxD,IAAIsC,EAAU,GACd,IAAK,IAAI3O,KAAKvI,KAAKJ,MAAMuK,KAAK3J,YAE1B0W,EAAQrM,KAAK7K,KAAKJ,MAAMuK,KAAK3J,YAAY+H,GAAGyK,mBAEhD,IAAI+I,EAAW,GACf,IAAK,IAAIxT,KAAKvI,KAAKJ,MAAMuK,KAAKqF,qBAAqBC,MAC/CsM,EAASlR,KAAK7K,KAAKJ,MAAMuK,KAAKqF,qBAAqBC,MAAMlH,GAAGkE,OAIhE+F,GAAY,CAAC4E,KAAKC,IAAL,MAAAD,KAAYF,GAAUE,KAAKE,IAAL,MAAAF,KAAYF,IAC/CxK,GAAe,CAAC0K,KAAKC,IAAL,MAAAD,KAAY2E,GAAW3E,KAAKE,IAAL,MAAAF,KAAY2E,GAAWA,EAASC,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,IAAG,M,kCAEnG,SAAqB7Q,EAAG6X,GAGpB1hB,QAAQC,IAAI,UAAWyhB,GACvB1hB,QAAQC,IAAI,OAAO4J,GACnBrL,KAAK+G,SAAS,CACVoF,kBAAmBd,EACnB8X,eAAgBD,IAEpBljB,KAAK+G,SAAS,CACVkU,QAASiI,IAEbljB,KAAKJ,MAAMwjB,4BAA4B/X,K,+BAI3C,WACIrL,KAAK+G,SAAS,CAACkU,QAAQ,MACvBzZ,QAAQC,IAAI,uB,+BAGhB,SAAkByhB,GAIdljB,KAAK+G,SAAS,CACVoc,eAAgBD,IAEpB1hB,QAAQC,IAAI,uBACZD,QAAQC,IAAIyhB,K,gCAIhB,SAAmBziB,GACfT,KAAK+G,SAAS,CACVgT,gBAAiBtZ,M,+BAGzB,SAAkBwhB,EAAQlZ,GACR,OAAVkZ,EACiD,GAA7CjiB,KAAKuG,MAAMsc,eAAera,SAASO,IACnC/I,KAAK+G,SAAS,CACV8b,eAAe,GAAD,oBAAM7iB,KAAKuG,MAAMsc,gBAAjB,CAAiC9Z,MAItC,UAAVkZ,EACPjiB,KAAK+G,SAAS,CACV8b,eAAgB7iB,KAAKuG,MAAMsc,eAAerd,QAAO,SAAAmF,GAAG,OAAIA,IAAQ5B,OAEnD,SAAVkZ,GACPjiB,KAAK+G,SAAS,CACV8b,eAAgB,O,kCAI5B,SAAqBZ,EAAQlZ,GACX,OAAVkZ,EACAjiB,KAAK+G,SAAS,CACV8B,kBAAmBE,IAEN,SAAVkZ,IACPzgB,QAAQC,IAAI,8BACZzB,KAAK+G,SAAS,CACV8B,kBAAmB,KACnB8H,eAAgB,U,2BAI5B,SAAcsR,GACI,OAAVA,EAWAjiB,KAAK+G,SAAS,CAACqV,YAAY,IAEX,YAAT6F,IACPzgB,QAAQC,IAAI,2BACZzB,KAAK+G,SAAS,CAACqV,YAAW,O,+BAGlC,SAAkBrT,GACd/I,KAAK+G,SAAS,CACV4J,eAAgB5H,M,+BAIxB,SAAkBkS,GACdjb,KAAK+G,SAAS,CACVqb,eAAgBnH,M,gCAGxB,SAAmB2D,GACZ5e,KAAKuG,MAAM4F,oBAAoByS,EAAUzS,mBACxC3K,QAAQC,IAAI,sBAAsBmd,EAAUzS,kBAAkB,QAASnM,KAAKuG,MAAM4F,qB,oBAI1F,WAAU,IAAD,OACL3K,QAAQC,IAAIzB,KAAKJ,MAAMuK,KAAKkZ,2BAC5B,IAAI9H,EAA0D,MAA9Bvb,KAAKuG,MAAMwT,gBAA0B,GAAK/Z,KAAKJ,MAAMuK,KAAKkZ,0BAA0BrjB,KAAKuG,MAAM4F,mBAAmBnM,KAAKuG,MAAMwT,iBAG7J,OADAvY,QAAQC,IAAKzB,KAAKJ,MAAMuK,MAEpB,sBAAK/J,MAAOpB,GAAOM,UAAnB,UAGI,sBAAK6H,MAAOiU,OAAOI,WAAW,EAAGtU,OAAQkU,OAAOC,YAAhD,UACI,cAAChb,EAAA,EAAD,CAAYC,QAAQ,WAAWC,UAAU,KAAzC,SACKP,KAAKJ,MAAMuK,KAAK2R,YAAYlH,MAIjC,cAAC,GAAD,CAAOzK,KAAMnK,KAAKJ,MAAMuK,KACpBgC,kBAAmBnM,KAAKJ,MAAM0jB,yBAC9BhY,qBAAsBtL,KAAKsL,qBAC3BU,kBAAqBhM,KAAKgM,kBAC1BuX,WAAY,SAAC9jB,GAAD,OAAUG,MAAM2jB,WAAW9jB,IACvC0H,MAAOiU,OAAOI,WAAW,EAAI,GAAItU,OAASkU,OAAOC,YAAY,EAAK,IAClE7I,UAAWA,GACX9F,aAAcA,GACd2F,mBAAoBrS,KAAKqS,mBACzB0H,gBAAiB/Z,KAAKuG,MAAMwT,gBAC5BlR,kBAAmB7I,KAAKuG,MAAMsC,kBAC9BmC,qBAAsBhL,KAAKgL,qBAC3B2F,eAAgB3Q,KAAKuG,MAAMoK,eAE3B2S,yBAA4BtjB,KAAKJ,MAAM0jB,yBACvClU,sBAAyBpP,KAAKJ,MAAMwP,sBACpCC,mBAAsBrP,KAAKJ,MAAMyP,mBACjCuB,kBAAmB5Q,KAAK4Q,kBACxBT,sBAAyBnQ,KAAKJ,MAAMuQ,sBACpCD,yBAA4BlQ,KAAKJ,MAAMsQ,2BAE3C,cAAC,GAAD,CACQmS,SAAU,IACVC,WAAYlH,OAAOI,WAAW,EAAI,GAClC2E,iBAAoBngB,KAAKmgB,iBACzBiC,eAAkBpiB,KAAKuG,MAAM6b,eAC7B/C,WAAcrf,KAAKJ,MAAMuK,KAAK2R,YAAYlH,IAC1C4K,YAAexf,KAAKwf,YACpBD,cAAiBvf,KAAKuG,MAAMgZ,cAC5BV,YAAe7e,KAAKuG,MAAMsY,iBAGtC,gCACI,qBAAK1X,MAAOiU,OAAOI,WAAYtU,OAAQkU,OAAOC,YAAc,IAA5D,SACI,cAAC,KAAD,CAAgBmI,IAAK,mCAAmCxjB,KAAKJ,MAAM6jB,QACnDtc,MAAOiU,OAAOI,WAAW,EAAG,GAC5BtU,OAAQkU,OAAOC,YAAY,EAAG,IAC9BqI,UAAY,MAGhC,gCACI,cAAC,GAAD,CAAQzI,QAAWjb,KAAKuG,MAAM0U,QACtBkB,cAAiBnc,KAAKmc,cACtBR,WAAc3b,KAAKJ,MAAM+b,WACzB0D,WAAcrf,KAAKJ,MAAMuK,KAAK2R,YAAYlH,IAC1CmO,kBAAqB/iB,KAAK+iB,kBAC1BvD,YAAexf,KAAKwf,YACpB9W,OAAQ1I,KAAKJ,MAAM8I,OACnBmW,YAAe7e,KAAKuG,MAAMsY,YAC1BU,cAAiBvf,KAAKuG,MAAMgZ,cAC5BR,cAAe/e,KAAKuG,MAAMwY,gBAElC,wBAAQhf,QAAS,kBAAI,EAAKH,MAAM8B,YAAY,MACpC4K,UAAU,6BADlB,8BAKR,cAAC,GAAD,CACInC,KAAMnK,KAAKJ,MAAMuK,KACjBtB,kBAAmB7I,KAAKuG,MAAMsC,kBAC9BmC,qBAAsBhL,KAAKgL,qBAC3BwH,UAAWA,GACXH,mBAAoBrS,KAAKqS,mBACzBzB,kBAAmB5Q,KAAK4Q,kBACxBmJ,gBAAiB/Z,KAAKuG,MAAMwT,gBAC5BwB,0BAA2BA,EAC3B5K,eAAgB3Q,KAAKuG,MAAMoK,eAC3BwE,kBAAmBnV,KAAKmV,kBACxBzT,YAAe1B,KAAKJ,MAAM8B,YAC1BqhB,kBAAqB/iB,KAAK+iB,kBAC1B3J,WAAcpZ,KAAKJ,MAAMwZ,aAE7B,cAAC,GAAD,CACIjP,KAAMnK,KAAKJ,MAAMuK,KACjBiS,WAAYpc,KAAKuG,MAAM6V,WACvBD,cAAenc,KAAKmc,cACpBP,WAAc5b,KAAKJ,MAAMgc,WACzBD,WAAc3b,KAAKJ,MAAM+b,WACzBU,QAAWrc,KAAKJ,MAAMyc,iB,GA/PXtd,a,mBC/DzBC,GAAS,CACb2B,KAAM,CAEJtB,QAAS,GACTF,OAAO,KAmBIwkB,oBAAW3kB,GAAX2kB,EAff,SAA6B/jB,GAE3B,OADoBA,EAAZgkB,QAEN,sBAAKxjB,MAAOpB,GAAO2B,KAAnB,UACE,cAACkjB,GAAA,EAAD,CAAgBvjB,QAAQ,cAAc2D,MAAOrE,EAAMqE,QACnD,6BCLAjF,GAAU,CACZ2B,KAAM,CAEJtB,QAAS,EACTF,OAAS,GAKXG,UAAW,CAGPE,SAAU,QAEd+E,MAAO,CACLpF,OAAQ,IAEV2kB,gBAAgB,CACZ9iB,WAAW,OACXG,YAAY,QAEhB4iB,OAAO,CACHrkB,SAAS,GACTL,QAAQ,GACRF,OAAO,GACPwF,KAAK,QAyJEqf,G,kDAnJX,WAAYpkB,GAAQ,IAAD,8BACf,cAAMA,IACD2G,MAAM,CACP0d,eAAgB,EAChBC,eAAe,EACfC,kBAAmB,EACnBC,cAAgB,EAChBjhB,QAAQ,sCAEZ,EAAKiF,YAAc,EAAKA,YAAY9G,KAAjB,gBATJ,E,sDAWnB,WAAqB,IAAD,OAEhBtB,KAAKqkB,SAAWC,aAAY,kBAAM,EAAKC,eAAc,KACrDvkB,KAAKqkB,SAAWC,aAAY,kBAAM,EAAKE,iBAAgB,KACvD,IAAI1hB,EAAU9C,KAAKJ,MAAMuI,cACrBxG,EAAM3B,KAqCV4B,MAAM,oDAAoDkB,GACzDhB,MAAK,SAAUC,GACZ,OAAOA,EAAIC,UACZF,MAAK,SAASG,GAMb,OAJAN,EAAIoF,SAAS,CACTod,kBAAmB,EACnBC,cAAe,MAEZniB,O,kCAGf,WACIwiB,cAAczkB,KAAKqkB,Y,wBAGvB,WACIrkB,KAAK+G,UAAS,SAAC6X,GAAD,MAAgB,CAC5BqF,eAAgBrF,EAAUqF,eAAiB,MAGf,KAA3BjkB,KAAKuG,MAAM0d,eACVjkB,KAAK+G,UAAS,SAAC6X,GAAD,MAAgB,CAC1Bzb,QAAS,mDAGkB,KAA3BnD,KAAKuG,MAAM0d,eACfjkB,KAAK+G,UAAS,SAAC6X,GAAD,MAAgB,CAC1Bzb,QAAS,oDAGkB,KAA3BnD,KAAKuG,MAAM0d,eACfjkB,KAAK+G,UAAS,SAAC6X,GAAD,MAAgB,CAC1Bzb,QAAS,wCAGkB,KAA3BnD,KAAKuG,MAAM0d,eACfjkB,KAAK+G,UAAS,SAAC6X,GAAD,MAAgB,CAC1Bzb,QAAS,+CAGkB,KAA3BnD,KAAKuG,MAAM0d,gBACfjkB,KAAK+G,UAAS,SAAC6X,GAAD,MAAgB,CAC1Bzb,QAAS,sC,0BAInB,WACKnD,KAAKuG,MAAM6d,cAAgB,GAC1BpkB,KAAK+G,UAAS,SAAC6X,GAAD,MAAgB,CAC1BwF,cAAexF,EAAUwF,cAAgB,MAGzCpkB,KAAKuG,MAAM6d,cAAgB,IAC/BpkB,KAAK+G,UAAS,SAAC6X,GAAD,MAAgB,CAC1BwF,cAAexF,EAAUwF,cAAgB,Q,yBAKrD,WACI,IAAIziB,EAAM3B,KACV4B,MAAM,qDACLE,MAAK,SAAUC,GAEZ,OAAOA,EAAIC,UACZF,MAAK,SAASG,GAGb,OADAN,EAAI/B,MAAM8B,YAAY,EAAEO,GACjBA,O,oBAIf,WAEI,OACI,cAAC/B,EAAA,EAAD,CAAOE,MAAOpB,GAAO2B,KAAMR,UAAW,EAAtC,SACA,sBAAKC,MAAOpB,GAAOM,UAAnB,UAEE,cAAC,GAAD,CAAqB2E,MAASjE,KAAKuG,MAAM6d,gBAEzC,cAAC/jB,EAAA,EAAD,CAAYC,QAAQ,QAAQC,UAAU,KAAKmkB,MAAM,SAAjD,SAA2D1kB,KAAKuG,MAAM6d,cAAc,MACpF,cAAC/jB,EAAA,EAAD,CAAYC,QAAQ,QAAQC,UAAU,KAAKmkB,MAAM,SAAjD,SAA2D1kB,KAAKuG,MAAMpD,UACtE,uBACA,qBAAK/C,MAAOpB,GAAO8kB,gBAAnB,SACA,cAAC7gB,EAAA,EAAD,CAAQ3C,QAAQ,SAAUF,MAASpB,GAAO+kB,OAAQtb,KAAO,QAAQ1I,QAASC,KAAKoI,YAAasY,SAAU1gB,KAAKuG,MAAM4d,iBAAjH,oC,GA3IeplB,a,oBCjCvBC,GAAU,CACZ2B,KAAM,CACHwG,MAAO,KAEVU,KAAM,CACF1I,OAAQ,EACRE,QAAS,EACTK,SAAU,IAEZilB,MAAO,CACLxlB,OAAQ,EACRE,QAAS,EACTK,SAAU,GACVI,MAAM,QAEV4H,MAAM,CACFP,MAAO,IACP9H,QAAS,EACTF,OAAQ,GAEZylB,WAAY,CACRhkB,SAAU,EACVI,WAAW,GACXtB,SAAS,GACTuB,WAAW,UACX9B,OAAQ,KAKZ0lB,GAAY,CAAC,uCAAuC,mBAAmB,oBAAoB,8BAA8B,kCAAkC,qBAAqB,sBA2HrKC,G,kDAxHX,WAAYllB,GAAQ,IAAD,8BACf,cAAMA,IACD2G,MAAQ,CACTwe,cAAc,EAAKnlB,MAAMyD,MAE7B,EAAKgF,SAAW,EAAKA,SAAS/G,KAAd,gBAChB,EAAK0jB,UAAY,EAAKA,UAAU1jB,KAAf,gBACjB,EAAK2jB,YAAc,EAAKA,YAAY3jB,KAAjB,gBAPJ,E,4CAUnB,SAASwB,GACL,IAAInB,EAAM3B,KACV4B,MAAM,6DAA6DkB,GAClEhB,MAAK,SAAUC,GACZ,OAAOA,EAAIC,UACZF,MAAK,SAASG,GAIb,OAFAN,EAAI/B,MAAMslB,eACVvjB,EAAI/B,MAAM8B,YAAY,EAAEO,GACjBA,O,yBAGf,SAAY8G,GACR,IAAIpH,EAAM3B,KACV4B,MAAM,4DAA4DmH,GACjEjH,MAAK,SAAUC,GACZ,OAAOA,EAAIC,UACZF,MAAK,SAASG,GAKb,OAHAN,EAAI/B,MAAMslB,eACVvjB,EAAI/B,MAAM8B,YAAY,EAAEO,GAEjBA,O,uBAGf,SAAUa,GAEN,IAAInB,EAAM3B,KACV4B,MAAM,gEAAgEkB,GACrEhB,MAAK,SAAUC,GACZ,OAAOA,EAAIC,UACZF,MAAK,SAASG,GAGb,OADAN,EAAI/B,MAAMsC,iBAAiBD,GACpBA,O,yBAGf,WAEIjC,KAAKJ,MAAMslB,iB,oBAIf,WAAU,IAAD,OACL,GAAIllB,KAAKJ,MAAMsI,cACX,IAAIid,EAAQnlB,KAAKJ,MAAMsI,cAAcoI,KAAK,SAAC4S,GACvC,OAAI2B,GAAYrc,SAAS0a,GACd,KAGX,cAACkC,GAAA,EAAD,CAEIlR,MAAOgP,EACP9iB,MAAOpB,GAAO6I,KACd9H,QAAS,EAAKsI,SAAS/G,KAAK,EAAK4hB,GACjCmC,UAAU,QAJHnC,MAYnB,OACI,qBAAK9iB,MAAOpB,GAAO2B,KAAnB,SACA,cAAC2kB,GAAA,EAAD,CAAQC,OAAO,OAAOliB,KAAQrD,KAAKJ,MAAMyD,KAAME,QAASvD,KAAKilB,YAA7D,SACI,sBAAK7kB,MAAOpB,GAAO0I,MAAO8d,UAAWxlB,KAAKilB,YAA1C,UACA,cAAC5kB,EAAA,EAAD,CAAYC,QAAQ,QAAQR,MAAM,UAAUM,MAAOpB,GAAO4lB,WAA1D,4BAGCO,EACD,cAACC,GAAA,EAAD,CAEIlR,MAAO,eACP9T,MAAOpB,GAAO2lB,MACd5kB,QAASC,KAAKylB,YAAYnkB,KAAKtB,KAAK,GACpCqlB,UAAU,QAJH,gBAOX,cAACD,GAAA,EAAD,CAEIlR,MAAO,sBACP9T,MAAOpB,GAAO2lB,MACd5kB,QAASC,KAAKylB,YAAYnkB,KAAKtB,KAAK,GACpCqlB,UAAU,QAJH,uBAOX,cAACD,GAAA,EAAD,CAEIlR,MAAO,iBACP9T,MAAOpB,GAAO2lB,MACd5kB,QAASC,KAAKylB,YAAYnkB,KAAKtB,KAAK,GACpCqlB,UAAU,QAJH,kBAOX,cAACD,GAAA,EAAD,CAEIlR,MAAO,WACP9T,MAAOpB,GAAO2lB,MACd5kB,QAASC,KAAKylB,YAAYnkB,KAAKtB,KAAK,GACpCqlB,UAAU,QAJH,uB,GA3GFtmB,a,cCJzB,SAAS2mB,GAAY9e,GAEnB,GAF4BA,EAAQA,IAAiBwU,OAAOxU,MAAQwU,OAAOxU,MAAQ,MAEzE,MAjBZ,WACE,IAAI+e,EAAYC,UAAUD,UAEtBE,EAAUF,EAAUhT,QAAQ,UAAY,EAC5C,OAAIkT,EACG,QAEHF,EAAUhT,QAAQ,YAAc,EAC7B,KACHgT,EAAUhT,QAAQ,WAAa,EAAW,SAC1CgT,EAAUhT,QAAQ,WAAa,EAC5B,SACHgT,EAAUhT,QAAQ,eAAiB,GAAKgT,EAAUhT,QAAQ,SAAW,IAAMkT,EACxE,UADP,EAIWC,GACK,CAChB,IAAIpU,EAAK9K,EAAMmf,SAAWnf,EAAM+G,OAAO/G,MAAMmf,QACzCC,EAAKpf,EAAMqf,QAAUrf,EAAM+G,OAAO/G,MAAMqf,OAC5C,GAAIvU,EAAK,GAAKsU,EACd,MAAO,mEAEF,CAGL,GAAc,KADCpf,EAAMsf,cAAcniB,SAASoiB,cAAc3I,SACrC,MAAO,gE,IAMxB4I,G,kDACJ,WAAYxmB,GAAQ,IAAD,8BACjB,cAAMA,IACD2G,MAAQ,CACX8f,YAAa,EACbC,QAAO,EACPC,YAAY,KACZC,SAAS,EACTte,cAAc,KACdue,QAAQ,KACRte,cAAc,KACdsb,QAAQ,KACR/a,OAAO,KACP4a,yBAAyB,KACzBjU,mBAAmB,GACnBD,sBAAsB,IAGxB,EAAKgU,4BAA8B,EAAKA,4BAA4B9hB,KAAjC,gBACnC,EAAK6O,sBAAwB,EAAKA,sBAAsB7O,KAA3B,gBAC7B,EAAK4O,yBAA2B,EAAKA,yBAAyB5O,KAA9B,gBAEhC,EAAK4C,UAAY,EAAKA,UAAU5C,KAAf,gBACjB,EAAK8X,WAAa,EAAKA,WAAW9X,KAAhB,gBAClB,EAAKI,YAAc,EAAKA,YAAYJ,KAAjB,gBACnB,EAAKa,YAAc,EAAKA,YAAYb,KAAjB,gBACnB,EAAK4jB,aAAe,EAAKA,aAAa5jB,KAAlB,gBACpB,EAAKY,iBAAmB,EAAKA,iBAAiBZ,KAAtB,gBACxB,EAAKgH,iBAAmB,EAAKA,iBAAiBhH,KAAtB,gBACxB,EAAKiiB,WAAa,EAAKA,WAAWjiB,KAAhB,gBAClB,EAAKrB,YAAc,EAAKA,YAAYqB,KAAjB,gBACnB,EAAKsa,WAAa,EAAKA,WAAWta,KAAhB,gBAClB,EAAKqa,WAAa,EAAKA,WAAWra,KAAhB,gBA/BD,E,+DAiCnB,SAA4BgiB,GAC1BtjB,KAAK+G,SAAS,CAACuc,+B,mCAEjB,SAAsBjU,GACpBrP,KAAK+G,SAAS,CAACsI,yB,sCAEjB,SAAyBD,GACvBpP,KAAK+G,SAAS,CAACqI,4B,wBAEjB,SAAW3O,GACTT,KAAK+G,SAAS,CAAC0c,QAAUhjB,M,uBAE3B,SAAUimB,GACR1mB,KAAK+G,SAAS,CAAC2B,OAASge,M,wBAE1B,SAAW1kB,GACThC,KAAK+G,SAAS,CAAC0f,QAAUzkB,M,wBAE3B,SAAWA,GACTR,QAAQC,IAAI,uBAAwBzB,KAAKuG,MAAM8V,QAAS,OAAQra,GAChEhC,KAAK+G,SAAS,CAACsV,QAAUra,M,yBAI3B,SAAYqgB,EAASrgB,QAEVwP,GAANxP,EACDhC,KAAK+G,SAAS,CAACyf,SAASnE,IAGxBriB,KAAK+G,SAAS,CACZyf,SAAUnE,EACVoE,QAAUzkB,EACVqa,QAAUra,M,yBAIhB,WACEhC,KAAK+G,SAAS,CACZsf,YAAY,M,0BAGhB,WACErmB,KAAK+G,SAAS,CACZsf,YAAY,M,8BAKhB,SAAiBM,GACf3mB,KAAK+G,SAAS,CAACmB,cAAcye,M,8BAG/B,SAAiBC,GACf5mB,KAAK+G,SAAS,CAACoB,cAAcye,M,wBAE/B,SAAWnmB,EAAI8H,GAEbvI,KAAK+G,SACH,CACEuf,QAAO,EACPC,YAAY9lB,M,yBAGlB,WACET,KAAK+G,SAAS,CAACuf,QAAO,M,oBAGxB,WAAU,IAAD,OAQP,OAPAlL,OAAOyL,eAAiB,SAASjgB,GAC/B,OAAO8e,GAAY9e,IAMG,GAArB5G,KAAKuG,MAAMigB,SAEV,8BACE,eAAC,IAAD,WACI,cAAC,EAAD,CACE9kB,YAAe1B,KAAK0B,YACpBS,YAAenC,KAAKmC,YACpBD,iBAAkBlC,KAAKkC,mBAEzB,cAAC,GAAD,CACEyZ,WAAc3b,KAAK2b,WACnBtY,KAAQrD,KAAKuG,MAAM8f,WACnB3kB,YAAe1B,KAAK0B,YACpBwG,cAAelI,KAAKuG,MAAM2B,cAC1BhG,iBAAkBlC,KAAKkC,iBACvBgjB,aAAcllB,KAAKklB,eAErB,cAAC,GAAD,CACEhhB,UAAalE,KAAKkE,UAClBwE,OAAU1I,KAAKuG,MAAMmC,OACrBhH,YAAe1B,KAAK0B,YAAawG,cAAelI,KAAKuG,MAAM2B,cAAehG,iBAAkBlC,KAAKkC,iBAAkBoG,iBAAkBtI,KAAKsI,iBAAkBwe,oBAAqB9mB,KAAK8mB,2BAKpK,GAArB9mB,KAAKuG,MAAMigB,SAEhB,8BACE,eAAC,IAAD,WACA,cAAC,EAAD,CACE9kB,YAAe1B,KAAK0B,YACpBS,YAAenC,KAAKmC,YACpBD,iBAAkBlC,KAAKkC,mBAEzB,cAAC6kB,GAAD,CAAerlB,YAAe1B,KAAK0B,YAAayG,cAAenI,KAAKuG,MAAM4B,qBAIlD,GAArBnI,KAAKuG,MAAMigB,SAEhB,qBAAKpmB,MAAO,CAAC4mB,WAAY,QAAzB,SACE,eAAC,IAAD,WACA,cAAC,EAAD,CACEtlB,YAAe1B,KAAK0B,YACpBS,YAAenC,KAAKmC,YACpBD,iBAAkBlC,KAAKkC,mBAEzB,cAAC,GAAD,CAAkBiI,KAAMnK,KAAKuG,MAAMkgB,QACjB/d,OAAQ1I,KAAKuG,MAAMmC,OACnB6a,WAAY,SAAC9jB,GAAD,OAAS,EAAK8jB,WAAW9jB,IACrCiC,YAAe1B,KAAK0B,YACpBka,WAAc5b,KAAK4b,WACnBD,WAAc3b,KAAK2b,WACnBU,QAAWrc,KAAKuG,MAAM8V,QACtBjD,WAAcpZ,KAAKoZ,WACnBhK,sBAAyBpP,KAAKuG,MAAM6I,sBACpCC,mBAAsBrP,KAAKuG,MAAM8I,mBACjCiU,yBAA4BtjB,KAAKuG,MAAM+c,yBAEvCF,4BAA+BpjB,KAAKojB,4BACpCjT,sBAAyBnQ,KAAKmQ,sBAC9BD,yBAA4BlQ,KAAKkQ,2BAGnD,cAAC9M,EAAA,EAAD,CACE6jB,YAAU,EACV5jB,KAAMrD,KAAKuG,MAAM+f,OACjB/iB,QAASvD,KAAKC,YAHhB,SAKA,cAAC,EAAD,CAAYQ,IAAOT,KAAKuG,MAAMggB,YAAa/lB,YAAeR,KAAKuG,MAAMkgB,QAAQjmB,YAAaP,YAAaD,KAAKC,qBAKpF,GAArBD,KAAKuG,MAAMigB,SAEhB,qBAAKpmB,MAAO,CAAC4mB,WAAY,QAAzB,SACE,eAAC,IAAD,WACE,cAAC,EAAD,CACEtlB,YAAe1B,KAAK0B,YACpBS,YAAenC,KAAKmC,YACpBD,iBAAkBlC,KAAKkC,mBAEzB,cAACglB,GAAD,CAAkB/c,KAAMnK,KAAKuG,MAAMkgB,QACjBlD,WAAY,SAAC9jB,GAAD,OAAS,EAAK8jB,WAAW9jB,IACrCmc,WAAc5b,KAAK4b,WACnBlT,OAAQ1I,KAAKuG,MAAMmC,OACnBiT,WAAc3b,KAAK2b,WACnBU,QAAWrc,KAAKuG,MAAM8V,QACtB3a,YAAe1B,KAAK0B,YACpB+hB,QAAWzjB,KAAKuG,MAAMkd,QACtBrK,WAAcpZ,KAAKoZ,WAEnBkK,yBAA4BtjB,KAAKuG,MAAM+c,yBACvClU,sBAAyBpP,KAAKuG,MAAM6I,sBACpCC,mBAAsBrP,KAAKuG,MAAM8I,mBACjC+T,4BAA+BpjB,KAAKojB,4BACpCjT,sBAAyBnQ,KAAKmQ,sBAC9BD,yBAA4BlQ,KAAKkQ,2BAEnD,cAAC9M,EAAA,EAAD,CACE6jB,YAAU,EACV5jB,KAAMrD,KAAKuG,MAAM+f,OACjB/iB,QAASvD,KAAKC,YAHhB,SAKA,cAAC,EAAD,CAAYQ,IAAOT,KAAKuG,MAAMggB,YAAa/lB,YAAeR,KAAKuG,MAAMkgB,QAAQjmB,YAAaP,YAAaD,KAAKC,0BA/B9G,M,GAxLQnB,IAAMC,WAmOxBiL,IAASmd,OAAO,cAAC,GAAD,IAASpjB,SAASC,eAAe,W","file":"static/js/main.b92430e8.chunk.js","sourcesContent":["import React from 'react';\nimport {RadioButton, RadioButtonGroup} from 'material-ui/RadioButton';\n\nclass HighlightModeSelector extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n  return(\n    <div>\n    <RadioButtonGroup name=\"choose\" defaultSelected=\"not_light\" onChange = {this.props.action}>\n    <RadioButton\n        value=\"1\"\n        label=\"mode1\"\n      />\n      <RadioButton\n        value=\"2\"\n        label=\"mode2\"\n      />\n      <RadioButton\n        value=\"3\"\n        label=\"mode3\"\n      />\n    </RadioButtonGroup>\n      </div>\n  );\n  }\n}\nexport default HighlightModeSelector;","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { PropTypes } from 'prop-types';\nimport * as d3 from \"d3\";\n\nconst styles = theme => ({\n    area: {\n      margin:10,\n    //   padding: 20,\n    //   overflow:auto\n    },\n    paper: {\n          padding: 10, //theme.spacing.unit * 2,\n          margin : 20,//theme.spacing.unit * 4,\n        },\n    container: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        },\n    text:{\n        margin:10,\n        padding:20,\n        fontSize:16,\n    }\n  });\n\nclass Video_info extends Component {\n    constructor(props) {\n        super(props);\n        // this.buttonClick = this.buttonClick.bind(this);\n    }\n    \n    componentDidMount() {\n    }\n    // buttonClick(vid,e){\n    //     console.log(\"click\",e,vid);\n    // }\n    \n    render() {\n        return ( \n            // <Typography className=\"node_info\"><a href=\"https://www.w3schools.com/html/\">Visit our HTML tutorial</a></Typography>\n            <div>\n                <IconButton color=\"inherit\" onClick={this.props.CloseDrawer} aria-label=\"Close\">\n                    <CloseIcon /> \n                </IconButton>\n                \n                <Paper  elevation={1} style={styles.paper}>\n                <div style={styles.container}>\n                        <Typography variant=\"headline\" component=\"h5\" >\n                            {this.props.videos_info[this.props.vid].transcript}\n                        </Typography>\n                </div>\n                    \n                </Paper>\n            </div>\n        );\n    }\n}\nexport default Video_info;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\n\r\n\r\nconst styles = ({\r\n    root: {\r\n        flexGrow: 1,\r\n      },\r\n      bar:{\r\n        background:\"#0088A8\",\r\n        // padding:2\r\n      },\r\n      APPName: {\r\n        flexGrow: 1,\r\n        marginLeft:10,\r\n        fontSize:20,\r\n        fontFamily:\"Cambria\"\r\n      },\r\n      menuButton: {\r\n        // marginLeft: 5,\r\n        marginRight: 1,\r\n\r\n      },\r\n      menuButton: {\r\n        // marginLeft: -5,\r\n        marginRight: 1,\r\n\r\n      },\r\n});\r\n\r\nclass BarField extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // this.state = {\r\n        //     chipdata:this.props.SearchHistory,\r\n        //     SearchKeyword : null,\r\n        // }\r\n        this.HomeOnClick = this.HomeOnClick.bind(this);\r\n        this.MenuOnClick = this.MenuOnClick.bind(this);\r\n    }\r\n    HomeOnClick(){\r\n        console.log(\"[click] HomePage\");\r\n        this.props.SetProgress(1);//this.setProgress(1,null);\r\n    }\r\n    MenuOnClick(){\r\n        // console.log(\"menu click\");\r\n        var tmp = this;\r\n        \r\n        fetch('https://conceptmap-backend.herokuapp.com/SearchHistory/',{mode: \"no-cors\"})\r\n        .then(function (res) {\r\n        //    console.log(res.json());\r\n            return res.json();\r\n        }).then(function(myJson) {\r\n            // console.log(\"already\",myJson);\r\n            // tmp.setState({SearchHistory:myJson});\r\n            tmp.props.SetSearchHistory(myJson);\r\n            tmp.props.SetMenuOpen();\r\n            return myJson;\r\n        });\r\n        \r\n    }\r\n    render() {\r\n        // console.log(\"learingmap\",this.props);\r\n        return (\r\n            <div style={styles.root}>\r\n            <AppBar position=\"static\" style={styles.bar}>\r\n            <Toolbar>\r\n                <IconButton style={styles.menuButton} color=\"inherit\" aria-label=\"Menu\">\r\n                    <MenuIcon onClick={this.MenuOnClick}/>\r\n                </IconButton>\r\n                <IconButton style={styles.homeButton} color=\"inherit\" aria-label=\"Home\">\r\n                    <HomeIcon onClick={this.HomeOnClick}/>\r\n                </IconButton>\r\n                <Typography variant=\"title\" color=\"inherit\" style={styles.APPName}>\r\n                Learning Map\r\n                </Typography>\r\n                {/* <Button color=\"inherit\">Login</Button> */}\r\n            </Toolbar>\r\n            </AppBar>\r\n        </div>\r\n        );\r\n    }\r\n    \r\n}\r\nexport default BarField;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nconst styles = ({\r\n    title:{\r\n        fontSize:150,\r\n    },\r\n  });\r\nclass AlertDialog extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.RenderButtons = this.RenderButtons.bind(this);\r\n        this.CheckExistedMap = this.CheckExistedMap.bind(this);\r\n        this.CreateNewMap = this.CreateNewMap.bind(this);\r\n        \r\n    }\r\n    CheckExistedMap(){\r\n        this.props.Go_CheckExistedMap(this.props.keyword);\r\n    }\r\n    CreateNewMap(){\r\n        this.props.Go_CreateNewMap(this.props.keyword);\r\n    }\r\n    \r\n\r\n    RenderButtons(){\r\n        if(this.props.alertCondition==\"null\"){\r\n            return(\r\n                <Button onClick={this.props.HandleAlertClose} color=\"primary\">\r\n                OK\r\n                </Button>\r\n            );\r\n        }\r\n        else if(this.props.alertCondition==\"exist\"){\r\n            return(\r\n                <div>\r\n                <Button onClick={this.CheckExistedMap.bind(this)} color=\"primary\">\r\n                OK\r\n                </Button>\r\n                <Button onClick={this.CreateNewMap.bind(this)} color=\"primary\">\r\n                No,Create a new one\r\n                </Button>\r\n                </div>\r\n            );\r\n        }\r\n        else if(this.props.alertCondition==\"notExist\"){\r\n            return(\r\n                <div>\r\n                <Button onClick={this.CreateNewMap.bind(this)} color=\"primary\">\r\n                    OK\r\n                </Button>\r\n                <Button onClick={this.props.HandleAlertClose} color=\"primary\">\r\n                    Cancel\r\n                </Button>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n    \r\n    render() {\r\n        // console.log(this.props.keyword);\r\n        var title,message;\r\n        if(this.props.alertCondition==\"null\"){\r\n            title=\"Error\";\r\n            message = \"The query must have at least a keyword! \";\r\n        }\r\n        else if(this.props.alertCondition==\"exist\"){\r\n            title=\"Check the learning map already created?\";\r\n            message = \" '\"+this.props.keyword+\"' has already been searched before. You can check the learning map already created or create a new one.\";\r\n        }\r\n        else if(this.props.alertCondition==\"notExist\"){\r\n            title=\"Create a learning map?\";\r\n            message = \"Create a learning map will cost about 10~15 minutes, Are you sure you want to create a learning map? \"\r\n        }\r\n        return (\r\n        <div  style={styles.title}>\r\n            <Dialog\r\n            open={this.props.alertOpen}\r\n            onClose={this.props.HandleAlertClose}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n            >\r\n            <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\r\n            <DialogContent>\r\n                <DialogContentText id=\"alert-dialog-description\">\r\n                {message}\r\n                </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n            {this.RenderButtons()}\r\n                {/* <Button onClick={this.handleClose} color=\"primary\">\r\n                Disagree\r\n                </Button>\r\n                <Button onClick={this.handleClose} color=\"primary\" autoFocus>\r\n                Agree\r\n                </Button> */}\r\n            </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n        );\r\n  }\r\n}\r\nexport default AlertDialog;","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { PropTypes } from 'prop-types';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nconst styles = ({\n    title:{\n        fontSize:150,\n    },\n  });\nclass UserNameDialog extends Component {\n    constructor(props) {\n        super(props);\n        this.onClick=this.onClick.bind(this);\n    }\n    onClick(){\n        const nameElement = document.getElementById(\"name\");\n        const name = nameElement.value;\n        this.props.SetUserId(name);\n        this.props.HandleNameDialogClose();\n    }\n    \n    render() {\n        // console.log(this.props.keyword);\n        return (\n        <div  style={styles.title}>\n            <Dialog\n            open={this.props.nameDialogOpen}\n            onClose={this.props.HandleNameDialogClose}\n            aria-labelledby=\"userName-dialog-title\"\n            aria-describedby=\"userName-dialog-description\"\n            >\n            <DialogTitle id=\"userName-dialog-title\">{\"WHat's your name?\"}</DialogTitle>\n            <DialogContent>\n                <DialogContentText id=\"userName-dialog-description\">\n                        {\"username: \"}\n                        <input type='text' name='name' id='name'/>\n                </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n            <Button onClick={this.onClick} color=\"primary\">\n                    OK\n            </Button>\n            </DialogActions>\n            </Dialog>\n        </div>\n        );\n  }\n}\nexport default UserNameDialog;","export default __webpack_public_path__ + \"static/media/homepage3.d51a44ab.png\";","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { PropTypes } from 'prop-types';\nimport Autosuggest from 'react-autosuggest';\nimport Paper from '@material-ui/core/Paper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Downshift from 'downshift';\nimport Input from '@material-ui/core/Input';\nimport Typography from '@material-ui/core/Typography';\nconst styles = ({\n  paper:{\n    listStyleType: 'none',\n  },\n  input: {\n     \n    // margin: 10,\n    fontSize:20,\n  },\n  container: {\n    flexGrow: 1,\n    backgroundColor: 'white',\n    position: \"relative\",\n},\nsuggestionsContainerOpen: {\n    zIndex: 5,\n    position: \"absolute\",\n    left: 0,\n    right: 0,\n},\nsuggestion: {\n    display: 'block',\n    position:  \"relative\",\n    fontSize:20,\n},\nsuggestionsList: {\n    position:  \"relative\",\n    margin: 0,\n    padding: 0,\n    listStyleType: 'none',\n    fontSize:20,\n},\n});\n  function getSuggestions(o,tmpthis){\n    const inputValue = o.value.trim().toLowerCase();\n    const inputLength = inputValue.length;\n  \n    return inputLength === 0 ? [] : tmpthis.props.historyWords.filter(option =>\n      option.toLowerCase().slice(0, inputLength) === inputValue\n    );\n  };\n  \n  // When suggestion is clicked, Autosuggest needs to populate the input\n  // based on the clicked suggestion. Teach Autosuggest how to calculate the\n  // input value for every given suggestion.\nfunction getSuggestionValue (suggestion){\n  return  suggestion;\n};\n  \n  function renderInputComponent  (inputProps){\n    // console.log(\"inputProps\",inputProps);\n   return(\n        <div >\n        <Input {...inputProps} style={styles.input} />\n        {/* <Input placeholder=\"Concept \" \n        style={styles.input} value={this.state.name} \n        // inputProps={{  'aria-label': 'Description',  } }    */}\n      </div>\n   );\n  };\n\n\n  function renderSuggestion (suggestion){\n    return(\n      <MenuItem\n      component=\"div\">\n      {suggestion}\n    </MenuItem>\n    );\n  };\n  function renderSuggestionsContainer(options ){\n    return(\n          <Paper style={styles.paper}\n          square\n          {...options.containerProps}\n          >\n          {options.children}\n          </Paper>\n    );\n \n  };\n  \n \n  class AutoSuggestions extends Component {\n    constructor(props) {\n      super(props);\n      \n      // Autosuggest is a controlled component.\n      // This means that you need to provide an input value\n      // and an onChange handler that updates this value (see below).\n      // Suggestions also need to be provided to the Autosuggest,\n      // and they are initially empty because the Autosuggest is closed.\n      this.state = {\n        value: '',\n        suggestions: []\n      };\n      this.onChange = this.onChange.bind(this);\n      this.onSuggestionsFetchRequested = this.onSuggestionsFetchRequested.bind(this);\n      this.onSuggestionsClearRequested = this.onSuggestionsClearRequested.bind(this);\n    }\n    \n    \n    onChange (event, { newValue })  {\n      this.props.TextChange(newValue);\n      this.setState({\n        value: newValue\n      });\n      \n    };\n\n  \n  \n    // Autosuggest will call this function every time you need to update suggestions.\n    // You already implemented this logic above, so just use it.\n    onSuggestionsFetchRequested( value ) {\n      this.setState({\n        suggestions: getSuggestions(value,this)\n      });\n    };\n  \n    // Autosuggest will call this function every time you need to clear suggestions.\n    onSuggestionsClearRequested() {\n      this.setState({\n        suggestions: []\n      });\n    };\n  \n    render() {\n      const { value, suggestions } = this.state;\n      // Autosuggest will pass through all these props to the input.\n      const inputProps = {\n        placeholder: 'Concept',\n        value,\n        onChange: this.onChange\n      };\n  \n      // Finally, render it!\n      return (\n        <div style={styles.paper}>\n        <Autosuggest\n        theme={{\n                    container: styles.container,\n                    suggestionsContainerOpen: styles.suggestionsContainerOpen,\n                    suggestionsList: styles.suggestionsList,\n                    suggestion: styles.suggestion,\n                }}\n          suggestions={this.state.suggestions}\n          onSuggestionsFetchRequested={this.onSuggestionsFetchRequested.bind(this)}\n          onSuggestionsClearRequested={this.onSuggestionsClearRequested.bind(this)}\n          getSuggestionValue={getSuggestionValue}\n          renderInputComponent={renderInputComponent.bind(this)}\n          renderSuggestion={renderSuggestion}\n          renderSuggestionsContainer={renderSuggestionsContainer.bind(this)}\n          inputProps={inputProps}\n        />\n        </div>\n      );\n      \n    }\n  }export default AutoSuggestions;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Input from '@material-ui/core/Input';\r\nimport Search from '@material-ui/icons/Search';\r\nimport Button from '@material-ui/core/Button';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport AlertDialog from './AlertDialog';\r\nimport UserNameDialog from './UserNameDialog';\r\nimport HomePageImg from './homepage3.png';\r\nimport AutoSuggestions from './AutoSuggestions';\r\n\r\nconst styles = ({\r\n    root1:{\r\n        height:\"85%\",\r\n        width:\"95%\",\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        backgroundImage: \"url(\" + HomePageImg + \")\",\r\n        backgroundRepeat: \"no-repeat\",\r\n        backgroundSize: \"74%\",\r\n        backgroundPosition: \"center\",\r\n        margin:20,\r\n\r\n    },\r\n    root2: {\r\n    //   height: \"100%\",\r\n      width : \"40%\",\r\n      padding: 15, //theme.spacing.unit * 2,\r\n      margin : 120,//theme.spacing.unit * 4,\r\n    },\r\n    container: {\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      flexWrap: 'wrap',\r\n      paddingTop:10,\r\n      paddingBottom:5,\r\n    },\r\n    input: {\r\n     \r\n      margin: 10,//theme.spacing.unit,\r\n      fontSize:20,\r\n    },\r\n    chip: {\r\n        margin: 8,\r\n        padding:5,\r\n        fontSize:13\r\n      },\r\n    img:{\r\n        opacity:0.2\r\n    }\r\n  });\r\n\r\n  \r\nclass SearchField extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            chipdata:this.props.SearchHistory,\r\n            SearchKeyword : null,\r\n            historyWords:[],\r\n            alertOpen:false,\r\n            alertCondition : null,\r\n            nameDialogOpen:true,\r\n        }\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.TagClick = this.TagClick.bind(this);\r\n        this.TextChange = this.TextChange.bind(this);\r\n        this.HandleAlertClose = this.HandleAlertClose.bind(this);\r\n        this.Go_CreateNewMap = this.Go_CreateNewMap.bind(this);\r\n        this.Go_CheckExistedMap = this.Go_CheckExistedMap.bind(this);\r\n        this.HandleNameDialogClose = this.HandleNameDialogClose.bind(this);\r\n    }\r\n    componentWillMount(){\r\n        // console.log(\"SearcgFieldMount\");\r\n        var tmp = this;\r\n        fetch('https://appbackend-hci.herokuapp.com/SearchHistory/')\r\n        .then(function (res) {\r\n        //    console.log(res.json());\r\n            return res.json();\r\n        }).then(function(myJson) {\r\n            tmp.setState({\r\n                historyWords:myJson\r\n            });\r\n            return myJson;\r\n        });\r\n    }\r\n    \r\n    Go_CreateNewMap(keyword){\r\n        this.props.SetProgress(2);\r\n        this.props.SetSearchKeyword(keyword);\r\n    }\r\n    Go_CheckExistedMap(keyword){\r\n        if (keyword==\"bitcoin introduction\"){\r\n            console.log(\"here!!!!XXXXbitcoin\")\r\n            var tmp = this;\r\n            var index = 0;\r\n            fetch('https://appbackend-hci.herokuapp.com/GetJson_bitcoin/'+index)\r\n            .then(function (res) {\r\n                return res.json();\r\n            }).then(function(myJson) {\r\n                tmp.props.SetProgress(3,myJson);\r\n                return myJson;\r\n            });\r\n        }\r\n        else{\r\n            var tmp = this;\r\n            fetch('https://appbackend-hci.herokuapp.com/GetAnalyzeResult/'+keyword)\r\n            .then(function (res) {\r\n                return res.json();\r\n            }).then(function(myJson) {\r\n                // console.log(\"myJson\",myJson.search_info);\r\n                tmp.props.SetProgress(3,myJson);\r\n                return myJson;\r\n            });\r\n        }\r\n        \r\n    }\r\n    handleClick(e){\r\n        if(this.state.SearchKeyword==null){\r\n            this.setState({\r\n                alertOpen:true,\r\n                alertCondition:\"null\"\r\n            });\r\n        }else if(this.state.historyWords.includes(this.state.SearchKeyword)){\r\n            this.setState({\r\n                alertOpen:true,\r\n                alertCondition:\"exist\"\r\n            });\r\n        }else{\r\n            this.setState({\r\n                alertOpen:true,\r\n                alertCondition:\"notExist\"\r\n            });\r\n        }\r\n        \r\n    }\r\n    TagClick(keyword){\r\n        var tmp = this;\r\n        fetch('https://appbackend-hci.herokuapp.com/GetAnalyzeResult/'+keyword)\r\n        .then(function (res) {\r\n            return res.json();\r\n        }).then(function(myJson) {\r\n            // console.log(\"myJson\",myJson.search_info);\r\n            tmp.props.SetProgress(3,myJson);\r\n            return myJson;\r\n        });\r\n    }\r\n    TagDelete(keyword){\r\n        // console.log(\"tag delete\",this);\r\n        var tmp = this;\r\n        fetch('https://appbackend-hci.herokuapp.com/DeleteAnalyzeResult/'+keyword)\r\n        .then(function (res) {\r\n            return res.json();\r\n        }).then(function(myJson) {\r\n            tmp.props.SetSearchHistory(myJson);\r\n            return myJson;\r\n        });\r\n    }\r\n    TextChange(e){\r\n        // sconsole.log(\"eeee\",this,e.target.value);\r\n        this.setState({\r\n            SearchKeyword:e,\r\n            // SearchKeyword:e.target.value\r\n        });\r\n    }\r\n    HandleAlertClose(){\r\n        this.setState({\r\n            alertOpen:false,\r\n        });\r\n    }\r\n    HandleNameDialogClose(){\r\n        this.setState({\r\n            nameDialogOpen:false,\r\n        });\r\n    }\r\n    render() {\r\n        // console.log(\"search\",this.state.SearchKeyword);\r\n        return (\r\n            <div style={styles.root1} >\r\n            {/* <img src={HomePage2} style={styles.img} /> */}\r\n            \r\n            <Paper style={styles.root2} elevation={13}>\r\n                <div style={styles.container} >\r\n                    {/* <Input placeholder=\"Concept \" style={styles.input} value={this.state.name} inputProps={{  'aria-label': 'Description',  } } onChange={this.TextChange} /> */}\r\n                    <AutoSuggestions historyWords={this.state.historyWords} TextChange={this.TextChange}/>\r\n                    <Button size = \"small\" onClick={this.handleClick}>\r\n                        <Search style = {{margin:10}}/>\r\n                    </Button>\r\n                </div>\r\n                \r\n            </Paper>\r\n            <AlertDialog \r\n                keyword = {this.state.SearchKeyword}\r\n                alertOpen={this.state.alertOpen} \r\n                HandleAlertClose={this.HandleAlertClose} \r\n                alertCondition={this.state.alertCondition}\r\n                Go_CreateNewMap={this.Go_CreateNewMap}\r\n                Go_CheckExistedMap={this.Go_CheckExistedMap}\r\n            />\r\n            <UserNameDialog \r\n            nameDialogOpen={this.props.userId==null} \r\n            HandleNameDialogClose={this.HandleNameDialogClose} \r\n            userId = {this.props.userId}\r\n            SetUserId = {this.props.SetUserId}\r\n        />\r\n            </div>\r\n        );\r\n        \r\n    }\r\n}\r\nexport default SearchField;","import React, { Component } from 'react';\r\nimport ReactDOM, { render } from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport * as d3 from \"d3\";\r\nimport Popover from '@material-ui/core/Popover';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport * as cldrSegmentation from 'cldr-segmentation';\r\nimport CommunicationCallSplit from 'material-ui/svg-icons/communication/call-split';\r\nimport { text } from 'd3';\r\n\r\n\r\n// import { withStyles } from '@material-ui/core/styles';\r\nconst styles = {\r\n    block: {\r\n        margin: 10,\r\n    },\r\n    circle: {\r\n        cursor: \"pointer\",\r\n        // fill:\"#555\",\r\n        // zIndex:-1,\r\n        // opacity:0.4,\r\n    },\r\n    conceptlabel: {\r\n        // fontFamily:\"EB Garamond\",\r\n        position: \"absolute\",\r\n        zIndex: -1,\r\n        fontSize: 14,\r\n\r\n    }\r\n};\r\n\r\nif (!firebase.apps.length) {\r\n    firebase.initializeApp({\r\n        databaseURL: \"https://test-7916a-default-rtdb.asia-southeast1.firebasedatabase.app/\"\r\n    });\r\n} else {\r\n    firebase.app(); // if already initialized, use that one\r\n}\r\n\r\n\r\n//   var ScaleDotSize = d3.scaleLinear()\r\n//   .domain([0,70])//Math.max.apply(Math,recorditems.map(function(o){return o.cnt;}))\r\n//   .range([5,7]);//4,6\r\nfunction HighLightTextStyle(HighlightNodeText, HighlightNodes, index) {\r\n    if (HighlightNodeText != null) {\r\n        if (HighlightNodeText.includes(index) && HighlightNodes.includes(index)) {\r\n            // return {fill:\"red\"};\r\n            return { textShadow: \"0px 0px 15px #ff5151,0px 0px 15px #ff5151\" };\r\n        } else {\r\n            return { fill: \"black\" };\r\n        }\r\n    }\r\n    return { fill: \"black\" };\r\n}\r\nfunction FadeTextStyle(Path_ConceptIndex, HighlightNodes, index) {\r\n    if (Path_ConceptIndex != null && HighlightNodes.length != 0 && !HighlightNodes.includes(index)) {\r\n        // return {fill:\"red\"};\r\n        return { fillOpacity: \"0.5\" };\r\n    }\r\n    return { fill: \"black\" };\r\n}\r\n\r\nclass Node extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            anchorEl: null,\r\n            studentslist: []\r\n        };\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleHover = this.handleHover.bind(this);\r\n        this.NodeRadius = this.NodeRadius.bind(this);\r\n        this.handleMouseOut = this.handleMouseOut.bind(this);\r\n        //this.handleHighlight = this.handleHighlight.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.d3Node = d3.select(ReactDOM.findDOMNode(this))\r\n            .datum(this.props.data)\r\n        // .call(this.props.enterNode)\r\n        // console.log(\"node this\",ReactDOM.findDOMNode(this),this.props.data);\r\n\r\n        firebase.database().ref(\"/change\").on(\"value\", snapshot => {\r\n            let studentlist = [];\r\n            snapshot.forEach(snap => {\r\n                // snap.val() is the dictionary with all your keys/values from the 'students-list' path\r\n                var data = snap.val();\r\n                //console.log(\"snap = \", snap);\r\n                var data = data.replace(\"<p>\", \"\").replace(\"</p>\", \"\");\r\n                studentlist.push(data);\r\n                //console.log(data);\r\n            });\r\n            this.setState({ studentslist: studentlist });\r\n        });\r\n\r\n    }\r\n\r\n    // let the node can be moved!!!\r\n    componentDidUpdate() {\r\n        this.d3Node.datum(this.props.data)\r\n            .call(this.props.updateNode)\r\n        // console.log(\"Update!!\",this.props.data.index,this.props.HighlightNodes);\r\n    }\r\n\r\n\r\n\r\n    handleClick(e) {\r\n        //console.log(\"[click],conceptMapNode\",\",\",this.props.data.name,\",\",this.props.data.index);\r\n        //console.log(this.pros);\r\n        // d3.select(ReactDOM.findDOMNode(this)).select('text')\r\n        // .transition()\r\n        // .duration(500)\r\n        // .attr(\"text-anchor\",\"middle\")\r\n        // .style(\"font-style\",\"italic\")\r\n        // .style(\"text-shadow\",\"2px 2px 4px #888\")\r\n        // .style(\"font-size\",\"19\");\r\n\r\n        this.setState({\r\n            anchorEl: ReactDOM.findDOMNode(this),\r\n        });\r\n        this.props.SetPath_ConceptIndex(\"add\", this.props.data.index);\r\n    };\r\n    handleClose() {\r\n        // console.log(\"unclick\",ReactDOM.findDOMNode(this));\r\n        d3.select(ReactDOM.findDOMNode(this)).select('text')\r\n            .transition()\r\n            .duration(500)\r\n            .attr(\"text-anchor\", \"right\")\r\n            .style(\"font-style\", \"normal\")\r\n            .style(\"text-shadow\", \"none\")\r\n            .style(\"font-size\", \"14\");\r\n\r\n        this.setState({\r\n            anchorEl: null,\r\n        });\r\n\r\n    };\r\n\r\n    handleHover(i) {\r\n\r\n        /*var data_db = this.state.studentslist[0];\r\n        var revised_string = '<strong>';\r\n        if (data_db.includes(this.props.data.name)) {\r\n            //revised_string = revised_string.concat(this.props.data.name, '</strong>');\r\n            //console.log(revised_string)\r\n            //this.props.SetHighlightWord(revised_string);\r\n            this.props.SetHoverConceptIndex(this.props.data.index, this.props.data.name);\r\n            this.props.SetHighlightNodes(this.props.data.index);\r\n    \r\n        }\r\n        else {\r\n            this.props.SetHoverConceptIndex(this.props.data.index, this.props.data.name);\r\n            this.props.SetHighlightNodes(this.props.data.index);    \r\n            console.log(\"node does not exist in content\");\r\n        }\r\n        */\r\n        console.log(\"[hover],conceptMapNode\", \",\", this.props.data.name, \",\", this.props.data.index);\r\n        // console.log(ReactDOM.findDOMNode(this));\r\n\r\n        //--------------------\r\n        console.log(\"this.props.data.name = \", this.state.studentslist);\r\n        //added \r\n        console.log(\"hover mode!!\");\r\n        this.props.SetHoverConceptIndex(this.props.data.index);\r\n        this.props.SetHighlightNodes(this.props.data.index);\r\n\r\n    };\r\n\r\n\r\n\r\n    NodeRadius(cnt, Range) {\r\n        var ScaleDotSize = d3.scaleLinear()\r\n            .domain([Range[0], Range[1]])//Math.max.apply(Math,recorditems.map(function(o){return o.cnt;}))\r\n            .range([6, 15]);//4,6\r\n        return ScaleDotSize(cnt)\r\n    }\r\n\r\n    ClickedNode(highlight, radius) {\r\n        if (highlight == true) {\r\n            return (\r\n                <circle ref=\"dragMe\"\r\n                    fill=\"#AAAAAA\"\r\n                    r={radius}\r\n                    opacity={0.4} >\r\n                </circle>\r\n            );\r\n        }\r\n    }\r\n    handleMouseOut(){\r\n        this.props.ClearHoverConcept();\r\n        console.log(\"handleout!!\");\r\n    }\r\n\r\n    //欲修改Node顏色，於此區塊修改\r\n    render() {\r\n\r\n        //console.log(this.props.SetPath_ConceptIndex);\r\n        if (this.props.Path_ConceptIndex == null) {\r\n            var NodeOpacityValue = this.props.HighlightNodes.includes(this.props.data.index) ? 1 : 0.4;\r\n        } else {\r\n            var NodeOpacityValue = this.props.HighlightNodes.includes(this.props.data.index) ? 1 : 0.3;\r\n        }\r\n\r\n        // var NodeColor =  this.props.HighlightNodes.includes(this.props.data.index)? \"#009FCC\":\"#555\" ;\r\n\r\n        if (this.props.Path_ConceptIndex == this.props.data.index) {        //Click Node\r\n            var NodeColor = \"#444444\";\r\n            console.log(\"PathConceptIndex = \", this.props.Path_ConceptIndex);\r\n        } else if (this.props.HoverConceptIndex == this.props.data.index) {     //Hover Node\r\n            var NodeColor = \"#5c4350\";\r\n            // \"#17667c\"r\r\n        }\r\n        else {\r\n            // var NodeColor =  this.props.HighlightNodes.includes(this.props.data.index)? \"#009FCC\":\"#555\" ;\r\n            if (this.props.DirectNodes.includes(this.props.data.index)) {\r\n                var NodeColor = \"#009FCC\"; // \"#8f7683\"\r\n            } else if (this.props.HighlightNodes.includes(this.props.data.index)) {\r\n                var NodeColor = \"#009FCC\";\r\n            } else {\r\n                var NodeColor = \"#555\";\r\n            }\r\n        }\r\n        if (this.props.SetPath_ConceptIndex == false) {\r\n            var NodeColor = \"#AFC700\";\r\n            console.log(\"fixing line ...\");\r\n        }\r\n        if (this.props.updated == true) {\r\n            var NodeColor = \"#FF0000\";\r\n        }\r\n        \r\n        return (\r\n            <g className='node' >\r\n                {/* <circle ref=\"dragMe\" onMouseOver={thi(s.handle.bind(this)}/> */}\r\n                {\r\n                    \r\n                        console.log((this.props.data.index==0)&&\"nodeColor = \", NodeColor)\r\n                }\r\n                <circle ref=\"dragMe\"\r\n                    onClick={this.handleClick.bind(this)}\r\n                    onMouseOver={this.handleHover.bind(this)}\r\n                    // 應該要綁定一個事件是當用戶觸發某個狀態 會從新繪圖 e.g. mouse over\r\n                    //onMouseOver={this.handleHighlight.bind(this)} \r\n                    onMouseOut={this.handleMouseOut}\r\n                    r={this.NodeRadius(this.props.data.count, this.props.ConceptRange)}\r\n                    // r = {ScaleDotSize(this.props.data.count)}\r\n                \r\n                    style={Object.assign({}, styles.circle, { opacity: NodeOpacityValue, fill: NodeColor })}\r\n                >\r\n                </circle>\r\n                {/* {this.ClickedNode(this.props.BigCircleIndex==this.props.data.index,this.NodeRadius(this.props.data.count,this.props.ConceptRange)+15)} */}\r\n\r\n                {/* <Popover\r\n                    open={Boolean(this.state.anchorEl)}\r\n                    anchorEl={this.state.anchorEl}\r\n                    onClose={this.handleClose}\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'center',\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: 'top',\r\n                        horizontal: 'center',\r\n                    }}\r\n                >\r\n                    <div style={styles.block}>\r\n                        <PopoverContent node={this.props.data} video_info = {this.props.video_info} OpenDrawer = {(text) =>this.props.OpenDrawer(text)}/>\r\n                    </div>\r\n                </Popover> */}\r\n                {/* <circle ref=\"dragMe\" onMouseOver={ Tooltip.show(findDOMNode(this.refs.foo))}/> */}\r\n                {/* <text style={styles.conceptlabel} dx=\"5\" dy=\"8\">  {this.props.data.name}</text> */}\r\n                <text\r\n                    style={Object.assign({},\r\n                        styles.conceptlabel,\r\n                        HighLightTextStyle(this.props.HighlightNodeText, this.props.HighlightNodes, this.props.data.index),\r\n                        FadeTextStyle(this.props.Path_ConceptIndex, this.props.HighlightNodes, this.props.data.index))}\r\n                    dx=\"5\"\r\n                    dy=\"8\">{this.props.data.name}\r\n                </text>\r\n\r\n            </g>\r\n        );\r\n    }\r\n}\r\nexport default Node;\r\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { PropTypes } from 'prop-types';\nimport * as d3 from \"d3\";\n2. \n\nclass Link extends Component {\n    constructor(props) {\n        super(props);\n    }\n    componentDidMount() {\n        this.d3Link = d3.select(ReactDOM.findDOMNode(this))\n            .datum(this.props.data)\n            .call(this.props.enterLink);\n        d3.select(ReactDOM.findDOMNode(this)).attr('marker-end',function(d) {\n                if(d.prerequisite!=null){return 'url(#markerArrow)' }\n            })\n    }\n\n    componentDidUpdate() {\n        this.d3Link.datum(this.props.data)\n            .call(this.props.updateLink);\n        // console.log(\"Update!!\",this.props.data.index,this.props.HighlightNodes);\n        this.DoHighlight(ReactDOM.findDOMNode(this),this.props.HighlightNodes);\n    }\n    DoHighlight(loc,d_neighbors){\n        d3.select(loc)\n      //   .style(\"stroke\", function (o) {\n      //     return (d_neighbors.includes(o.source.index) & d_neighbors.includes(o.target.index) & o.prerequisite!=null)? \"#999999\":\"#bbb\";\n      //   })\n        .style(\"opacity\", function (o) {\n          if (d_neighbors.includes(o.source.index) & d_neighbors.includes(o.target.index) & o.prerequisite!=null & o.similarity>0)\n              {return 1}\n          else if ( o.prerequisite!=null & o.similarity>0)\n              {return 0.3}\n          else\n              {return 0}\n\n          //return (d_neighbors.includes(o.source.index) & d_neighbors.includes(o.target.index) & o.prerequisite!=null & o.similarity>0)? 1:0.1;\n        });\n  }\n    render() {\n        return (\n            <line className='link'  />\n        );\n    }\n}\nexport default Link;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport * as d3 from \"d3\";\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\n\r\n// import { withStyles } from '@material-ui/core/styles';\r\nconst styles = {\r\n    circle: {\r\n        cursor: \"pointer\",\r\n        // fill:\"red\",\r\n    }, \r\n    ConceptBigCircle:{\r\n        // fill:\"#B2DFDB\",\r\n        fill: \"#D4D4D4\",\r\n        opacity: 0.55,\r\n        cursor: \"pointer\",\r\n        // transition:\"all 12s\",\r\n    },\r\n    Sentcircle:{\r\n        opacity: 0.7,\r\n    },\r\n    conceptlabel:{\r\n        // fontFamily:\"EB Garamond\",\r\n        fontSize:19,\r\n        textAnchor:\"middle\",\r\n        fontStyle:\"italic\",\r\n        textShadow:\"2px 2px 4px #888\"\r\n    },\r\n  };\r\n\r\n  \r\n  function CircleShadow(Hightlight){\r\n    if(Hightlight){\r\n        return{stroke:\"#ff7575\", strokeWidth:3, strokeOpacity:0.8};\r\n    }\r\n    else{\r\n        return{};\r\n    }\r\n}\r\n  \r\n\r\nclass PopoverNode extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            // anchorEl: null,\r\n            // NodeClicked: false\r\n        };\r\n        this.Location = this.Location.bind(this);\r\n        this.VideoRadius = this.VideoRadius.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleHover = this.handleHover.bind(this);\r\n        this.handleHoverOut = this.handleHoverOut.bind(this);   \r\n    }\r\n    componentWillMount() {\r\n        console.log(\"popover create\");\r\n    }\r\n    componentDidMount() {\r\n        console.log(\"popover create\");\r\n        this.d3Node = d3.select(ReactDOM.findDOMNode(this))\r\n            .datum(this.props.data)\r\n            // .call(this.props.enterNode)\r\n    }\r\n\r\n    // let the node can be moved!!!\r\n    componentDidUpdate() {\r\n        this.d3Node.datum(this.props.data)\r\n            .call(this.props.updateNode)\r\n        // console.log(\"Update!!\",this.props.data.index,this.props.HighlightNodes);\r\n    }\r\n    Location(index,numNodes){\r\n        // var radius = 100;\r\n        var radius = 100 + index *2.5;\r\n        var angle = (index / (numNodes/2)) * Math.PI - 1/2*Math.PI;\r\n        var cx = (radius * Math.cos(angle));\r\n        var cy = (radius * Math.sin(angle));\r\n        return [cx,cy];\r\n    }\r\n    VideoRadius(index){\r\n        return (44-(index*2.5))\r\n    }\r\n    SentimentColor(score){\r\n        // console.log(this.props.SentRange);\r\n        var sentmin = this.props.SentRange[0]<0? this.props.SentRange[0]:-0.1;\r\n        var color = d3.scaleLinear()\r\n            .domain([sentmin,0,this.props.SentRange[1]-0.1])\r\n            .range([\"red\",\"yellow\", \"green\"])\r\n            .interpolate(d3.interpolateHcl);\r\n        return color(score);      \r\n    }\r\n    SentcircleArc(r,percentage){\r\n        // var percentage = 1/4;\r\n        var arc = d3.arc()\r\n        .innerRadius(r)\r\n        .outerRadius(r);\r\n        return arc({startAngle:0, endAngle:(Math.PI*1/4+Math.PI*7/4*percentage)});      \r\n    }\r\n    ArcPercentage(this_likes,likesRange){\r\n        if(likesRange[0]!=likesRange[1]){\r\n            var ArcSize = d3.scaleLinear()\r\n            .domain([likesRange[0],likesRange[1]])\r\n            .range([0,1])\r\n            return ArcSize(this_likes);   \r\n        }else{\r\n            return 1;\r\n        }\r\n           \r\n    }\r\n    handleClose(){\r\n        this.props.SetPopoverIndexes(\"remove\",this.props.data.index);\r\n    }\r\n    handleHover(vid){\r\n        this.props.SetHoverVideoIndex(vid);\r\n    }\r\n    handleHoverOut(){\r\n        this.props.SetHoverVideoIndex(null);\r\n    }\r\n\r\n    render() {\r\n        var numNodes = this.props.data.videos_id.length;\r\n        var video_info = this.props.video_info;\r\n        var LikesList=[]\r\n        this.props.data.videos_id.map( ([vid,cnnt],index) => {LikesList.push(video_info[vid].likeCount);});\r\n        var likesRange=[Math.min(...LikesList),Math.max(...LikesList)];\r\n        var ShowVideoLinks = this.props.data.videos_id.map( ([vid,cnnt],index) => {\r\n            // console.log(vid,video_info[vid].likeCount);\r\n            \r\n            return(\r\n                <g key={\"PopoverNode\"+index}>\r\n                    <Tooltip title={this.props.video_info[vid].title} placement=\"top\">\r\n                    <a xlinkHref={\"https://www.youtube.com/watch?v=\"+vid} target=\"_blank\" >\r\n                        <circle key={vid} \r\n                            cx={this.Location(index,numNodes)[0]} \r\n                            cy={this.Location(index,numNodes)[1]} \r\n                            // r={styles.OuterCircle.r} \r\n                            r = {this.VideoRadius(index)}\r\n                            fill={this.SentimentColor(video_info[vid].userFeedbackScore)} \r\n                            // style={styles.Sentcircle} \r\n                            style = {Object.assign({}, styles.Sentcircle, CircleShadow(vid===this.props.HoverVideoIndex))}    \r\n                        >\r\n                        </circle>\r\n                        {/* <path \r\n                            transform={\"translate(\"+this.Location(index,numNodes)[0]+\",\"+this.Location(index,numNodes)[1]+\")\"}\r\n                            style={styles.Sentcircle} \r\n                            strokeWidth={9}\r\n                            stroke={this.SentimentColor(video_info[vid].comment_sentiment)}\r\n                            d={this.SentcircleArc(this.VideoRadius(index)-4,this.ArcPercentage(video_info[vid].likeCount,likesRange))}\r\n                        ></path> */}\r\n                        <pattern id = {\"attachedImage\"+vid} height = \"150%\" width = \"150%\" patternContentUnits = \"objectBoundingBox\">\r\n                        <image xlinkHref = {video_info[vid][\"thumbnail\"]} preserveAspectRatio = \"xMidYMid meet\" width = \"1.5\" style={styles.img}/>\r\n                        </pattern>\r\n                        <circle key={vid+\"img\"} \r\n                            cx={this.Location(index,numNodes)[0]} \r\n                            cy={this.Location(index,numNodes)[1]} \r\n                            // r={styles.OuterCircle.r-7} \r\n                            r={this.VideoRadius(index)-7} \r\n                            fill={\"url(#attachedImage\"+vid+\")\"} \r\n                            style = {styles.circle} \r\n                            onMouseOver={this.handleHover.bind(this,vid)}\r\n                            onMouseOut={this.handleHoverOut.bind(this)} \r\n                        >\r\n                        </circle>\r\n                    </a>\r\n                    </Tooltip>\r\n                    <text style={styles.conceptlabel} dx=\"5\" dy=\"8\">  {this.props.data.name}</text> \r\n                </g>\r\n            )\r\n        });\r\n        return (\r\n            \r\n            <g className='node' transform={\"translate(\" + this.props.data.x + \",\" + this.props.data.y + \")\"} >\r\n                {/* <circle ref=\"dragMe\" onMouseOver={this.handle.bind(this)}/> */}\r\n                <circle  ref=\"dragMe\" onClick={this.handleClose.bind(this)} r={\"150\"} style = {styles.ConceptBigCircle}></circle>\r\n                {ShowVideoLinks}\r\n            </g>\r\n        );\r\n    }\r\n}\r\nexport default PopoverNode;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport * as d3 from \"d3\";\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\n\r\n// import { withStyles } from '@material-ui/core/styles';\r\nconst styles = {\r\n    mask:{\r\n        opacity:\"0.01\",\r\n        fill: \"white\",\r\n    },\r\n};\r\n\r\n\r\nclass Masker extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        };\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n    handleClick(){\r\n        this.props.SetPath_ConceptIndex(\"clear\",null);\r\n    }\r\n    render() {\r\n        if(this.props.Path_ConceptIndex!=null){\r\n            return(\r\n                <rect \r\n                    style={styles.mask} \r\n                    width={this.props.width} \r\n                    height={this.props.height} \r\n                    onClick={this.handleClick.bind(this)}\r\n                >\r\n                </rect>\r\n            );\r\n        }\r\n        return (\r\n            null\r\n        );\r\n    }\r\n}\r\nexport default Masker;","// refer to :https://codepen.io/vialito/pen/WMKwEr\r\n\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport * as d3 from \"d3\";\r\nimport Node from './Node';\r\nimport Link from './Link';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport PopoverNode from './PopoverNode';\r\nimport Masker from './Masker';\r\nimport * as cldrSegmentation from 'cldr-segmentation';\r\n// const width = 1000;\r\n// const height = 800;\r\n\r\n\r\n/* editor component */\r\nimport SunEditor from 'suneditor-react';\r\nimport 'suneditor/dist/css/suneditor.min.css'; // Import Sun Editor's CSS File\r\nimport { axisLeft } from 'd3';\r\n\r\n\r\nif (!firebase.apps.length) {\r\n    firebase.initializeApp({\r\n        databaseURL: \"https://test-7916a-default-rtdb.asia-southeast1.firebasedatabase.app/\"\r\n    });\r\n    }else {\r\n    firebase.app(); // if already initialized, use that one\r\n}\r\n\r\n\r\n\r\n\r\nconst styles = ({\r\n    root:{\r\n        overflowX: \"scroll\",\r\n        overflowY: \"scroll\",\r\n    },\r\n    root2:{\r\n        //  zoom:1.2\r\n    },\r\n    mask:{\r\n        opacity:\"0.5\",\r\n    },\r\n    Div:{\r\n        float:axisLeft,\r\n    }\r\n    \r\n  });\r\n\r\n\r\nconst color = d3.scaleOrdinal(d3.schemeCategory10);\r\nconst force = d3.forceSimulation();\r\nvar childNodeDict;\r\n\r\n\r\nconst drag = () => {\r\n    d3.selectAll('g')\r\n        .call(d3.drag()\r\n            .on(\"start\", dragStarted)\r\n            .on(\"drag\", dragging)\r\n            .on(\"end\", dragEnded));\r\n};\r\n\r\nfunction dragStarted(d) {\r\n    if (!d3.event.active) force.alphaTarget(0.3).restart()\r\n    d.fx = d.x\r\n    d.fy = d.y\r\n    console.log('dragStarted')\r\n}\r\nfunction dragging(d) {\r\n    d.fx = d3.event.x\r\n    d.fy = d3.event.y\r\n    console.log('dragging')\r\n}\r\nfunction dragEnded(d) {\r\n    if (!d3.event.active) force.alphaTarget(0.5)//0\r\n    d.fx = null\r\n    d.fy = null\r\n    console.log('dragEnded')\r\n}\r\n\r\nconst enterNode = (selection) => {\r\n    // selection.select('circle')\r\n        // .attr(\"r\", function(d){return ScaleDotSize(d.count)})\r\n        // .style(\"fill\", function(d) { return '#555' })\r\n\r\n    // selection.select('text')\r\n        // .style(\"transform\", \"translateX(-50%,-50%\")\r\n};\r\nconst updateNode = (selection) => {\r\n    selection.attr(\"transform\", (d) => \"translate(\" + d.x + \",\" + d.y + \")\")\r\n};\r\nconst enterLink = (selection) => {\r\n    selection.attr(\"stroke-width\", 1)\r\n    .style(\"stroke\",\"#bbb\")\r\n        .style(\"opacity\",\".2\")\r\n};\r\nconst updateLink = (selection) => {\r\n    selection\r\n        .attr(\"x1\", (d) => d.source.x)\r\n        .attr(\"y1\", (d) => d.source.y)\r\n        .attr(\"x2\", (d) => d.target.x)\r\n        .attr(\"y2\", (d) => d.target.y);\r\n};\r\nconst updateGraph = (selection) => {\r\n    \r\n    selection.selectAll('.node')\r\n        .call(updateNode);\r\n        // .call(drag);\r\n    selection.selectAll('.link')\r\n        .call(updateLink);\r\n\r\n    var zoom = d3.zoom()\r\n        .scaleExtent([0.6,2])\r\n        .on('zoom', function(d) {\r\n            console.log(\"zoom\",d3.event.transform.k,14/(d3.event.transform ?d3.event.transform.k : 1));\r\n            selection.select('g').attr(\"transform\", d3.event.transform);\r\n            selection.selectAll('text').style('font-size',14/(d3.event.transform ?d3.event.transform.k : 1));\r\n            // selection.selectAll('.node').attr(\"fontSize\",14/(d3.event.transform ? d3.event.transform : 1));\r\n          });\r\n    selection.select('.graphContainer')\r\n    .call(zoom);\r\n};\r\n\r\n\r\nfunction CheckDirectNodes(index,BFSinput) {\r\n    var ans=[]\r\n    for (var i in BFSinput) {\r\n        if(BFSinput[i].includes(index)){\r\n            ans.push(parseInt(i));\r\n        }\r\n      }\r\n    console.log(\"CheckDirectNodes\")\r\n    return ans;\r\n}\r\n\r\nclass Graph extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            HighlightNodes: this.props.HighlightNodesAtIndex,\r\n            DirectNodes:this.props.DirectNodesAtIndex,\r\n            // PopoverIndexes:[],\r\n            studentslist : []\r\n        };\r\n        \r\n        this.SetHighlightNodes = this.SetHighlightNodes.bind(this);\r\n        // this.SetPopoverIndexes = this.SetPopoverIndexes.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        this.d3Graph = d3.select(ReactDOM.findDOMNode(this));\r\n        var force = d3.forceSimulation(this.props.data.concept_relationship.nodes);\r\n\r\n        firebase.database().ref(\"/change\").on(\"value\", snapshot => {\r\n            let studentlist = [];\r\n            snapshot.forEach(snap => {\r\n                // snap.val() is the dictionary with all your keys/values from the 'students-list' path\r\n                var data = snap.val();\r\n                console.log(\"snap.val=\",snap.val());\r\n                //var data = data.replace(\"<p>\",\"\").replace(\"</p>\",\"\");\r\n                studentlist.push(data);\r\n                console.log(data);\r\n            });\r\n            this.setState({ studentslist: studentlist });\r\n        });\r\n\r\n        \r\n        force.on('tick', () => {\r\n            force\r\n            .force(\"charge\", d3.forceManyBody().strength(-50))\r\n            .force(\"link\", d3.forceLink(this.props.data.concept_relationship.links).distance(function(d) {return (1/((d.similarity+0.5))*200);}).strength(0.1))\r\n            .force(\"center\", d3.forceCenter().x(this.props.width*0.6 / 2).y(this.props.height / 2))\r\n            // .force(\"collide\", d3.forceCollide([5]).iterations([5]))\r\n            // const node = d3.selectAll('g').call(drag);\r\n            this.d3Graph.call(updateGraph)\r\n        });\r\n    }\r\n    \r\n    SetHighlightNodes(index){\r\n        var ans = CheckDirectNodes(index,this.props.data.BFSinput[index]);\r\n        // console.log(\"hhh\",this.props.data.highlight_nodes[index]);\r\n        \r\n        this.setState(\r\n            {\r\n                HighlightNodes:this.props.data.highlight_nodes[index],\r\n                DirectNodes:ans\r\n            }\r\n        );\r\n        this.props.SetHighlightNodesAtIndex(this.props.data.highlight_nodes[index]);\r\n        this.props.SetDirectNodesAtIndex(ans);\r\n    }\r\n    readFirebase()\r\n    {\r\n        var db = firebase.database();\r\n        db.ref(\"/save\").on(\"value\",function (snapshot){\r\n                \r\n                var studentlist = [];\r\n                var data_db= snapshot.val().contents.replace(\"<p>\",\"\").replace(\"</p>\",\"\");\r\n                studentlist.push(data_db);\r\n                \r\n            });\r\n        this.setState(\r\n            {\r\n                studentslist:studentlist\r\n            }\r\n        );\r\n        console.log(\"reading db complete ...\")\r\n            \r\n    }\r\n    \r\n    \r\n    render() {\r\n        console.log(\"nodes = \", this.props.data.concept_relationship.nodes);\r\n        var nodes = this.props.data.concept_relationship.nodes.map( (node) => {\r\n            try{\r\n                /*if(data_db.includes(node.name))\r\n                {\r\n                    return (\r\n                        <Node\r\n                            data={node}\r\n                            name={node.name}\r\n                            key={\"node\"+node.index}\r\n                            // enterNode = {enterNode}\r\n                            updateNode = {updateNode}\r\n                            // OpenDrawer = {(text) =>this.props.OpenDrawer(text)}\r\n                            SetHighlightNodes = {this.SetHighlightNodes}\r\n                            HighlightNodes = {this.state.HighlightNodes}\r\n                            DirectNodes = {this.state.DirectNodes}\r\n                            HoverConceptIndex = {this.props.HoverConceptIndex}\r\n                            SetHoverConceptIndex={this.props.SetHoverConceptIndex}\r\n                            ClearHoverConcept = {this.props.ClearHoverConcept}\r\n                            Path_ConceptIndex={this.props.Path_ConceptIndex} \r\n                            SetPath_ConceptIndex={this.props.SetPath_ConceptIndex==-1}\r\n                            ConceptRange={this.props.ConceptRange}\r\n                            HighlightNodeText={this.props.HighlightConceptIndex}\r\n                            BigCircleIndex={this.props.BigCircleIndex==null?this.props.Path_ConceptIndex:this.props.BigCircleIndex}\r\n                            SetHightlightWord={this.state.SetHightlightWord}\r\n                        />\r\n                        );\r\n                }\r\n                else*/ if(( this.props.src ==\"ApprovPanel\" ) && (node.group==2) )\r\n                {\r\n                    console.log(\"group==1!\")\r\n                    return (\r\n               \r\n                        <Node\r\n                            data={node}\r\n                            name={node.name}\r\n                            key={\"node\"+node.index}\r\n                            // enterNode = {enterNode}\r\n                            updateNode = {updateNode}\r\n                            // OpenDrawer = {(text) =>this.props.OpenDrawer(text)}\r\n                            SetHighlightNodes = {this.SetHighlightNodes}\r\n                            HighlightNodes = {this.state.HighlightNodes}\r\n                            ClearHoverConcept = {this.props.ClearHoverConcept}\r\n                            DirectNodes = {this.state.DirectNodes}\r\n                            HoverConceptIndex = {this.props.HoverConceptIndex}\r\n                            SetHoverConceptIndex={this.props.SetHoverConceptIndex}\r\n                            Path_ConceptIndex={this.props.Path_ConceptIndex} \r\n                            SetPath_ConceptIndex={this.props.SetPath_ConceptIndex}\r\n                            ConceptRange={this.props.ConceptRange}\r\n                            HighlightNodeText={this.props.HighlightConceptIndex}\r\n                            BigCircleIndex={this.props.BigCircleIndex==null?this.props.Path_ConceptIndex:this.props.BigCircleIndex}\r\n                            SetHightlightWord={this.state.SetHightlightWord}\r\n                            updated={true}\r\n                        />\r\n                        \r\n                        );\r\n    \r\n                }else{\r\n                    return(\r\n                    <Node\r\n                        data={node}\r\n                        name={node.name}\r\n                        key={\"node\"+node.index}\r\n                        // enterNode = {enterNode}\r\n                        updateNode = {updateNode}\r\n                        // OpenDrawer = {(text) =>this.props.OpenDrawer(text)}\r\n                        SetHighlightNodes = {this.SetHighlightNodes}\r\n                        HighlightNodes = {this.state.HighlightNodes}\r\n                        \r\n                        DirectNodes = {this.state.DirectNodes}\r\n                        HoverConceptIndex = {this.props.HoverConceptIndex}\r\n                        SetHoverConceptIndex={this.props.SetHoverConceptIndex}\r\n                        ClearHoverConcept = {this.props.ClearHoverConcept}\r\n                        Path_ConceptIndex={this.props.Path_ConceptIndex} \r\n                        SetPath_ConceptIndex={this.props.SetPath_ConceptIndex}\r\n                        ConceptRange={this.props.ConceptRange}\r\n                        HighlightNodeText={this.props.HighlightConceptIndex}\r\n                        BigCircleIndex={this.props.BigCircleIndex==null?this.props.Path_ConceptIndex:this.props.BigCircleIndex}\r\n                        SetHightlightWord={this.props.SetHightlightWord}\r\n                    />)\r\n                }\r\n            }\r\n            catch (err){\r\n                //console.log(err);\r\n                return (\r\n               \r\n                    <Node\r\n                        data={node}\r\n                        name={node.name}\r\n                        key={\"node\"+node.index}\r\n                        // enterNode = {enterNode}\r\n                        updateNode = {updateNode}\r\n                        // OpenDrawer = {(text) =>this.props.OpenDrawer(text)}\r\n                        SetHighlightNodes = {this.SetHighlightNodes}\r\n                        HighlightNodes = {this.state.HighlightNodes}\r\n                        \r\n                        DirectNodes = {this.state.DirectNodes}\r\n                        HoverConceptIndex = {this.props.HoverConceptIndex}\r\n                        SetHoverConceptIndex={this.props.SetHoverConceptIndex}\r\n                        ClearHoverConcept = {this.props.ClearHoverConcept}\r\n                        Path_ConceptIndex={this.props.Path_ConceptIndex} \r\n                        SetPath_ConceptIndex={this.props.SetPath_ConceptIndex}\r\n                        ConceptRange={this.props.ConceptRange}\r\n                        HighlightNodeText={this.props.HighlightConceptIndex}\r\n                        BigCircleIndex={this.props.BigCircleIndex==null?this.props.Path_ConceptIndex:this.props.BigCircleIndex}\r\n                        SetHightlightWord={this.props.SetHightlightWord}\r\n                    />\r\n                    \r\n                    );\r\n                }\r\n               \r\n      \r\n            \r\n            });\r\n        \r\n        var links = this.props.data.concept_relationship.links.map( (link,i) => {\r\n            return (\r\n                <Link\r\n                    key = {\"link\"+i}\r\n                    // key={link.target+i}\r\n                    data={link}\r\n                    enterLink = {enterLink}\r\n                    updateLink = {updateLink}\r\n                    HighlightNodes = {this.state.HighlightNodes}\r\n                    SetHightlightWord={this.props.SetHightlightWord}\r\n                />);\r\n        });\r\n        \r\n        // var PopoverNodes = this.props.data.concept_relationship.nodes.map( (node) => {\r\n        //     if(this.props.Path_ConceptIndex===node.index){\r\n        //         return(\r\n        //             <g>\r\n        //                 <PopoverNode \r\n        //                     key={\"PopoverNode\"+node.index}\r\n        //                     data={node}\r\n        //                     video_info = {this.props.data.videos_info}\r\n        //                     updateNode = {updateNode}\r\n        //                     SetPopoverIndexes = {this.props.SetPopoverIndexes}\r\n        //                     SentRange = {this.props.SentRange}\r\n        //                     SetHoverVideoIndex = {this.props.SetHoverVideoIndex}\r\n        //                     HoverVideoIndex = {this.props.HoverVideoIndex}\r\n        //                 />\r\n        //             </g>\r\n        //         );\r\n        //     }\r\n        //     return (\r\n        //         null\r\n        //     );\r\n        // });\r\n        console.log(\"nodes = \", nodes);\r\n        console.log(\"links = \", links);\r\n        return (\r\n            <div width={this.props.width} height={this.props.height} style={styles.root} >\r\n                    <svg className=\"graph\" width={(this.props.width)} height={this.props.height} style={styles.root2}>\r\n                        <g className='graphContainer'>\r\n                        <defs>\r\n                        <marker id=\"markerArrow\" viewBox=\"0 -4 10 10\" markerWidth=\"7\" markerHeight=\"7\" refX=\"28\" refY=\"0\" orient=\"auto\" xoverflow=\"visible\" >\r\n                            <path d=\"M0,-4 L10 ,0 L0,4\" fill=\"#5b5b5b\" stroke = \"#5b5b5b\"/>\r\n                        </marker>\r\n                        </defs>\r\n                        <g>\r\n                            {links}\r\n                        </g>\r\n                        <g>\r\n                            {nodes}\r\n                        </g>\r\n                        <g>\r\n                            <Masker \r\n                                width={this.props.width} \r\n                                height={this.props.height}\r\n                                Path_ConceptIndex={this.props.Path_ConceptIndex} \r\n                                SetPath_ConceptIndex ={this.props.SetPath_ConceptIndex}\r\n                            />\r\n                        </g>\r\n                        <g>\r\n                            {/* {PopoverNodes} */}\r\n                            {/* {this.renderMask()} */}\r\n                        </g>\r\n                        </g>\r\n                        \r\n\r\n                    </svg>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default Graph;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\n\r\nconst styles = ({\r\n    // root: {\r\n    //     // flexGrow: 1,\r\n    //     overflowX: \"scroll\",\r\n    //     overflowY: \"scroll\",\r\n    //   },\r\n      \r\n});\r\n\r\nclass MarkerIcon extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    \r\n    render() {\r\n        // console.log(\"markerIcon\",this.props);\r\n        return (\r\n            // <div style={styles.root}>\r\n            <svg \r\n                x={this.props.cx==undefined?0:this.props.cx}\r\n                y={this.props.cx==undefined?0:this.props.cy} \r\n                width={(this.props.radius)*2} height={(this.props.radius)*2} \r\n                viewBox={\"0 0 \"+(this.props.radius+2)*2+\" \"+(this.props.radius+2)*2}>\r\n                \r\n                <circle cx={this.props.radius+2}\r\n                        cy={this.props.radius+2}\r\n                        r={this.props.radius}\r\n                        stroke=\"white\"\r\n                        strokeWidth=\"2\"\r\n                        fill={this.props.color}/>\r\n                <text fontSize={this.props.radius*2-10}\r\n                    fill=\"white\"\r\n                    // font-family=\"Verdana\"\r\n                    textAnchor=\"middle\"\r\n                    alignmentBaseline=\"baseline\"\r\n                    x={this.props.radius+2}\r\n                    y={(this.props.radius+1)*3/2}>{this.props.text}</text>\r\n            </svg>\r\n        // </div>\r\n        );\r\n    }\r\n    \r\n}\r\nexport default MarkerIcon;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport MarkerIcon from './MarkerIcon';\r\nimport * as d3 from \"d3\";\r\n\r\nconst styles = ({\r\n    container:{\r\n        display: 'flex',\r\n        flexDirection: \"column\",\r\n        paddingTop:15,\r\n    },\r\n    ItemContainer:{\r\n        display: 'flex',\r\n        flexDirection: \"row\",\r\n    },\r\n    ImageContainer:{\r\n        padding:5,\r\n    },\r\n    rowContainer:{\r\n        //  display: 'flex',\r\n        // flexDirection: \"column\",\r\n    },\r\n    videoImage:{\r\n        // width: 100,\r\n        // height: 50,\r\n        // fill: \"grey\",\r\n    },\r\n    timeLabel:{\r\n        fontSize:12,\r\n        fill:\"white\",\r\n        fontFamily:\"Gadugi\",\r\n    },\r\n});\r\nfunction VideoShadow(Hightlight){\r\n    if(Hightlight){\r\n        return{stroke:\"\t#ff7575\", strokeWidth:6, strokeOpacity:0.8};\r\n    }\r\n    else{\r\n        return{};\r\n    }\r\n}\r\nclass VideoSequence extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        };\r\n        this.handleHover = this.handleHover.bind(this);\r\n        this.handleHoverOut = this.handleHoverOut.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n    handleHover(vid,index){\r\n        console.log(\"[hover],VideoSequence\",\",\",vid,\",\",index);\r\n        this.props.SetHoverVideoIndex(vid);\r\n    }\r\n    handleClick(vid,index){\r\n        console.log(\"[click],VideoSequence\",\",\",vid,\",\",index);\r\n    }\r\n\r\n    handleHoverOut(){\r\n        this.props.SetHoverVideoIndex(null);\r\n    }\r\n    SentimentColor(score){\r\n        var sentmin = this.props.SentRange[0]<0? this.props.SentRange[0]:-0.1;\r\n        var color = d3.scaleLinear()\r\n            .domain([sentmin,0,this.props.SentRange[1]-0.1])\r\n            .range([\"red\",\"yellow\", \"green\"])\r\n            .interpolate(d3.interpolateHcl);\r\n        return color(score);      \r\n    }\r\n    TimeProcess(str){\r\n        if (str.indexOf('S') > -1){\r\n            return str.replace(\"PT\",\"\").replace(\"H\",\":\").replace(\"M\",\":\").replace(\"S\",\"\");\r\n        }else{\r\n            return str.replace(\"PT\",\"\").replace(\"H\",\":\").replace(\"M\",\":00\");\r\n        }\r\n    }\r\n    render() {\r\n        if(this.props.video_sequences!=undefined){\r\n            var ShowVideoItems = this.props.video_sequences.map( ([vid,cnnt],index) => {\r\n            // console.log(this.props.video_info[vid].thumbnail);\r\n            return(\r\n                <div key={\"videoSeqItem\"+index} style = {styles.ItemContainer}>\r\n                    <div>\r\n                    <MarkerIcon text={index+1} \r\n                        radius={13}\r\n                        // color={\"#21435F\"}\r\n                        color={this.SentimentColor(this.props.video_info[vid].userFeedbackScore)}\r\n                        />\r\n                    </div>\r\n                    <div style={{paddingLeft:5 ,width:\"\"}}>\r\n                        <Typography variant=\"title\" component=\"h2\">\r\n                        <a href={\"https://www.youtube.com/watch?v=\"+vid} \r\n                        target=\"_blank\"\r\n                        onMouseOver={this.handleHover.bind(this,vid,index)}\r\n                        onMouseOut={this.handleHoverOut.bind(this)}\r\n                        onClick={this.handleClick.bind(this,vid,index)}\r\n                        >\r\n                        {this.props.video_info[vid].title}\r\n                        </a>\r\n                        </Typography>\r\n                    <g>\r\n                        <div style ={styles.ImageContainer}>\r\n                            <svg height=\"18\" width=\"38\">\r\n                            <rect  x={0} \r\n                                    y={0} \r\n                                    width=\"37\" height=\"15\"\r\n                                    rx=\"3\"\r\n                                    ry=\"3\"\r\n                                    style={{fill:\"#111111\", opacity: 0.7}}> \r\n                                </rect>\r\n                                <text\r\n                                    x={18} \r\n                                    y={12}\r\n                                    textAnchor=\"middle\"\r\n                                    style={styles.timeLabel}\r\n                                >{this.TimeProcess(this.props.video_info[vid].duration)}\r\n                                </text>\r\n                        </svg>\r\n                        {/* <svg width=\"170\" height=\"120\">\r\n                            <pattern id = {\"VideoSeqImage\"+vid} height = \"100%\" width = \"100%\" patternContentUnits = \"objectBoundingBox\">\r\n                            <image xlinkHref = {this.props.video_info[vid].thumbnail} preserveAspectRatio = \"xMidYMid meet\" height = \"1\"/>\r\n                            </pattern>\r\n                            <rect key={vid+\"VideoSeqImage\"} \r\n                                fill={\"url(#VideoSeqImage\"+vid+\")\"} \r\n                                width=\"160\" \r\n                                height=\"120\"\r\n                                // style = {styles.videoImage}\r\n                                // style = {Object.assign({}, styles.videoImage, {stroke:\"#ff5151\", strokeWidth:5, strokeOpacity:0.8})}\r\n                                style = {Object.assign({}, styles.videoImage, VideoShadow(vid===this.props.HoverVideoIndex))}\r\n                                onMouseOver={this.handleHover.bind(this,vid)}\r\n                                onMouseOut={this.handleHoverOut.bind(this)} >\r\n                            </rect>\r\n                        </svg> */}\r\n                        </div>\r\n                    {/* <hr></hr> */}\r\n                    </g>\r\n                    </div>\r\n                    \r\n                </div>\r\n                \r\n            )\r\n            });\r\n        }\r\n\r\n        return (\r\n            <div style = {styles.container}>\r\n                {ShowVideoItems}\r\n            </div>\r\n            \r\n        );\r\n    }\r\n}\r\nexport default VideoSequence;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport * as d3 from \"d3\";\r\n\r\n\r\n\r\nconst styles = ({\r\n    path:{\r\n        fill: \"none\",\r\n        stroke: \"#222222\",\r\n        strokeWidth: 2,\r\n\t\tstrokeOpacity: 0.6,\r\n\t\tcursor: \"pointer\",\r\n    }\r\n      \r\n});\r\nvar line = d3.line()\r\n        // .curve(d3.curveCardinal.tension(0))\r\n        .curve(d3.curveMonotoneY)\r\n        .x(function(d) { return d.x; })\r\n        .y(function(d) { return d.y; });\r\n        \r\n\r\n\r\nclass CardinalPath extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            PathHovered:false,\r\n        }\r\n        this.PathHover = this.PathHover.bind(this);\r\n    }\r\n\r\n    PathHover(){\r\n        // console.log(\"pathHover\");\r\n        this.setState({\r\n            PathHovered : !this.state.PathHovered,\r\n        });\r\n    }\r\n    \r\n    render() {\r\n        // console.log(\"learingmap\",this.props);\r\n        return (\r\n            <svg>\r\n                <defs>\r\n                <marker id=\"CardinalMarker\" viewBox=\"0 -5 10 10\" refX=\"10\" refY=\"0\" markerWidth=\"3\" markerHeight=\"3\" orient=\"auto\">\r\n                <path d=\"M0,-5L10,0L0,5\"/>\r\n                </marker>\r\n                </defs>\r\n                <path \r\n                    d={line(this.props.data)}\r\n                    style={styles.path}\r\n                    opacity={this.state.PathHovered?1:0.3}\r\n                    onMouseEnter ={this.PathHover.bind(this)}\r\n                    onMouseLeave ={this.PathHover.bind(this)}\r\n                    markerEnd={\"url(#CardinalMarker)\"}\r\n                >\r\n                </path>\r\n            </svg>\r\n        );\r\n    }\r\n    \r\n}\r\nexport default CardinalPath;","// refer to : http://davidstutz.github.io/d3-topological/\r\n//refer to : https://github.com/davidstutz/d3-topological/blob/master/index.html\r\n\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport * as d3 from \"d3\";\r\nimport CardinalPath from \"./CardinalPath\";\r\n\r\nvar cx = 45;//\r\nvar radius = 6;\r\n\r\nconst styles = ({\r\n    conceptSeqGraph:{\r\n        paddingTop: 10,\r\n        marginTop:10,\r\n        width:250,\r\n        // height:900,\r\n    },\r\n    label:{\r\n        // fontSize:16,\r\n    },\r\n    circle:{\r\n        cursor: \"pointer\"\r\n    }\r\n});\r\nconst enterNode = (selection) => {\r\n    selection.select('circle')\r\n         .attr(\"r\", 20)\r\n        // .style(\"fill\", function(d) { return '#009FCC' })\r\n\r\n    selection.select('text')\r\n        .attr(\"dx\", 15)\r\n        .attr(\"dy\", 18)\r\n        .style(\"fontSize\", \"12\")\r\n        // .style(\"transform\", \"translateX(-50%,-50%\")\r\n};\r\nfunction ylocation(index) {\r\n    return index*60 + 15 ; \r\n}\r\n\r\nfunction calculatePath(dependencies,c_sequences,side){\r\n    var result = []\r\n    if(side===\"left\"){\r\n        var xloc = cx - radius;\r\n        var xloc_mid = cx - 40 ;\r\n    }else if (side==\"right\"){\r\n        var xloc = cx + radius;\r\n        var xloc_mid = cx + 45 ;\r\n    }\r\n    // console.log(\"dependencies\",dependencies,c_sequences);\r\n    Object.keys(dependencies).map(function(key) {\r\n        var v = dependencies[key].map((index2)=>{\r\n            var num1 = c_sequences.indexOf(parseInt(key));\r\n            var num2 = c_sequences.indexOf(index2);\r\n            result.push( {\r\n                points:[\r\n                    {\r\n                        x: xloc,//cx - radius,\r\n                        y: ylocation(num1),\r\n                    }, {\r\n                        x: xloc_mid,//cx - 60 ,\r\n                        y: (ylocation(num1) + ylocation(num2))/2,\r\n                    }, {\r\n                        x: xloc,//cx -radius,\r\n                        y: ylocation(num2),\r\n                    }\r\n                ]\r\n            });\r\n        });\r\n    });\r\n    return result;\r\n}     \r\nfunction TextStyle(HighlightConcepts,index){\r\n    if(HighlightConcepts!=null){\r\n        if(HighlightConcepts.includes(index)){\r\n            // return {fill:\"red\"};\r\n            return {textShadow:\"0px 0px 15px #ff7575,0px 0px 15px #ff5151\"};\r\n        }else{\r\n            return  {fill:\"black\"};\r\n        }\r\n    }\r\n    return {fill:\"black\"};\r\n}\r\n\r\n\r\nclass ConceptSequence extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            PathHovered: false,\r\n        };\r\n        this.PathHover = this.PathHover.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n    componentWillMount(){\r\n        var circles = d3.select('#topological')\r\n                        .selectAll('circle');\r\n    }\r\n    PathHover(){\r\n        this.setState({\r\n            PathHovered: true,\r\n        })\r\n    }\r\n    handleClick(e,number,name){\r\n        console.log(\"[click],ConceptSequenceNode\",\",\",name,\",\",number,\",\",e);\r\n        this.props.SetBigCircleIndex(e);\r\n    };\r\n    ClickedNode(highlight,cx,cy){\r\n        if(highlight==true){\r\n            return(\r\n                <circle \r\n                    cx={cx}\r\n                    cy={cy}\r\n                    fill=\"#AAAAAA\"    \r\n                    r={15}\r\n                    opacity={0.4} >  \r\n                    </circle>\r\n            );\r\n        }\r\n    }\r\n\r\n    render() {\r\n        var this_tmp = this;\r\n        \r\n        // console.log(\"thisprops\",this.props.BFSinput,this.props.c_index,this.props.concepts,this.props.concept_sequences);\r\n        if(this.props.c_index!=null){\r\n            var c_sequences = this.props.concept_sequences[this.props.c_index];\r\n            if(c_sequences[0]==\"cycle\"){\r\n                return(\r\n                    <p>cycle!</p>\r\n                )\r\n            }\r\n            // console.log(this.props.BFSinput[this.props.c_index]);\r\n            var nodes = c_sequences.map( (conceptnode,number) => {\r\n                // console.log(\"CheckConceptSeq\",conceptnode,this.props.BigCircleIndex);\r\n                return (\r\n                    <svg key={\"conceptSeqnode\"+number}>\r\n                    <circle key={conceptnode+number} \r\n                        cx={cx} \r\n                        cy={ylocation(number)} \r\n                        r={radius}\r\n                        style={styles.circle}\r\n                        fill={this.props.c_index===conceptnode?'\t#444444':'#009FCC'}//fill=\"#009FCC\" \r\n                        onClick={this.handleClick.bind(this,conceptnode,number,this.props.concepts[conceptnode].name)}\r\n                    >      \r\n                    </circle>\r\n                    {this.ClickedNode(this.props.BigCircleIndex==null?conceptnode==this.props.c_index:conceptnode==this.props.BigCircleIndex,cx,ylocation(number))}\r\n                    <text  x={cx+10} y={ylocation(number)+4} style={TextStyle(this.props.HighlightConceptIndex,this.props.concepts[conceptnode].index)}>{this.props.concepts[conceptnode].name} </text>\r\n                    </svg>\r\n                );\r\n            });\r\n            var dependencies = this.props.BFSinput[this.props.c_index];\r\n            var pathsdata = calculatePath(dependencies,c_sequences,\"left\");\r\n            var paths = Object.keys(pathsdata).map(function(key) {\r\n                // console.log(\"checkpath\",pathsdata[key]);\r\n                return(\r\n                    <CardinalPath key={\"cardinalpath\"+key} data={pathsdata[key].points} style = {styles.path}/>\r\n                )\r\n                \r\n            });\r\n            // console.log(this.props.RemovedCycleLinks[this.props.c_index]);\r\n            var cycle_pathsdata = calculatePath(this.props.RemovedCycleLinks[this.props.c_index],c_sequences,\"right\");\r\n            var cycle_paths = Object.keys(cycle_pathsdata).map(function(key) {\r\n                // console.log(\"checkpath\",pathsdata[key]);\r\n                return(\r\n                    <CardinalPath key={\"cyclepath\"+key} data={cycle_pathsdata[key].points} style = {styles.path}/>\r\n                )\r\n                \r\n            });\r\n           \r\n            return(\r\n                <div id=\"topological\" >\r\n                    <svg className=\"ConceptSeqGraph\" height={60*c_sequences.length} style ={styles.conceptSeqGraph} >\r\n                        <g>\r\n                            {nodes}\r\n                            \r\n                        </g>\r\n                        <g>\r\n                            {paths}\r\n                        </g>\r\n                        <g>\r\n                            {cycle_paths}\r\n                        </g>\r\n                    </svg>\r\n                </div>\r\n            )\r\n        }\r\n        return (\r\n            <p>{this.props.c_index}</p>\r\n            \r\n        );\r\n    }\r\n}\r\nexport default ConceptSequence;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport * as d3 from \"d3\";\r\n// import { typography } from 'material-ui/styles';\r\n\r\nconst styles = ({\r\n    root: {\r\n        // width: 200,\r\n        // height:800,\r\n        position: 'absolute',\r\n        top:120,\r\n        left: 30,\r\n        zIndex: 5,\r\n      },\r\n      heading:{\r\n        fontSize:14,\r\n    },\r\n      constainer:{\r\n        display: 'flex',\r\n        flexDirection: \"column\",\r\n        flexWrap: 'wrap',\r\n      },\r\n      ColorLegend:{\r\n        display: 'flex',\r\n        flexDirection: \"column\",\r\n        flexWrap: 'wrap',\r\n      },\r\n      VideoNodesText:{\r\n        textAnchor:'end'\r\n      },\r\n      \r\n      heading2:{\r\n        fontSize:14,\r\n        fontWeight: \"bold\",\r\n        paddingTop:5,\r\n        paddingBottom:5\r\n    },\r\n});\r\nvar TermCountRange = [];\r\nclass Legend extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // this.state = {\r\n        //     chipdata:this.props.SearchHistory,\r\n        //     SearchKeyword : null,\r\n        // }\r\n        // this.RenderSentcircles = this.RenderSentcircles.bind(this);\r\n    }\r\n\r\n    VideoRadius(index){\r\n        return (38-(index*2.5))\r\n    };\r\n    // RenderSentcircles(){\r\n    //     for (var index = 1; index <8; index++) {\r\n    //         return(\r\n    //             <svg>\r\n    //             <circle fill=\"red\" r=\"3\" cx=\"5\" cy=\"5\"> </circle>\r\n    //             </svg>\r\n    //     );  \r\n    //     }\r\n        \r\n\r\n    // }\r\n    RenderCircle(){\r\n        var MaxRadius=44;\r\n        var numOfCircle=7;\r\n        \r\n    }\r\n    \r\n    \r\n    render() {\r\n        // console.log(\"Legend\",this.props.Path_ConceptIndex);\r\n        //Concept Node\r\n        var scaleX = d3.scaleLinear()\r\n                 .range([6,15])\r\n                 .domain([0,5]);\r\n\r\n        var ConceptNodes=[0,1,2,3,4,5];\r\n        var ConceptNodesCircle = ConceptNodes.map( (index) => {\r\n            return (\r\n                <g key={\"SentcirclesLegend\"+index}>\r\n                <circle cx={10+index*30} cy={40} r={scaleX(index)} fill=\"#555\" opacity=\"0.4\" > </circle>\r\n                </g>\r\n            );\r\n        });\r\n        //Video Node\r\n        var VideoNodes=[0,1,2,3,4,5,6];\r\n        var MaxRadius=44;\r\n        var VideoNodesCircle = VideoNodes.map( (index) => {\r\n            return (\r\n                \r\n                <g key={\"VideoNodesCircle\"+index}>\r\n                <circle \r\n                    cx=\"50\" cy={50+index*2.5} \r\n                    r={MaxRadius-index*2.5} \r\n                    fill=\"none\" \r\n                    opacity=\"0.7\" \r\n                    stroke=\"#666666\" \r\n                    strokeWidth=\"1\"\r\n                    strokeDasharray=\"1\">\r\n                </circle>\r\n                </g>\r\n            );\r\n        });\r\n        if(this.props.Path_ConceptIndex==null){\r\n            return(\r\n                <div style={styles.root}>\r\n                    <ExpansionPanel defaultExpanded={true}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                        <Typography style={styles.heading}>Legend</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <div style={styles.container}>\r\n                                {/* <div ><hr></hr></div> */}\r\n                                <div style={styles.ColorLegend}>\r\n                                    {/* <Typography style={styles.heading2}>Concept Nodes</Typography> */}\r\n                                    <svg height=\"80\" width=\"200\">\r\n                                    <text   y=\"15\" fill=\"black\">Term Frequency</text>\r\n                                    {ConceptNodesCircle}\r\n                                    <text   y=\"75\" fill=\"#888888\">{(this.props.ConceptRange[0]/this.props.ConceptRange[2]).toFixed(2)}</text>\r\n                                    <text x=\"145\" y=\"75\" fill=\"#888888\">{(this.props.ConceptRange[1]/this.props.ConceptRange[2]).toFixed(2)}</text>\r\n                                    </svg>\r\n                                    {/* <div ><hr></hr></div> */}\r\n                                </div>\r\n                            </div>\r\n                        </ExpansionPanelDetails>\r\n                </ExpansionPanel>\r\n            </div>\r\n            );\r\n        }else{\r\n            var tmpList = [];\r\n            for(var e in this.props.data[this.props.BigCircleIndex].videos_id){\r\n                tmpList.push(this.props.data[this.props.BigCircleIndex].videos_id[e][1]);\r\n            };\r\n            // console.log(\"TermCount\",tmpList);\r\n            TermCountRange=[Math.min(...tmpList),Math.max(...tmpList)];\r\n            \r\n            return(\r\n                <div style={styles.root}>\r\n                    <ExpansionPanel>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                        <Typography style={styles.heading}>Legend</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <div style={styles.container}>\r\n                                <div style={styles.ColorLegend}>\r\n                                    {/* <Typography style={styles.heading2}>Video Nodes</Typography> */}\r\n                                    <svg height=\"30\" width=\"200\">\r\n                                        <text y=\"15\" fill=\"black\">Term Count</text>\r\n                                    </svg>\r\n                                    <svg height=\"100\" width=\"200\">\r\n                                        {VideoNodesCircle}\r\n                                        {/* <text x=\"180\" y=\"25\" fill=\"grey\" style={styles.VideoNodesText}> Relevance to the concept</text> */}\r\n                                        <text x=\"150\" y=\"55\" fill=\"#888888\" style={styles.VideoNodesText}> {TermCountRange[1]}</text>\r\n                                        <text x=\"150\" y={55+2.5*6} fill=\"#888888\" style={styles.VideoNodesText}>{TermCountRange[0]}</text>\r\n                                        <line x1={50+MaxRadius} x2={120} y1=\"50\" y2=\"50\" stroke=\"#888888\" ></line>\r\n                                        <line x1={50+MaxRadius-2.5*6} x2={120} y1={50+2.5*6} y2={50+2.5*6} stroke=\"#888888\" ></line>\r\n                                    </svg>\r\n                                </div>\r\n                                <div style={styles.ColorLegend}>\r\n                                    <svg height=\"20\" width=\"200\">\r\n                                    <text   y=\"15\" fill=\"black\">Sentiment</text>\r\n                                    </svg>\r\n                                    <svg height=\"50\" width=\"200\">\r\n                                        <defs>\r\n                                            <linearGradient id=\"ColorLegend\" >\r\n                                                <stop offset=\"5%\"  stopColor=\"red\"/>\r\n                                                <stop offset=\"50%\" stopColor=\"yellow\"/>\r\n                                                <stop offset=\"90%\" stopColor=\"#006030\"/>\r\n                                            </linearGradient>\r\n                                        </defs>\r\n                                        <rect fill=\"url(#ColorLegend)\" opacity=\"0.7\"\r\n                                            y=\"15\" width=\"190\" height=\"15\" />\r\n                                        <text   y=\"45\" fill=\"#888888\">Negative</text>\r\n                                        <text x=\"145\" y=\"45\" fill=\"#888888\">Positive</text>\r\n                                    </svg>\r\n                                </div>\r\n                            </div>\r\n                            {/* {Sentcircles} */}\r\n                        </ExpansionPanelDetails>\r\n                </ExpansionPanel>\r\n            </div>\r\n            );\r\n        }\r\n    }\r\n    \r\n}\r\nexport default Legend;","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { PropTypes } from 'prop-types';\n// import ExpansionPanel from '@material-ui/core/ExpansionPanel';\n// import ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n// import ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\n// import ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport Typography from '@material-ui/core/Typography';\nimport * as d3 from \"d3\";\nimport { TagCloud } from \"react-tagcloud\";\n\nconst styles = ({\n    // root: {\n    //     // width: 200,\n    //     // height:800,\n    //     position: 'absolute',\n    //     left: 600,\n    //     zIndex: 5,\n    //   },\n    //   heading:{\n    //     fontSize:14,\n    // },\n    //   constainer:{\n    //     display: 'flex',\n    //     flexDirection: \"column\",\n    //     flexWrap: 'wrap',\n    //   },\n    //   ColorLegend:{\n    //     display: 'flex',\n    //     flexDirection: \"column\",\n    //     flexWrap: 'wrap',\n    //   },\n    //   VideoNodesText:{\n    //     textAnchor:'end'\n    //   },\n      \n    //   heading2:{\n    //     fontSize:14,\n    //     fontWeight: \"bold\",\n    //     paddingTop:5,\n    //     paddingBottom:5\n    // },\n});\n\nclass WordCloud extends Component {\n    constructor(props) {\n        super(props);\n        // this.state = {\n        //     chipdata:this.props.SearchHistory,\n        //     SearchKeyword : null,\n        // }\n        // this.RenderSentcircles = this.RenderSentcircles.bind(this);\n    }\n    \n    \n    render() {\n        // console.log(\"wordcloud\",this.props);\n        if(this.props.videos_info[this.props.HoverVideoIndex]!=undefined){\n            var data=[];\n            for (var index in this.props.videos_info[this.props.HoverVideoIndex].concepts){\n                if(index<10){\n                    data.push({\n                        value:this.props.videos_info[this.props.HoverVideoIndex].concepts[index][0],\n                        count:this.props.videos_info[this.props.HoverVideoIndex].concepts[index][1]\n                    })\n                }\n            }\n            // console.log(\"Clouddata2\",data);\n        }else{\n            data=[];\n        }\n        \n\n        return (\n            <div style={styles.root}>\n            <TagCloud \n                    minSize={1}\n                    maxSize={35}\n                    tags={data}\n                    style={{color:\"grey\",width: 200,height:100,fontSize: 10}}\n                    disableRandomColor={true}\n            />\n        \n            </div>\n        );\n    }\n    \n}\nexport default WordCloud;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport * as d3 from \"d3\";\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport MarkerIcon from './MarkerIcon';\r\nimport YoutubeIcon from './youtube.png';\r\nconst BigCircleRadius = 130;//150\r\nvar MarkerIndex=[];\r\n// import { withStyles } from '@material-ui/core/styles';\r\nconst styles = {\r\n    circle: {\r\n        cursor: \"pointer\",\r\n        // fill:\"red\",\r\n    }, \r\n    ConceptBigCircle:{\r\n        // fill:\"#B2DFDB\",\r\n        fill: \"#D4D4D4\",\r\n        opacity: 0.55,\r\n        // cursor: \"pointer\",\r\n    },\r\n    Sentcircle:{\r\n        opacity: 0.7,\r\n    },\r\n    conceptlabel:{\r\n        // fontFamily:\"EB Garamond\",\r\n        fontSize:15,\r\n        textAnchor:\"middle\",\r\n        fontStyle:\"italic\",\r\n        textShadow:\"2px 2px 4px #888\"\r\n    },\r\n    timeLabel:{\r\n        fontSize:12,\r\n        fill:\"white\",\r\n        fontFamily:\"Gadugi\",\r\n    },\r\n    videotooptip:{\r\n        maxWidth: 15\r\n    },\r\n    videotooptip_label1:{\r\n        fontSize:14,\r\n        maxWidth: 250,\r\n        // wordBreak: \"break-all\",\r\n        lineHeight: \"17px\",\r\n    },\r\n    videotooptip_label2:{\r\n        fontSize:12,\r\n        maxWidth: 137,\r\n        maxHeight:30,\r\n        overflow : \"hidden\",\r\n        textOverflow : \"ellipsis\",\r\n        whiteSpace : \"nowrap\",\r\n        // wordBreak: \"break-all\",\r\n        lineHeight: \"15px\",\r\n    }\r\n  };\r\n\r\n  \r\n  function CircleShadow(Hightlight){\r\n    if(Hightlight){\r\n        return{stroke:\"#ff7575\", strokeWidth:3, strokeOpacity:0.8};\r\n    }\r\n    else{\r\n        return{};\r\n    }\r\n}\r\n  \r\n\r\nclass RelatedVideosPanel extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            tooltip_open:false,\r\n            // markIndex:[], // if markerlabel already have\r\n            // anchorEl: null,\r\n            // NodeClicked: false\r\n        };\r\n        this.Location = this.Location.bind(this);\r\n        this.VideoRadius = this.VideoRadius.bind(this);\r\n        // this.handleClose = this.handleClose.bind(this);\r\n        this.handleHover = this.handleHover.bind(this);\r\n        this.handleHoverOut = this.handleHoverOut.bind(this);   \r\n        this.videoClick = this.videoClick.bind(this);\r\n        this.YoutubeIconClick = this.YoutubeIconClick.bind(this);\r\n        // this.CheckMarkerIndex = this.CheckMarkerIndex.bind(this);  \r\n        this.RenderNumMarker = this.RenderNumMarker.bind(this);  \r\n        \r\n    }\r\n    \r\n    componentWillMount(){\r\n        MarkerIndex=[];\r\n    }\r\n    componentWillUpdate(prevProps) {\r\n        // Typical usage (don't forget to compare props):\r\n        if (this.props.data !== prevProps.data) {\r\n            MarkerIndex=[];\r\n        }\r\n      }\r\n\r\n    Location(index,numNodes,r){\r\n        var radius = r + index *2.5;// var radius = 100 + index *2.5;\r\n        var angle = (index / (numNodes/2)) * Math.PI - 1/2*Math.PI;\r\n        var cx = (radius * Math.cos(angle));\r\n        var cy = (radius * Math.sin(angle));\r\n        return [cx,cy];\r\n    }\r\n    VideoRadius(index){\r\n        // return (44-(index*2.5));\r\n        return (38-(index*2.5));\r\n    }\r\n    SentimentColor(score){\r\n        // console.log(this.props.SentRange);\r\n        var sentmin = this.props.SentRange[0]<0? this.props.SentRange[0]:-0.1;\r\n        var color = d3.scaleLinear()\r\n            .domain([sentmin,0,this.props.SentRange[1]-0.1])\r\n            .range([\"red\",\"yellow\", \"green\"])\r\n            .interpolate(d3.interpolateHcl);\r\n        return color(score);      \r\n    }\r\n    \r\n    // handleClose(){\r\n    //     this.props.SetPopoverIndexes(\"remove\",this.props.data.index);\r\n    // }\r\n    handleHover(vid,index){\r\n        console.log(\"[hover],RelatedVideos\",\",\",vid,\",\",index);\r\n        this.props.SetHoverVideoIndex(vid);\r\n    }\r\n    videoClick(vid,index){\r\n        console.log(\"[click],RelatedVideos\",\",\",vid,\",\",index);\r\n        this.props.SetVideoId(vid);\r\n        this.props.SetProgress(4);\r\n    }\r\n    handleHoverOut(){\r\n        this.props.SetHoverVideoIndex(null);\r\n    }\r\n\r\n    SentimentColor(score){\r\n        var sentmin = this.props.SentRange[0]<0? this.props.SentRange[0]:-0.1;\r\n        var color = d3.scaleLinear()\r\n            .domain([sentmin,0,this.props.SentRange[1]-0.1])\r\n            .range([\"red\",\"yellow\", \"green\"])\r\n            .interpolate(d3.interpolateHcl);\r\n        return color(score);      \r\n    }\r\n    TimeProcess(str){\r\n        if (str.indexOf('S') > -1){\r\n            return str.replace(\"PT\",\"\").replace(\"H\",\":\").replace(\"M\",\":\").replace(\"S\",\"\");\r\n        }else{\r\n            return str.replace(\"PT\",\"\").replace(\"H\",\":\").replace(\"M\",\":00\");\r\n        }\r\n    }\r\n    CheckMarkerIndex(index,num){\r\n        if ((index==0 && num>0)||(index==1 && num>0)){\r\n            \r\n            MarkerIndex.push(index);\r\n            // console.log(\"MarkerIndex\",MarkerIndex);\r\n            // this.setState({\r\n            //     markIndex: [...this.state.markIndex, index]\r\n            // });\r\n        }\r\n    }\r\n    RenderNumMarker(vid,index,num,x,y,userFeedbackScore){\r\n        // console.log(\"RenderNumMarker\",vid,index,num);\r\n        x = (x-13)-13;\r\n        y = (y-13)-18;\r\n        if (index==0 && num>0 && MarkerIndex[0]==index){\r\n            // this.props.setFlag(true);\r\n            return(\r\n                <MarkerIcon \r\n                    cx={x}\r\n                    cy={y}\r\n                    text={num} \r\n                    radius={13}\r\n                    // color={\"#21435F\"}\r\n                    color={this.SentimentColor(userFeedbackScore)}\r\n                />\r\n            );\r\n        }else if (index==1 && num>0 &&MarkerIndex[0]==index){\r\n            // this.props.setFlag(true);\r\n            return(\r\n                <MarkerIcon \r\n                    cx={x}\r\n                    cy={y}\r\n                    text={num} \r\n                    radius={13}\r\n                    color={this.SentimentColor(userFeedbackScore)}\r\n                    // color={this.SentimentColor(this.props.video_info[vid].userFeedbackScore)}\r\n                />\r\n            )\r\n        }else{\r\n            return null\r\n        }\r\n    }\r\n    YoutubeIconClick(){\r\n        console.log(\"[click],YoutubeSearch\",\",\",this.props.data.name);\r\n    }\r\n    render() {\r\n        // console.log(\"check data\",this.props.video_sequences);\r\n        var vlist=[]\r\n        if (this.props.video_sequences!=undefined){\r\n            for (var i=0;i<this.props.video_sequences.length;i++) {\r\n                vlist.push(this.props.video_sequences[i][0])\r\n            }\r\n        }\r\n        var width = BigCircleRadius*2;//+60\r\n        var height = width;\r\n        var center= width/2;\r\n        if(this.props.data!=undefined){\r\n            // console.log(\"RelatedVideodata\",this.props);\r\n            var numNodes = this.props.data.videos_id.length;\r\n            var video_info = this.props.video_info;\r\n            var LikesList=[]\r\n            this.props.data.videos_id.map( ([vid,cnnt],index) => {LikesList.push(video_info[vid].likeCount);});\r\n            var likesRange=[Math.min(...LikesList),Math.max(...LikesList)];\r\n            var flag=0;\r\n\r\n            var ShowVideoLinks = this.props.data.videos_id.map( ([vid,cnnt],index) => {\r\n                // console.log(index,vid,vlist.indexOf(vid));\r\n                // console.log(\"video_info[vid].userFeedbackScore\",video_info[vid].userFeedbackScore);\r\n                return(\r\n                    <g key={\"PopoverNode\"+index}>\r\n                        <Tooltip title={<div style={this.state.tooltip_open?styles.videotooptip_label2:styles.videotooptip_label1}\r\n                            enterTouchDelay={0}>\r\n                            {/* {this.props.video_info[vid].title.length>38?this.props.video_info[vid].title.substring(0,38)+\"...\":this.props.video_info[vid].title} */}\r\n                            {this.state.tooltip_open?this.props.video_info[vid].title+\"...\":this.props.video_info[vid].title}\r\n                            </div>} \r\n                                placement=\"top\"\r\n                                open={this.state.tooltip_open?true:null}\r\n                        >\r\n                        {/*<a xlinkHref={\"https://www.youtube.com/watch?v=\"+vid} target=\"_blank\" >*/}\r\n                        <a>\r\n                            <circle key={vid} \r\n                                cx={center+this.Location(index,numNodes,83)[0]} \r\n                                cy={center+this.Location(index,numNodes,83)[1]} \r\n                                r = {this.VideoRadius(index)}\r\n                                fill={this.SentimentColor(video_info[vid].userFeedbackScore)} \r\n                                // style={styles.Sentcircle} \r\n                                style = {Object.assign({}, styles.Sentcircle, CircleShadow(vid===this.props.HoverVideoIndex))}    \r\n                            >\r\n                            </circle>\r\n                            \r\n                            <pattern id = {\"attachedImage\"+vid} height = \"150%\" width = \"150%\" patternContentUnits = \"objectBoundingBox\">\r\n                            <image xlinkHref = {video_info[vid][\"thumbnail\"]} preserveAspectRatio = \"xMidYMid meet\" width = \"1.5\" style={styles.img}/>\r\n                            </pattern>\r\n                            <circle key={vid+\"img\"} \r\n                                cx={center+this.Location(index,numNodes,83)[0]} \r\n                                cy={center+this.Location(index,numNodes,83)[1]} \r\n                                // r={styles.OuterCircle.r-7} \r\n                                r={this.VideoRadius(index)-6} \r\n                                fill={\"url(#attachedImage\"+vid+\")\"} \r\n                                style = {styles.circle} \r\n                                onMouseOver={this.handleHover.bind(this,vid,index)}\r\n                                onMouseOut={this.handleHoverOut.bind(this)} \r\n                                onClick={this.videoClick.bind(this,vid,index)}\r\n                            >\r\n                            </circle>\r\n                        </a>\r\n                        </Tooltip>\r\n                        \r\n                        <rect  x={center+this.Location(index,numNodes,83)[0]-18} \r\n                            y={center+this.Location(index,numNodes,83)[1]+this.VideoRadius(index)-18} \r\n                            width=\"37\" height=\"15\"\r\n                            rx=\"3\"\r\n                            ry=\"3\"\r\n                            style={{full:\"#888888\", opacity: 0.7}}> \r\n                        </rect>\r\n                        <text\r\n                            x={center+this.Location(index,numNodes,83)[0]} \r\n                            y={center+this.Location(index,numNodes,83)[1]+this.VideoRadius(index)-6}\r\n                            textAnchor=\"middle\"\r\n                            style={styles.timeLabel}\r\n                        >{this.TimeProcess(this.props.video_info[vid].duration)}\r\n                        </text>\r\n                        <pattern id = {\"YoutubeImage\"+vid} height = \"100%\" width = \"100%\" patternContentUnits = \"objectBoundingBox\">\r\n                            <image xlinkHref = {YoutubeIcon} preserveAspectRatio = \"xMidYMid meet\" width = \"1\"/>\r\n                        </pattern>\r\n                        \r\n                        <text \r\n                            style={styles.conceptlabel} \r\n                            // dx=\"5\" dy=\"8\"\r\n                            x={center} y={center}   \r\n                        >  \r\n                            {this.props.data.name}\r\n                        </text> \r\n                        {/* Youtube Search Icon */}\r\n                        <a xlinkHref={\"https://www.youtube.com/results?search_query=\"+this.props.data.name} target=\"_blank\" >\r\n                            <rect \r\n                                width=\"28\" \r\n                                height=\"26\"\r\n                                fill={\"url(#YoutubeImage\"+vid+\")\"} \r\n                                x={center-13} y={center+10}  \r\n                                style = {styles.circle} \r\n                                onClick={this.YoutubeIconClick.bind(this)}\r\n                                >\r\n                                <title>Search on Youtube</title>\r\n                            </rect>\r\n                        </a>\r\n                        {this.CheckMarkerIndex(index,vlist.indexOf(vid)+1)}\r\n                        {/* {this.RenderNumMarker(vid,index,vlist.indexOf(vid)+1,center+this.Location(index,numNodes,83)[0],center+this.Location(index,numNodes,83)[1],this.props.video_info[vid].userFeedbackScore)} */}\r\n                    </g>\r\n                )\r\n                \r\n            });\r\n            var ShowMarkerIcons = this.props.data.videos_id.map( ([vid,cnnt],index) => {\r\n                return(\r\n                    <g key={\"ShowMarkerIcons\"+index}> \r\n                        {this.RenderNumMarker(vid,index,vlist.indexOf(vid)+1,center+this.Location(index,numNodes,83)[0],center+this.Location(index,numNodes,83)[1],this.props.video_info[vid].userFeedbackScore)}\r\n                    </g>\r\n                )\r\n                \r\n            });\r\n            return (\r\n                <svg width={width} height={height}>\r\n                <g className='node'>\r\n                    <circle \r\n                        // onClick={this.handleClose.bind(this)}\r\n                        cx={center}\r\n                        cy={center}\r\n                        r={BigCircleRadius} \r\n                        style = {styles.ConceptBigCircle}>  \r\n                    </circle>\r\n                    {ShowVideoLinks}\r\n                    {ShowMarkerIcons}\r\n                </g>\r\n                </svg>\r\n            );\r\n        }\r\n        return (\r\n            <g className='node'  >\r\n                {/* <circle  ref=\"dragMe\" onClick={this.handleClose.bind(this)} r={\"150\"} style = {styles.ConceptBigCircle}></circle> */}\r\n                {/* {ShowVideoLinks} */}\r\n            </g>\r\n        );\r\n    }\r\n}\r\nexport default RelatedVideosPanel;\r\n","export default \"data:image/png;base64,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\"","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport VideoSequence from './VideoSequence';\r\nimport ConceptSequence from './ConceptSequence';\r\nimport RelatedVideosPanel from './RelatedVideosPanel'\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\n\r\n/* editor component */\r\nimport SunEditor from 'suneditor-react';\r\nimport 'suneditor/dist/css/suneditor.min.css'; // Import Sun Editor's CSS File\r\n\r\nconst styles = ({\r\n    rootTitle:{\r\n        // margin:10,\r\n        paddingBottom:20,\r\n        textAlign:\"center\",\r\n        fontSize:20,\r\n        fontFamily:\"Cambria\"\r\n    },\r\n    containerTitle:{\r\n        display:\"flex\",\r\n        fontSize:14,\r\n        fontWeight:\"bold\"\r\n    },\r\n    OuterContainer: {\r\n        display: 'flex',\r\n        flexDirection: \"row\",\r\n        position:\"absolute\",\r\n        // left:930,\r\n        right:'0%',\r\n        flexWrap: 'no-wrap',\r\n        zIndex:6\r\n        // margin:10,\r\n        // padding:10\r\n    },\r\n  \r\n  paper2: {\r\n    width: 520,\r\n    // height: 850,\r\n    overflowX: \"hidden\",\r\n    overflowY: \"scroll\",\r\n    padding: 15,\r\n    margin : 15,\r\n  },\r\n  paper2_UpperContainer: {\r\n    display: 'flex',\r\n    flexDirection: \"column\",\r\n  },\r\n  paper2_BelowContainer: {\r\n    display: 'flex',\r\n    flexDirection: \"row\",\r\n  },\r\n  container3_1: {\r\n    width: 225,\r\n    // height: 500,\r\n  },\r\n  container3_2: {\r\n    width: 265,\r\n    // height: 500,\r\n  },\r\n  CloseBotton: {\r\n    // marginLeft: 5,\r\n    float:\"right\",\r\n    marginRight: 1,\r\n\r\n  },\r\n  content:{\r\n    // display: \"block\",\r\n    margin: \"auto\",\r\n    display:\"flex\"\r\n  }\r\n});\r\n\r\nclass ConceptDetailPanel extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.CloseOnClick = this.CloseOnClick.bind(this);\r\n    }\r\n    CloseOnClick(){\r\n        this.props.SetPath_ConceptIndex(\"clear\",null);\r\n    }\r\n    render() {\r\n\r\n        if(this.props.Path_ConceptIndex!=null){\r\n            return (\r\n                <div style = {styles.OuterContainer}>\r\n                    {/* <Paper style={styles.paper2} elevation={13}> */}\r\n                    <Paper style= {Object.assign({}, styles.paper2, {height:window.innerHeight-130})} elevation={13}>\r\n                    <div style={styles.rootTitle}>\r\n                    {this.props.data.concept_relationship.nodes[this.props.Path_ConceptIndex].name}\r\n                    <IconButton style={styles.CloseBotton} color=\"inherit\" aria-label=\"Close\">\r\n                        <CloseIcon onClick={this.CloseOnClick.bind(this)}/>\r\n                    </IconButton>\r\n                    </div>\r\n                    <div style = {styles.paper2_UpperContainer}>\r\n                        <div style={styles.containerTitle}> Video Ring</div>\r\n                        <div style={styles.content}>\r\n                        <g>\r\n                            <RelatedVideosPanel \r\n                                data={this.props.BigCircleIndex==null?this.props.data.concept_relationship.nodes[this.props.Path_ConceptIndex]:this.props.data.concept_relationship.nodes[this.props.BigCircleIndex]}\r\n                                video_info = {this.props.data.videos_info}\r\n                                concept_index={this.props.BigCircleIndex}// concept_index={this.props.Path_ConceptIndex}\r\n                                // SetPopoverIndexes = {this.props.SetPopoverIndexes}\r\n                                SentRange = {this.props.SentRange}\r\n                                SetHoverVideoIndex = {this.props.SetHoverVideoIndex}\r\n                                HoverVideoIndex = {this.props.HoverVideoIndex}\r\n                                SetProgress = {this.props.SetProgress} \r\n                                video_sequences={this.props.data.video_sequences[this.props.Path_ConceptIndex]}\r\n                                SetVideoId = {this.props.SetVideoId} \r\n                            />\r\n                        </g>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                    <div height=\"5\"><hr></hr></div>\r\n                    <div style = {styles.paper2_BelowContainer}>\r\n                        <div style = {styles.container3_1}>\r\n                        {/* <div style = {Object.assign({}, styles.container3_1, {height:window.innerHeight-900})}> */}\r\n                        \r\n                            <div style={styles.containerTitle}> Concept Path </div>\r\n                            <ConceptSequence  \r\n                                    c_index = {this.props.Path_ConceptIndex} \r\n                                    BFSinput={this.props.data.BFSinput} \r\n                                    RemovedCycleLinks = {this.props.data.RemovedCycleLinks}\r\n                                    concepts={this.props.data.concept_relationship.nodes} \r\n                                    concept_sequences={this.props.data.concept_sequences}\r\n                                    HighlightConceptIndex={this.props.HighlightConceptTextIndex}\r\n                                    BigCircleIndex = {this.props.BigCircleIndex}\r\n                                    SetBigCircleIndex ={this.props.SetBigCircleIndex}\r\n                                    />\r\n                        </div>\r\n                        <div style = {styles.container3_2}>\r\n                        {/* <div style = {Object.assign({}, styles.container3_2, {height:window.innerHeight-900})}> */}\r\n                            <div style={styles.containerTitle}> \r\n                            Video Path\r\n                            </div>\r\n                            <VideoSequence \r\n                                video_sequences={this.props.data.video_sequences[this.props.Path_ConceptIndex]} \r\n                                video_info = {this.props.data.videos_info} \r\n                                SetHoverVideoIndex = {this.props.SetHoverVideoIndex}\r\n                                HoverVideoIndex = {this.props.HoverVideoIndex}\r\n                                SentRange = {this.props.SentRange}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    </Paper>  \r\n                </div>\r\n            );\r\n        }\r\n        return null;\r\n        \r\n    }\r\n}\r\nexport default ConceptDetailPanel;\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport VideoSequence from './VideoSequence';\r\nimport ConceptSequence from './ConceptSequence';\r\nimport RelatedVideosPanel from './RelatedVideosPanel'\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Graph from '../newdirected/Graph';\r\n\r\nconst styles = ({\r\n    rootTitle:{\r\n        // margin:10,\r\n        paddingBottom:20,\r\n        textAlign:\"center\",\r\n        fontSize:20,\r\n        fontFamily:\"Cambria\"\r\n    },\r\n    containerTitle:{\r\n        display:\"flex\",\r\n        fontSize:14,\r\n        fontWeight:\"bold\"\r\n    },\r\n    OuterContainer: {\r\n        display: 'flex',\r\n        flexDirection: \"row\",\r\n        position:\"absolute\",\r\n        // left:930,\r\n        right:'0%',\r\n        flexWrap: 'no-wrap',\r\n        zIndex:6,\r\n        // margin:10,\r\n        // padding:10\r\n        width:window.innerWidth - 50,\r\n        height:window.innerHeight - 100\r\n    },\r\n  \r\n  paper2: {\r\n    width: 1560,\r\n    // height: 850,\r\n    overflowX: \"hidden\",\r\n    overflowY: \"scroll\",\r\n    padding: 15,\r\n    margin : 15,\r\n  },\r\n  paper2_UpperContainer: {\r\n    display: 'flex',\r\n    flexDirection: \"column\",\r\n  },\r\n  paper2_BelowContainer: {\r\n    display: 'flex',\r\n    flexDirection: \"row\",\r\n  },\r\n  container3_1: {\r\n    width: 225,\r\n    // height: 500,\r\n  },\r\n  container3_2: {\r\n    width: 265,\r\n    // height: 500,\r\n  },\r\n  CloseBotton: {\r\n    // marginLeft: 5,\r\n    float:\"right\",\r\n    marginRight: 1,\r\n\r\n  },\r\n  content:{\r\n    // display: \"block\",\r\n    margin: \"auto\",\r\n    display:\"flex\"\r\n  }\r\n});\r\nvar SentRange = []\r\nvar ConceptRange = []\r\nclass MapApprovPanel extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.CloseOnClick = this.CloseOnClick.bind(this);\r\n        this.ApproveClicked = this.ApproveClicked.bind(this);\r\n        //console.log(\"before getting, this.props.NewJson == \", this.props.NewJson);\r\n    //for getting new json---------------------------------\r\n        /*var tmp=this;\r\n        fetch('http://localhost:8001/GetJson/')     //跟後端連結去getJson\r\n        .then(function (res) {\r\n        //    console.log(res.json());\r\n            return res.json();\r\n        }).then(function(myJson) {\r\n            tmp.props.SetNewJson(myJson);\r\n            return myJson;\r\n          });\r\n        //this.props.SetNewJson(tmp);\r\n        console.log(\"this.props.NewJson == \", this.props.NewJson);\r\n        */\r\n    }\r\n    ApproveClicked(){\r\n        fetch('https://conceptmap-backend.herokuapp.com/Update/<Keyword>')     //跟後端連結去getJson\r\n            .then(function (res) {\r\n            //    console.log(res.json());\r\n                return res.json();\r\n            }).then(function(myJson) {\r\n                this.props.SetNewJson(myJson);\r\n                this.props.SetVisJson(myJson);\r\n                return myJson;\r\n            });\r\n    }\r\n        \r\n    componentDidUpdate(prevProps) {\r\n        // 常見用法（別忘了比較 prop）：\r\n        if (this.props !== prevProps) {\r\n              this.forceUpdate();\r\n        }\r\n      }\r\n      componentWillMount() {\r\n        console.log(\"[graph]\", \",\", this.props.data.search_info.key);\r\n        // console.log(\"cheeeee\",this.props.data.concept_relationship.nodes);\r\n        // calcalate SentimentScoreRange [SentScoreMin,SentScoreMax];\r\n        var tmpList = [];\r\n        for (var e in this.props.data.videos_info) {\r\n\r\n            tmpList.push(this.props.data.videos_info[e].userFeedbackScore);\r\n        };\r\n        var tmpList2 = [];\r\n        for (var e in this.props.data.concept_relationship.nodes) {\r\n            tmpList2.push(this.props.data.concept_relationship.nodes[e].count);\r\n        };\r\n        // console.log(\"SentRange\",[Math.min(...tmpList),Math.max(...tmpList)]);\r\n        // console.log(\"tmpList2\",tmpList2);\r\n        SentRange = [Math.min(...tmpList), Math.max(...tmpList)];\r\n        ConceptRange = [Math.min(...tmpList2), Math.max(...tmpList2), tmpList2.reduce((a, b) => a + b, 0)];\r\n    }\r\n    CloseOnClick(){\r\n        this.props.SetMapConsult(\"dont_ask\");\r\n    }\r\n    render() {\r\n        //console.log(\"this.props.NewJson = \", this.props.NewJson );\r\n        if(this.props.MapConsult==true){\r\n            return (\r\n                <div style = {styles.OuterContainer}>\r\n                    {/* <Paper style={styles.paper2} elevation={13}> */}\r\n                    <Paper style= {Object.assign({}, styles.paper2, {height:window.innerHeight-130})} elevation={13}>\r\n                    <div style={styles.rootTitle}>\r\n                    <h1>Map Approval Consult</h1>\r\n                    <IconButton style={styles.CloseBotton} color=\"inherit\" aria-label=\"Close\">\r\n                        <CloseIcon onClick={this.CloseOnClick.bind(this)}/>\r\n                    </IconButton>\r\n                    </div>\r\n                    <div style = {styles.paper2_UpperContainer}>\r\n                        <div style={styles.content}>\r\n                            <button onClick = {this.ApproveClicked}\r\n                                    className=\"btn btn-primary btn-lg m-5\">Approve</button>\r\n                            <button onClick = {this.CloseOnClick}\r\n                                    className=\"btn btn-danger btn-lg m-5\">Disprove</button>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                    <div height=\"5\"><hr></hr></div>\r\n                    <div style = {styles.paper2_BelowContainer}>\r\n                        <Graph data={this.props.NewJson}\r\n                                width={(window.innerWidth)*2} height={window.innerHeight}\r\n                                SentRange={SentRange}\r\n                                ConceptRange={ConceptRange}\r\n                                src={\"ApprovPanel\"}\r\n                            />\r\n                    </div>\r\n                    </Paper>  \r\n                </div>\r\n            );\r\n        }\r\n        else{\r\n            return null;\r\n        }\r\n        \r\n        \r\n    }\r\n}\r\nexport default MapApprovPanel;\r\n\r\n//node 顏色要改，group=1 要改顏色\r\n//是是把圖畫小一點\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\n\r\nconst styles = ({\r\n    root:{\r\n        // paddingTop:50,\r\n        // marginTop:100,\r\n        fontSize:20\r\n    },\r\n    content:{\r\n        // height:100,\r\n        fontSize:13,\r\n    }\r\n});\r\n\r\nclass Notification extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // this.state = {\r\n        //     open:this.props.open\r\n        // }\r\n    }\r\n    // handleClose = (event, reason) => {\r\n    //     if (reason === 'clickaway') {\r\n    //       return;\r\n    //     }\r\n    \r\n    //     this.setState({ open: false });\r\n    // };\r\n    render() {\r\n        // console.log(\"learingmap\",this.props);\r\n        return (\r\n            <div style={styles.root}>\r\n                <Snackbar\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'left',\r\n                }}\r\n                open={this.props.open}\r\n                autoHideDuration={6000}\r\n                style={styles.content}\r\n                // onClose={this.handleClose}\r\n                // ContentProps={{\r\n                //     'aria-describedby': 'message-id',\r\n                // }}\r\n                message={<span style={styles.content} >Click A Node To See More Information</span>}\r\n                // action={[\r\n                //     <Button key=\"undo\" color=\"secondary\" size=\"small\" onClick={this.handleClose}>\r\n                //     UNDO\r\n                //     </Button>,\r\n                //     <IconButton\r\n                //     key=\"close\"\r\n                //     aria-label=\"Close\"\r\n                //     color=\"inherit\"\r\n                //     className={classes.close}\r\n                //     onClick={this.handleClose}\r\n                //     >\r\n                //     <CloseIcon />\r\n                //     </IconButton>,\r\n                // ]}\r\n            />\r\n        </div>\r\n        );\r\n        \r\n    }\r\n    \r\n}\r\nexport default Notification;","import React, { Component } from 'react';\n\n/* editor component */\nimport SunEditor,{buttonList} from 'suneditor-react';\nimport 'suneditor/dist/css/suneditor.min.css'; // Import Sun Editor's CSS File\nimport plugins from 'suneditor/src/plugins'\nimport { axisLeft } from 'd3-axis';\nimport SUNEDITOR from 'suneditor';\n//Start Connect to database----------\nif (!firebase.apps.length) {\n  firebase.initializeApp({\n    databaseURL: \"https://test-7916a-default-rtdb.asia-southeast1.firebasedatabase.app/\"\n  })\n  }else {\n  firebase.app(); // if already initialized, use that one\n  }\n\nconst mydatabase = firebase.database();\n\nvar options = {\n  buttonList: [\n      ['undo', 'redo'],\n      ['bold', 'underline', 'italic', 'strike', 'subscript', 'superscript'],\n      ['removeFormat'],\n      ['outdent', 'indent'],\n      ['fullScreen', 'showBlocks', 'codeView'],\n      ['preview', 'print'],\n      ['image', 'video']\n  ],\n  width: '100%'\n}\n\n// ex) A command plugin to add \"text node\" to selection\nvar plugin_command = {\n  name: 'customCommand',\n  display: 'command',\n\n  title:'Text node change', \n  buttonClass:'', \n  // This icon uses Font Awesome\n  innerHTML:'<i class=\"fas fa-font\"></i>', \n\n  add: function (core, targetElement) {\n      const context = core.context;\n      context.customCommand_2 = {\n          targetButton: targetElement\n      };\n  },\n  active: function (element) {\n      if (!element) {\n          this.util.removeClass(this.context.customCommand_2.targetButton, 'active');\n      } else if (/^mark$/i.test(element.nodeName) && element.style.backgroundColor.length > 0) {\n          this.util.addClass(this.context.customCommand_2.targetButton, 'active');\n          return true;\n      }\n\n      return false;\n  },\n  action: function () {\n      if (!this.util.hasClass(this.context.customCommand_2.targetButton, 'active')) {\n          const newNode = this.util.createElement('MARK');\n          newNode.style.backgroundColor = 'hsl(60,75%,60%)';\n          this.nodeChange(newNode, ['background-color'], null, null);\n      } else {\n          this.nodeChange(null, ['background-color'], ['mark'], true);\n      }\n  }\n}\n\n\nclass Editor extends Component {\n\n    // Your web app's Firebase configuration\n    // For Firebase JS SDK v7.20.0 and later, measurementId is optional\n    constructor(props) {\n      super(props);\n      //this.callBackSave = this.SetHighlightNodes.bind(this);\n      this.handleChange=this.handleChange.bind(this);\n      this.onInput=this.onInput.bind(this);\n      this.save = this.save.bind(this);\n      this.getSunEditorInstance = this.getSunEditorInstance.bind(this);\n      this.handleResize = this.handleResize.bind(this);\n      this.state = {\n        content:this.props.content,\n        windowWidth:window.innerWidth,\n        windowHeight:window.innerHeight,\n      };\n      this.ref = React.createRef();\n      }\n    handleChange(content){\n      //var today = new Date();\n      //mydatabase.ref('/change/').set({content});\n      //console.log(content,typeof(content));\n      //console.log(\"this.ref = \", this.ref);\n      //console.log(this.ref.current.core)\n\n      //commented in 8/25------------------------------------------------------\n      /*var keyword = this.props.content;\n      if(keyword!=\" \"){\n          if (content.includes(keyword) && !content.includes(\"<strong>\"+keyword)){\n          //var n = content.search(\"bitcoin\")\n          var word = \"<strong>\"+keyword+\"</strong> \"\n          var newcontent = content.replace(keyword, word)\n          //console.log(word)\n          //console.log(newcontent)\n          this.ref.current.setContents(newcontent);\n          console.log(\"keyword = \", keyword);\n          console.log(\"onChange: \",content,\">>>\",newcontent);\n          this.setState({content: newcontent});\n          this.ref.current.core.focusEdge();\n        }\n      }\n      else{\n        //this.setState({content : this.props.content});\n        this.setState({content : content});\n        //this.forceUpdate();\n      }*/\n    };\n    \n    onInput(e, core){\n      console.log('onInput', e, core);\n    };\n\n\t\tgetSunEditorInstance(sunEditor){\n      this.ref.current = sunEditor;\n      console.log(\"this.ref = \",this.ref);\n    }; \n    onFocus(event, core){\n      console.log(\"On Focus!!\");\n    };\n    onBlur(event, core){\n      console.log(\"on Blur!!\");\n    };\n    componentDidUpdate(prevProps, prevState, snapshot){     //props.content stands for the key to be highlight\n                                                            // unless it's \" \", \" \" means that nothing \n                                                            // should be highlighted\n                                                            //this if is to cancel the highlight\n        //commented in 8/25-----------------------------------------------------------\n        /*if (this.props.content == \" \"){                      \n        var prevKey = prevProps.content;\n        var content = this.ref.current.core.getContents();\n        if (content.includes(prevKey)){\n          var word = \"<strong>\"+prevKey+\"</strong>\";\n          var newcontent = content.replace(word, prevKey);\n          this.ref.current.setContents(newcontent);\n          console.log(\"DidUpdate: \",content,\">>>\",newcontent);\n          this.ref.current.core.focusEdge();\n        }\n      }\n      else if(prevProps.content!==this.props.content){              //this is to add the new highlight\n        var keyword = this.props.content;                           //which is, if the new key is not \" \"\n        var content = this.ref.current.core.getContents();          //(there are things to highlight) and differs from the prev.\n        //console.log(\"contents=\",this.ref.current.core.getContents());\n        if (content.includes(keyword) && !content.includes(\"<strong>\"+keyword)){\n          //var n = content.search(\"bitcoin\")\n          var word = \"<strong>\"+keyword+\"</strong> \";\n          var newcontent = content.replace(keyword, word);\n          //console.log(word)\n          //console.log(newcontent)\n          this.ref.current.setContents(newcontent);\n          //console.log(\"DidUpdate: \",content,\">>>\",newcontent);\n          this.ref.current.core.focusEdge();\n        }\n      }*/\n      \n      if((prevProps.cardEditing==false)&&(this.props.cardEditing==true)){\n        this.ref.current.setContents(this.props.editorContent);\n        this.ref.current.core.focusEdge();\n      }\n      \n  }\n  \n  componentDidMount(){\n    window.addEventListener(\"resize\", this.handleResize);\n  }\n  handleResize(e){\n      this.setState({windowWidth : window.innerWidth,\n                      windowHeight : window.innerHeight});\n  }\n  save(){\n    //console.log(\"SetMapConsult(add)\");\n    //console.log(this.ref.current);\n    var content = this.ref.current.getText();\n    var tmp = this;\n    var userId = this.props.userId;\n    var concept = this.props.searchInfo;\n    var cardId = this.props.editingCardId;\n    \n    if(this.props.cardEditing==false){\n      \n      var sendBackEnd='https://conceptmap-backend.herokuapp.com/SaveEditor/';\n      sendBackEnd = sendBackEnd+concept+\"&\"+userId+\"&\"+content;\n      fetch(sendBackEnd);     //跟後端連結去getJson\n      /*.then(function (res) {\n          console.log(res);\n          //return res.json();\n      }).then(function(myJson) {\n          tmp.props.SetNewJson(myJson);\n          return myJson;\n      });*/\n      //console.log(this.props);\n      //this.props.SetMapConsult(\"add\");\n      //mydatabase.ref('/save').set({contents});\n    }\n    else{\n      \n      var sendBackEnd='https://conceptmap-backend.herokuapp.com/SaveCard/';\n      sendBackEnd = sendBackEnd+concept+\"&\"+cardId+\"&\"+userId+\"&\"+content;\n      console.log(\"sendBackEnd = \", sendBackEnd);\n      fetch(sendBackEnd);     //跟後端連結去getJson\n      this.props.SetCardEdit(false,\"\");\n    }\n    \n  }\n\n    render() {\n      var width = (this.state.windowWidth/2-100)+\"px\";\n      var height = (this.state.windowHeight/3)-250+\"px\";\n      return (\n        <div>\n        <SunEditor      \n                        width = {width}\n                        height = {height}\n                        SetMapConsult = {this.props.SetMapConsult}\n                        setOptions = {{\n                          plugins: [plugin_command],\n                          buttonList:[\n                            ['undo', 'redo'],\n                            ['font', 'align'],\n                            ['-right', 'save']\n                          ],\n                          callBackSave : this.save\n                    }}\n                    onChange = {this.handleChange}\n                    getSunEditorInstance={this.getSunEditorInstance}\n                    onFocus = {this.onFocus}\n                    onBlur = {this.onBlur}\n                    SetMapConsult={this.props.SetMapConsult}\n                     />\n    </div>\n      );\n    }\n  }\n  export default Editor;","import React, { Component } from 'react';\nimport ThumbUpIcon from '@material-ui/icons/ThumbUp';\n\nimport IconButton from '@material-ui/core/IconButton';\n\n/* editor component */\nimport SunEditor,{buttonList} from 'suneditor-react';\nimport 'suneditor/dist/css/suneditor.min.css'; // Import Sun Editor's CSS File\n//import { style } from '../../craco.config';\nimport './Card.css';\n\n//Start Connect to database----------\nif (!firebase.apps.length) {\n    firebase.initializeApp({\n      databaseURL: \"https://test-7916a-default-rtdb.asia-southeast1.firebasedatabase.app/\"\n    })\n    }else {\n    firebase.app(); // if already initialized, use that one\n    }\n  \n  const db = firebase.database();\n\n\nclass Card extends Component {\n    constructor(props) {\n        super(props);\n        this.handleEdit = this.handleEdit.bind(this);\n        //this.handleSave = this.handleSave.bind(this);\n        this.ThumbOnClick = this.ThumbOnClick.bind(this);\n        this.handleResize = this.handleResize.bind(this);\n        this.ref = React.createRef();\n        this.state = {\n                        content:this.props.content,\n                        windowWidth:window.innerWidth,\n                    thumbColor:\"disabled\"};\n        }\n\n    handleResize(e){\n        this.setState({windowWidth : window.innerWidth});\n    }\n    componentDidMount(){\n        window.addEventListener(\"resize\", this.handleResize);\n        \n\n       /* db.ref(this.props.dbPath).on(\"value\",function (snapshot){\n        \n            var studentlist = [];\n            var data_db= snapshot.val().contents.replace(\"<p>\",\"\").replace(\"</p>\",\"\");\n            studentlist.push(data_db);\n        });*/\n    }\n    handleEdit(){\n        this.props.SetCardEdit(this.props.cardId);     //key is the cardId\n        this.props.SetEditorContent(this.props.content);\n        this.props.SetCardEdit(true, this.props.cardId);\n    }\n    /*handleSave(){\n        this.ref.current.disabled();\n        this.props.onSave(this.props.id);\n        this.setState({editing:false,\n                        content:this.ref.current.core.getContents()});\n    }*/\n    handleCancel(){\n        this.props.SetCardEdit(\"\");\n        this.props.SetCardEdit(false, this.props.cardId);\n    }\n    componentDidUpdate(prevProps) {\n        if (this.props.id !== prevProps.id) {        \n            this.setState({content:this.props.content});\n        }\n      }\n    ThumbOnClick(){\n        if(this.state.thumbColor ==\"disabled\"){\n            var thumbColor =\"primary\";\n        }else{\n            var thumbColor =\"disabled\";\n        }\n        var sendBackEnd='https://conceptmap-backend.herokuapp.com/LikeCard/'+this.props.concept+\"&\"+this.props.cardId;\n        console.log(\"LIKE\", sendBackEnd);\n        fetch(sendBackEnd);\n        this.setState({thumbColor});\n    }\n    renderThumbCnt(){\n        if(this.props.thumbsCnt==0){\n            return null;\n        }else{\n            return this.props.thumbsCnt;\n        }\n    }\n    render(){\n        var tmp = this;\nconst styles = ({\n    fullCard:{\n      width: tmp.props.style.ul.width-40,\n      border: '1px solid rgba(0.7,0.7,0.7, 0.7)',\n      borderRadius: '5px',\n      margin:' 10px 5px',\n      padding: '4px',\n    }\n  });\n            return (\n                <div style={styles.fullCard}>\n                    <div className='cardContent'>\n                        <div className='cardText'>\n                            <h4>{this.props.userId}</h4>\n                            <p style={styles.content}>{this.props.content}</p>\n                        </div>\n                    </div>\n                    <div>\n                        <IconButton color=\"inherit\" aria-label=\"Home\">\n                            {this.renderThumbCnt()}\n                            <ThumbUpIcon color={this.state.thumbColor} onClick={this.ThumbOnClick}/>\n                        </IconButton>\n                        <button\n                            onClick={this.handleEdit}\n                            disabled={this.props.cardEditing}\n                            className=\"btn btn-primary btn-sm\"\n                        >\n                            Edit\n                        </button>\n                        {((!this.props.cardEditing)||(this.props.editingCardId!==this.props.cardId))&&<button\n                            onClick={()=>this.props.onDelete(this.props.cardId)}\n                            className=\"btn btn-danger btn-sm m-2\"\n                        >\n                            Delete\n                        </button>}\n                        {(this.props.cardEditing) && (this.props.editingCardId==this.props.cardId)&&<button onClick={()=>this.handleCancel()}\n                                                    className=\"btn btn-danger btn-sm m-2\">\n                                                Cancel\n                                                </button>}\n                    \n                    </div>\n                </div>\n            )\n/*        }\n        else{\n            return(\n                <div style = {styles.fullCard}>\n                    <div className='cardContent'>\n                        <div className='cardText'>\n                            <h4>{this.props.userId}</h4>\n                            <p style={styles.content}>{this.props.content}</p>\n                        </div>\n                    </div>\n                    <IconButton color=\"inherit\" aria-label=\"Home\">\n                    {this.renderThumbCnt()}\n                    <ThumbUpIcon color={this.state.thumbColor} onClick={this.ThumbOnClick}/>\n                    </IconButton>\n                    <button\n                        onClick={this.handleSave}\n                        className=\"btn btn-primary btn-sm\"\n                    >\n                        Save\n                    </button>\n                    <button\n                        onClick={()=>this.handleCancel()}\n                        className=\"btn btn-danger btn-sm m-2\"\n                    >\n                        Cancel\n                    </button>\n                \n                </div>\n            )\n        }\n        */\n\n    }\n}\nexport default Card;\n","import { BottomNavigationAction, Hidden } from '@material-ui/core';\nimport React, { Component } from 'react';\nimport SunEditor from 'suneditor-react';\nimport Card from './Card'\nimport RelatedVideosPanel from './RelatedVideosPanel';\n\n\n//Start Connect to database----------\nif (!firebase.apps.length) {\n    firebase.initializeApp({\n        apiKey: \"AIzaSyD5ro8Oj_EHuFweJR3bywJCO49egETQp7g\",\n        authDomain: \"test-7916a.firebaseapp.com\",\n        databaseURL: \"https://test-7916a-default-rtdb.asia-southeast1.firebasedatabase.app\",\n        projectId: \"test-7916a\",\n        storageBucket: \"test-7916a.appspot.com\",\n        messagingSenderId: \"931195594829\",\n        appId: \"1:931195594829:web:65c637f9dc54e245d4d404\",\n        measurementId: \"G-T5RH81V2MG\"\n    })\n    }else {\n    firebase.app(); // if already initialized, use that one\n    }\n  \nconst db = firebase.database();\n\n  \nclass Cards extends Component {\n    constructor(props){\n        super(props);\n        this.state={\n            cards: [\n            ],\n            concept:this.props.searchInfo,\n            windowWidth:window.innerWidth,\n            windowHeight:window.innerHeight,\n        };\n        this.handleDelete=this.handleDelete.bind(this);\n        this.handleEdit=this.handleEdit.bind(this);      \n        this.addCard=this.addCard.bind(this);   \n        this.handleThumbsCnt=this.handleThumbsCnt.bind(this);\n        this.handleResize = this.handleResize.bind(this);\n        var concept = this.state.concept;\n        var path = \"/\"+concept;\n        var tmp = this;\n        db.ref(path).on('value', function(snapshot){\n            tmp.state.cards = JSON.parse(JSON.stringify(snapshot.val()));\n            //console.log(\"tmp.state.cards\", tmp.state.cards);\n            //console.log(\"keys = \", Object.keys(tmp.state.cards));\n            \n            if((tmp.state.cards!=null)||(tmp.state.cards!=undefined)){\n                var keys = Object.keys(tmp.state.cards);\n                var cards = [];\n                var i =0;\n                while(i<keys.length){\n                    var cardId = keys[i];\n                    var cardContent = tmp.state.cards[cardId].cardContent;\n                    var likes = tmp.state.cards[cardId].likes;\n                    var userId = tmp.state.cards[cardId].userId;\n                    var card = {cardId:cardId, cardContent:cardContent, userId: userId, likes:likes };\n                    cards.push(card);\n                    i = i+1;\n                }\n                console.log(\"cards = \", cards);\n                cards.sort(function(a, b){\n                    return b.likes-a.likes;\n                });\n            }\n            tmp.state.cards = cards;\n            tmp.forceUpdate();\n            //console.log(\"tmp.state.cards\", tmp.state.cards);\n        });\n        const styles = ({\n            ul: {\n                //overflowX: \"scroll\",\n                overflowY: \"scroll\",\n                width:this.state.windowWidth/2,\n                height:this.state.windowHeight/2\n            }\n        });\n    }\n    \n    componentDidMount(){\n        window.addEventListener(\"resize\", this.handleResize);\n    }\n    handleResize(e){\n        this.setState({windowWidth : window.innerWidth,\n                        windowHeight : window.innerHeight});\n    }\n    addCard(content){\n        let cards = this.state.cards;\n        cards.push({id:cards.length+1, content: content, thumbsCnt: 0});\n        this.setState({cards});\n    }\n    handleDelete(cardId) {\n        var sendBackEnd='https://conceptmap-backend.herokuapp.com/DeleteCard/'+this.state.concept+\"&\"+cardId;\n        console.log(\"handleDelete = \",sendBackEnd);\n        fetch(sendBackEnd);\n    }\n    handleEdit(cardId) {\n        console.log(\"handleEdit\",cardId);\n\n    }\n    handleSave(cardId){\n        console.log(\"handleSave\", cardId);\n    }\n    handleThumbsCnt(cardId,method){\n        var card = this.state.cards.filter(c=>c.id==cardId);\n        if(method==\"add\"){\n            card[0].thumbsCnt=card[0].thumbsCnt+1;\n        }\n        else{\n            card[0].thumbsCnt=card[0].thumbsCnt-1;\n        }\n        //console.log(\"card = \", card);\n        //console.log(\"this.state.cards.filter = \",this.state.cards.filter(c=>c.id!==cardId));\n        var cards =card.concat( this.state.cards.filter(c=>c.id!==cardId));\n        //console.log(\"cards = \", cards);\n        cards.sort(function(a, b){\n            return b.thumbsCnt-a.thumbsCnt;\n        });\n        this.setState({cards});\n    }\n    /*componentDidMount(){\n        var concept = this.state.concept;\n        var path = \"/\"+concept;\n        var tmp = this;\n        db.ref(path).once('value', function(snapshot){\n            tmp.setState({cards:snapshot.val()});\n            console.log(snapshot.val());\n            console.log(typeof(tmp.state.cards));\n            });\n        var properties = Object.getOwnPropertyNames(this.state.cards);\n        console.log(\"properties\", properties);\n        db.ref(path).on('value', function(snapshot){\n            tmp.setState({cards:snapshot.val()});\n            });\n        //console.log(typeof(this.state.cards));\n    }*/\n    componentDidUpdate(prevProps,prevState) {\n        // 常見用法（別忘了比較 prop）：\n        if (this.props.newCardContent !== prevProps.newCardContent) {\n              this.addCard(this.props.newCardContent);\n        };\n        if (this.state!== prevState) {\n            console.log(\"this.state = \", this.state);\n        }\n      }\n    render() { \n        var tmp = this;\n        var styles={};\n        if (this.props.progress==\"4\"){\n            styles = ({\n                ul: {\n                    //overflowX: \"scroll\",\n                    overflowY: \"scroll\",\n                    width:tmp.props.graphWidth,\n                    height:(tmp.state.windowHeight/2-100)\n                }\n            });\n        }else{\n            styles = ({\n                ul: {\n                    //overflowX: \"scroll\",\n                    overflowY: \"scroll\",\n                    width:tmp.state.windowWidth/3,\n                    height:(tmp.state.windowHeight/3)+(tmp.state.windowHeight/3)\n                }\n            });\n        };\n        if(this.state.cards!=null){\n            return (\n                <div className=\"relative\" style={styles.ul}> \n                    {this.state.cards.map(card =>\n                        (<Card content={card.cardContent}\n                                key = {card.cardId}\n                                cardId = {card.cardId}\n                                userId = {card.userId}\n                                onDelete={this.handleDelete}\n                                onEdit={this.handleEdit} \n                                onSave={this.handleSave}\n                                handleThumbsCnt={this.handleThumbsCnt}\n                                thumbsCnt={card.likes}\n                                SetCardEdit={this.props.SetCardEdit}\n                                concept = {this.state.concept}\n                                SetEditorContent = {this.props.SetEditorContent}\n                                cardEditing = {this.props.cardEditing}\n                                editingCardId = {this.props.editingCardId}\n                                style = {styles}/>\n                        ))}\n                </div>\n            );\n        }else{\n            return null;\n        }\n    }\n}\n\nexport default Cards;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Graph from '../newdirected/Graph';\r\nimport VideoSequence from './VideoSequence';\r\nimport ConceptSequence from './ConceptSequence';\r\nimport Legend from './Legend';\r\nimport WordCloud from './WordCloud';\r\nimport RelatedVideosPanel from './RelatedVideosPanel';\r\nimport ConceptDetailPanel from './ConceptDetailPanel';\r\nimport MapApprovPanel from './MapApprovPanel';\r\nimport Notification from './Notification';\r\nimport Editor from './Editor'\r\nimport Cards from './Cards'\r\nconst styles = ({\r\n    container: {\r\n        // justifyContent: 'center',\r\n        display: 'flex',\r\n        flexDirection: \"row\",\r\n        // flexGrow: 1,\r\n        flexWrap: 'wrap',\r\n        // margin:10,\r\n        // padding:10\r\n        paddingTop: 10,\r\n        paddingLeft: 10,\r\n        // marginTop:10,\r\n        marginLeft: 10\r\n\r\n    },\r\n    Editor: {\r\n        // width: 200,\r\n        // height:800,\r\n        position: 'fixed',\r\n        bottom:10,\r\n        right:20\r\n      },\r\n    LeftField: {\r\n        // display:'flex',\r\n        // width: 900,\r\n        // height: 700,\r\n        // overflowX: \"scroll\",\r\n        // overflowY: \"hidden\",\r\n        // padding: 20,\r\n        // margin : 20,\r\n    },\r\n});\r\nvar SentRange = []\r\nvar ConceptRange = []\r\nclass LearningMapFrame extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            HoverConceptIndex: null,\r\n            HoverVideoIndex: null,\r\n            PopoverIndexes: [],\r\n            Path_ConceptIndex: null,\r\n            BigCircleIndex: null,\r\n            Hightlight_word: null,\r\n            content:[\r\n                \" \"\r\n            ],\r\n            newCardContent:false,\r\n            MapConsult: false,\r\n            cardEditing:false,\r\n            editingCardId:\"\",\r\n            editorContent:\"\"\r\n            };\r\n        this.SetEditorContent = this.SetEditorContent.bind(this);\r\n        this.SetHoverConceptIndex = this.SetHoverConceptIndex.bind(this);\r\n        this.SetMapConsult = this.SetMapConsult.bind(this);\r\n        this.SetNewCardContent = this.SetNewCardContent.bind(this);\r\n        this.SetHoverVideoIndex = this.SetHoverVideoIndex.bind(this);\r\n        this.SetPopoverIndexes = this.SetPopoverIndexes.bind(this);\r\n        this.SetPath_ConceptIndex = this.SetPath_ConceptIndex.bind(this);\r\n        this.SetBigCircleIndex = this.SetBigCircleIndex.bind(this);\r\n        this.ClearHoverConcept = this.ClearHoverConcept.bind(this);\r\n        // Adding words hightlighting functions by YHT\r\n        this.SetHightlightWord = this.SetHightlightWord.bind(this);\r\n        this.SetCardEdit = this.SetCardEdit.bind(this);\r\n    }\r\n    SetEditorContent(content){\r\n        this.setState({editorContent:content});\r\n    }\r\n    SetCardEdit(bool, cardId){\r\n        this.setState({cardEditing:bool,\r\n                        editingCardId:cardId});\r\n    }\r\n    componentWillMount() {\r\n        console.log(\"[graph]\", \",\", this.props.data.search_info.key);\r\n        // console.log(\"cheeeee\",this.props.data.concept_relationship.nodes);\r\n        // calcalate SentimentScoreRange [SentScoreMin,SentScoreMax];\r\n        var tmpList = [];\r\n        for (var e in this.props.data.videos_info) {\r\n\r\n            tmpList.push(this.props.data.videos_info[e].userFeedbackScore);\r\n        };\r\n        var tmpList2 = [];\r\n        for (var e in this.props.data.concept_relationship.nodes) {\r\n            tmpList2.push(this.props.data.concept_relationship.nodes[e].count);\r\n        };\r\n        // console.log(\"SentRange\",[Math.min(...tmpList),Math.max(...tmpList)]);\r\n        // console.log(\"tmpList2\",tmpList2);\r\n        SentRange = [Math.min(...tmpList), Math.max(...tmpList)];\r\n        ConceptRange = [Math.min(...tmpList2), Math.max(...tmpList2), tmpList2.reduce((a, b) => a + b, 0)];\r\n    }\r\n    SetHoverConceptIndex(i, word) {\r\n        // console.log(\"[hover] conceptMapNode\",i);\r\n        // Adding concept panel words highlighting\r\n        console.log(\"word = \", word);\r\n        console.log(\"i = \",i);\r\n        this.setState({\r\n            HoverConceptIndex: i,\r\n            HightlightWord: word\r\n        });\r\n        this.setState({\r\n            content: word\r\n        });\r\n        \r\n        this.props.SetHoverConceptIndexAtIndex(i);    \r\n        //console.log(word);\r\n        //this.forceUpdate();\r\n    }\r\n    ClearHoverConcept(){\r\n        this.setState({content:\" \"});\r\n        console.log(\"ClearHoverConcept\");\r\n    }\r\n    // Adding by YHT\r\n    SetHightlightWord(word) {\r\n\r\n        // Adding concept panel words highlighting\r\n        // Hightlight word in editor\r\n        this.setState({\r\n            HightlightWord: word\r\n        });\r\n        console.log(\"call set hightlight\");\r\n        console.log(word);\r\n        // call function in Editor.js\r\n\r\n    }\r\n    SetHoverVideoIndex(vid) {\r\n        this.setState({\r\n            HoverVideoIndex: vid\r\n        });\r\n    };\r\n    SetPopoverIndexes(method, index) {\r\n        if (method == \"add\") {\r\n            if (this.state.PopoverIndexes.includes(index) == false) {\r\n                this.setState({\r\n                    PopoverIndexes: [...this.state.PopoverIndexes, index]\r\n                    // PopoverIndexes:this.state.PopoverIndexes.concat([index])\r\n                });\r\n            }\r\n        } else if (method == \"remove\") {\r\n            this.setState({\r\n                PopoverIndexes: this.state.PopoverIndexes.filter(val => val !== index)\r\n            });\r\n        } else if (method == \"clear\") {\r\n            this.setState({\r\n                PopoverIndexes: []\r\n            });\r\n        }\r\n    }\r\n    SetPath_ConceptIndex(method, index) {\r\n        if (method == \"add\") {\r\n            this.setState({\r\n                Path_ConceptIndex: index\r\n            });\r\n        } else if (method == \"clear\") {\r\n            console.log(\"[close] ConceptDetailPanel\");\r\n            this.setState({\r\n                Path_ConceptIndex: null,\r\n                BigCircleIndex: null\r\n            });\r\n        }\r\n    }\r\n    SetMapConsult(method){\r\n        if (method == \"add\"){\r\n            /*     正式的讓後端去取db資料，算出新的Json檔\r\n            fetch('http://localhost:8001/MapPreview/<Keyword>')     //跟後端連結去getJson\r\n            .then(function (res) {\r\n            //    console.log(res.json());\r\n                return res.json();\r\n            }).then(function(myJson) {\r\n                this.props.SetNewJson(myJson);\r\n                return myJson;\r\n            });\r\n            */\r\n            this.setState({MapConsult: true});\r\n            \r\n        } else if (method ==\"dont_ask\") {\r\n            console.log(\"SetMapConsult(false)!!)\");\r\n            this.setState({MapConsult:false });\r\n    }\r\n    }\r\n    SetBigCircleIndex(index) {\r\n        this.setState({\r\n            BigCircleIndex: index\r\n        });\r\n    }\r\n    \r\n    SetNewCardContent(content) {\r\n        this.setState({\r\n            newCardContent: content\r\n        });\r\n    }\r\n    componentDidUpdate(prevState){\r\n        if(this.state.HoverConceptIndex!==prevState.HoverConceptIndex){\r\n            console.log(\"prevConceptIndex = \",prevState.HoverConceptIndex,\" >>> \", this.state.HoverConceptIndex);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        console.log(this.props.data.VideoSequence_ConceptInfo);\r\n        var HighlightConceptTextIndex = this.state.HoverVideoIndex == null ? [] : this.props.data.VideoSequence_ConceptInfo[this.state.HoverConceptIndex][this.state.HoverVideoIndex];\r\n        // console.log(\"windowheight\",window.innerHeight);\r\n        console.log (this.props.data);\r\n        return (\r\n            <div style={styles.container}>\r\n                {/* {this.props.data.search_info.key} */}\r\n                {/* <div style = {styles.LeftField} > */}\r\n                <div width={window.innerWidth - 50} height={window.innerHeight - 100}>\r\n                    <Typography variant=\"headline\" component=\"h5\">\r\n                        {this.props.data.search_info.key}\r\n                    </Typography>\r\n                    <Legend Path_ConceptIndex={this.state.Path_ConceptIndex}\r\n                        BigCircleIndex={this.state.BigCircleIndex == null ? this.state.Path_ConceptIndex : this.state.BigCircleIndex}\r\n                        ConceptRange={ConceptRange}\r\n                        data={this.props.data.concept_relationship.nodes}\r\n                    />\r\n                    {/* <WordCloud videos_info={this.props.data.videos_info} HoverVideoIndex={this.state.HoverVideoIndex}/> */}\r\n                    <Graph data={this.props.data}\r\n                        HoverConceptIndex={this.props.HoverConceptIndexAtIndex}\r\n                        SetHoverConceptIndex={this.SetHoverConceptIndex}\r\n                        ClearHoverConcept = {this.ClearHoverConcept} \r\n                        OpenDrawer={(text) => props.OpenDrawer(text)}\r\n                        width={window.innerWidth/2 - 50} height={window.innerHeight - 100}\r\n                        SentRange={SentRange}\r\n                        ConceptRange={ConceptRange}\r\n                        SetHoverVideoIndex={this.SetHoverVideoIndex}\r\n                        HoverVideoIndex={this.state.HoverVideoIndex}\r\n                        Path_ConceptIndex={this.state.Path_ConceptIndex}\r\n                        SetPath_ConceptIndex={this.SetPath_ConceptIndex}\r\n                        BigCircleIndex={this.state.BigCircleIndex}\r\n                        SetHightlightWord={this.SetHightlightWord}\r\n                        HoverConceptIndexAtIndex = {this.props.HoverConceptIndexAtIndex}\r\n                        HighlightNodesAtIndex = {this.props.HighlightNodesAtIndex}\r\n                        DirectNodesAtIndex = {this.props.DirectNodesAtIndex}\r\n                        SetDirectNodesAtIndex = {this.props.SetDirectNodesAtIndex}\r\n                        SetHighlightNodesAtIndex = {this.props.SetHighlightNodesAtIndex}\r\n                    />\r\n                </div>\r\n                \r\n                <div>\r\n                    <div>\r\n                    <Cards \r\n                            SetEditorContent = {this.SetEditorContent}\r\n                            newCardContent = {this.state.newCardContent}\r\n                            searchInfo = {this.props.data.search_info.key}\r\n                            SetCardEdit = {this.SetCardEdit}\r\n                            editingCardId = {this.state.editingCardId}\r\n                            cardEditing = {this.state.cardEditing}/>\r\n                    </div>\r\n                    <div style = {styles.Editor}>\r\n                    <Editor content = {this.state.content}\r\n                            userId={this.props.userId}\r\n                            SetMapConsult = {this.SetMapConsult}\r\n                            SetNewJson = {this.props.SetNewJson}\r\n                            searchInfo = {this.props.data.search_info.key}\r\n                            SetNewCardContent = {this.SetNewCardContent}\r\n                            SetCardEdit = {this.SetCardEdit}\r\n                            cardEditing = {this.state.cardEditing}\r\n                            editingCardId = {this.state.editingCardId}\r\n                            editorContent={this.state.editorContent}\r\n                    />\r\n                    {/*<button onClick={()=>this.SetMapConsult(\"add\")}\r\n                            className=\"btn btn-primary btn-lg m-5\">Show New Map</button>*/}\r\n                    </div>  \r\n                </div>\r\n\r\n                <ConceptDetailPanel\r\n                    data={this.props.data}\r\n                    Path_ConceptIndex={this.state.Path_ConceptIndex}\r\n                    SetPath_ConceptIndex={this.SetPath_ConceptIndex}\r\n                    SentRange={SentRange}\r\n                    SetHoverVideoIndex={this.SetHoverVideoIndex}\r\n                    SetHightlightWord={this.SetHightlightWord}\r\n                    HoverVideoIndex={this.state.HoverVideoIndex}\r\n                    HighlightConceptTextIndex={HighlightConceptTextIndex}\r\n                    BigCircleIndex={this.state.BigCircleIndex}\r\n                    SetBigCircleIndex={this.SetBigCircleIndex}\r\n                    SetProgress = {this.props.SetProgress} \r\n                    SetNewCardContent = {this.SetNewCardContent}\r\n                    SetVideoId = {this.props.SetVideoId} \r\n                />\r\n                <MapApprovPanel \r\n                    data={this.props.data}\r\n                    MapConsult={this.state.MapConsult}\r\n                    SetMapConsult={this.SetMapConsult}\r\n                    SetVisJson = {this.props.SetVisJson}\r\n                    SetNewJson = {this.props.SetNewJson}   \r\n                    NewJson = {this.props.NewJson}\r\n                />\r\n                <Notification open={this.state.Path_ConceptIndex == null} />\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\nexport default LearningMapFrame;","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { PropTypes } from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Graph from '../newdirected/Graph';\nimport VideoSequence from './VideoSequence';\nimport ConceptSequence from './ConceptSequence';\nimport Legend from './Legend';\nimport WordCloud from './WordCloud';\nimport RelatedVideosPanel from './RelatedVideosPanel';\nimport ConceptDetailPanel from './ConceptDetailPanel';\nimport MapApprovPanel from './MapApprovPanel';\nimport Notification from './Notification';\nimport Editor from './Editor';\nimport Cards from './Cards';\nimport './video.css';\nimport YoutubeEmbed from './YoutubeEmbed';\n\nimport ReactPlayer from \"react-player\"\n\n\nconst styles = ({\n    container: {\n        // justifyContent: 'center',\n        display: 'flex',\n        flexDirection: \"row\",\n        // flexGrow: 1,\n        flexWrap: 'wrap',\n        // margin:10,\n        // padding:10\n        paddingTop: 10,\n        paddingLeft: 10,\n        // marginTop:10,\n        marginLeft: 10\n\n    },\n    Editor: {\n        // width: 200,\n        // height:800,\n        position: 'fixed',\n        bottom:10,\n        right:20\n      },\n    LeftField: {\n        // display:'flex',\n        // width: 900,\n        // height: 700,\n        // overflowX: \"scroll\",\n        // overflowY: \"hidden\",\n        // padding: 20,\n        // margin : 20,\n    },\n    OuterContainer: {\n        display: 'flex',\n        flexDirection: \"row\",\n        position:\"absolute\",\n        // left:930,\n        right:'0%',\n        flexWrap: 'no-wrap',\n        zIndex:6\n        // margin:10,\n        // padding:10\n    },\n});\nvar SentRange = []\nvar ConceptRange = []\nclass LearningMapFrame extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            HoverConceptIndex: null,\n            HoverVideoIndex: null,\n            PopoverIndexes: [],\n            Path_ConceptIndex: null,\n            BigCircleIndex: null,\n            Hightlight_word: null,\n            content:[\n                \" \"\n            ],\n            newCardContent:false,\n            MapConsult: false,\n            cardEditing:false,\n            editingCardId:\"\",\n            editorContent:\"\"\n            };\n        this.SetEditorContent = this.SetEditorContent.bind(this);\n        this.SetHoverConceptIndex = this.SetHoverConceptIndex.bind(this);\n        this.SetMapConsult = this.SetMapConsult.bind(this);\n        this.SetNewCardContent = this.SetNewCardContent.bind(this);\n        this.SetHoverVideoIndex = this.SetHoverVideoIndex.bind(this);\n        this.SetPopoverIndexes = this.SetPopoverIndexes.bind(this);\n        this.SetPath_ConceptIndex = this.SetPath_ConceptIndex.bind(this);\n        this.SetBigCircleIndex = this.SetBigCircleIndex.bind(this);\n        this.ClearHoverConcept = this.ClearHoverConcept.bind(this);\n        // Adding words hightlighting functions by YHT\n        this.SetHightlightWord = this.SetHightlightWord.bind(this);\n        this.SetCardEdit = this.SetCardEdit.bind(this);\n    }\n    SetEditorContent(content){\n        this.setState({editorContent:content});\n    }\n    SetCardEdit(bool, cardId){\n        this.setState({cardEditing:bool,\n                        editingCardId:cardId});\n    }\n    componentWillMount() {\n        console.log(\"[graph]\", \",\", this.props.data.search_info.key);\n        // console.log(\"cheeeee\",this.props.data.concept_relationship.nodes);\n        // calcalate SentimentScoreRange [SentScoreMin,SentScoreMax];\n        var tmpList = [];\n        for (var e in this.props.data.videos_info) {\n\n            tmpList.push(this.props.data.videos_info[e].userFeedbackScore);\n        };\n        var tmpList2 = [];\n        for (var e in this.props.data.concept_relationship.nodes) {\n            tmpList2.push(this.props.data.concept_relationship.nodes[e].count);\n        };\n        // console.log(\"SentRange\",[Math.min(...tmpList),Math.max(...tmpList)]);\n        // console.log(\"tmpList2\",tmpList2);\n        SentRange = [Math.min(...tmpList), Math.max(...tmpList)];\n        ConceptRange = [Math.min(...tmpList2), Math.max(...tmpList2), tmpList2.reduce((a, b) => a + b, 0)];\n    }\n    SetHoverConceptIndex(i, word) {\n        // console.log(\"[hover] conceptMapNode\",i);\n        // Adding concept panel words highlighting\n        console.log(\"word = \", word);\n        console.log(\"i = \",i);\n        this.setState({\n            HoverConceptIndex: i,\n            HightlightWord: word\n        });\n        this.setState({\n            content: word\n        });\n        this.props.SetHoverConceptIndexAtIndex(i);\n        //console.log(word);\n        //this.forceUpdate();\n    }\n    ClearHoverConcept(){\n        this.setState({content:\" \"});\n        console.log(\"ClearHoverConcept\");\n    }\n    // Adding by YHT\n    SetHightlightWord(word) {\n\n        // Adding concept panel words highlighting\n        // Hightlight word in editor\n        this.setState({\n            HightlightWord: word\n        });\n        console.log(\"call set hightlight\");\n        console.log(word);\n        // call function in Editor.js\n\n    }\n    SetHoverVideoIndex(vid) {\n        this.setState({\n            HoverVideoIndex: vid\n        });\n    };\n    SetPopoverIndexes(method, index) {\n        if (method == \"add\") {\n            if (this.state.PopoverIndexes.includes(index) == false) {\n                this.setState({\n                    PopoverIndexes: [...this.state.PopoverIndexes, index]\n                    // PopoverIndexes:this.state.PopoverIndexes.concat([index])\n                });\n            }\n        } else if (method == \"remove\") {\n            this.setState({\n                PopoverIndexes: this.state.PopoverIndexes.filter(val => val !== index)\n            });\n        } else if (method == \"clear\") {\n            this.setState({\n                PopoverIndexes: []\n            });\n        }\n    }\n    SetPath_ConceptIndex(method, index) {\n        if (method == \"add\") {\n            this.setState({\n                Path_ConceptIndex: index\n            });\n        } else if (method == \"clear\") {\n            console.log(\"[close] ConceptDetailPanel\");\n            this.setState({\n                Path_ConceptIndex: null,\n                BigCircleIndex: null\n            });\n        }\n    }\n    SetMapConsult(method){\n        if (method == \"add\"){\n            /*     正式的讓後端去取db資料，算出新的Json檔\n            fetch('http://localhost:8001/MapPreview/<Keyword>')     //跟後端連結去getJson\n            .then(function (res) {\n            //    console.log(res.json());\n                return res.json();\n            }).then(function(myJson) {\n                this.props.SetNewJson(myJson);\n                return myJson;\n            });\n            */\n            this.setState({MapConsult: true});\n            \n        } else if (method ==\"dont_ask\") {\n            console.log(\"SetMapConsult(false)!!)\");\n            this.setState({MapConsult:false });\n    }\n    }\n    SetBigCircleIndex(index) {\n        this.setState({\n            BigCircleIndex: index\n        });\n    }\n    \n    SetNewCardContent(content) {\n        this.setState({\n            newCardContent: content\n        });\n    }\n    componentDidUpdate(prevState){\n        if(this.state.HoverConceptIndex!==prevState.HoverConceptIndex){\n            console.log(\"prevConceptIndex = \",prevState.HoverConceptIndex,\" >>> \", this.state.HoverConceptIndex);\n        }\n    }\n\n    render() {\n        console.log(this.props.data.VideoSequence_ConceptInfo);\n        var HighlightConceptTextIndex = this.state.HoverVideoIndex == null ? [] : this.props.data.VideoSequence_ConceptInfo[this.state.HoverConceptIndex][this.state.HoverVideoIndex];\n        // console.log(\"windowheight\",window.innerHeight);\n        console.log (this.props.data);\n        return (\n            <div style={styles.container}>\n                {/* {this.props.data.search_info.key} */}\n                {/* <div style = {styles.LeftField} > */}\n                <div width={window.innerWidth/2} height={window.innerHeight }>\n                    <Typography variant=\"headline\" component=\"h5\">\n                        {this.props.data.search_info.key}\n                    </Typography>\n\n                    {/* <WordCloud videos_info={this.props.data.videos_info} HoverVideoIndex={this.state.HoverVideoIndex}/> */}\n                    <Graph data={this.props.data}\n                        HoverConceptIndex={this.props.HoverConceptIndexAtIndex}\n                        SetHoverConceptIndex={this.SetHoverConceptIndex}\n                        ClearHoverConcept = {this.ClearHoverConcept} \n                        OpenDrawer={(text) => props.OpenDrawer(text)}\n                        width={window.innerWidth/2 - 50} height={(window.innerHeight/2) - 100}\n                        SentRange={SentRange}\n                        ConceptRange={ConceptRange}\n                        SetHoverVideoIndex={this.SetHoverVideoIndex}\n                        HoverVideoIndex={this.state.HoverVideoIndex}\n                        Path_ConceptIndex={this.state.Path_ConceptIndex}\n                        SetPath_ConceptIndex={this.SetPath_ConceptIndex}\n                        BigCircleIndex={this.state.BigCircleIndex}\n                        \n                        HoverConceptIndexAtIndex = {this.props.HoverConceptIndexAtIndex}\n                        HighlightNodesAtIndex = {this.props.HighlightNodesAtIndex}\n                        DirectNodesAtIndex = {this.props.DirectNodesAtIndex}\n                        SetHightlightWord={this.SetHightlightWord}\n                        SetDirectNodesAtIndex = {this.props.SetDirectNodesAtIndex}\n                        SetHighlightNodesAtIndex = {this.props.SetHighlightNodesAtIndex}\n                    />\n                    <Cards \n                            progress={\"4\"}\n                            graphWidth={window.innerWidth/2 - 50}\n                            SetEditorContent = {this.SetEditorContent}\n                            newCardContent = {this.state.newCardContent}\n                            searchInfo = {this.props.data.search_info.key}\n                            SetCardEdit = {this.SetCardEdit}\n                            editingCardId = {this.state.editingCardId}\n                            cardEditing = {this.state.cardEditing}/>\n                </div>\n                \n                <div>\n                    <div width={window.innerWidth} height={window.innerHeight - 100}>\n                        <ReactPlayer    url={\"https://www.youtube.com/watch?v=\"+this.props.videoId}\n                                        width={window.innerWidth/2 -50 }\n                                        height={window.innerHeight/2 +100}\n                                        controls = {true} />\n                    </div>\n                \n                    <div>\n                        <Editor content = {this.state.content}\n                                SetMapConsult = {this.SetMapConsult}\n                                SetNewJson = {this.props.SetNewJson}\n                                searchInfo = {this.props.data.search_info.key}\n                                SetNewCardContent = {this.SetNewCardContent}\n                                SetCardEdit = {this.SetCardEdit}\n                                userId={this.props.userId}\n                                cardEditing = {this.state.cardEditing}\n                                editingCardId = {this.state.editingCardId}\n                                editorContent={this.state.editorContent}\n                        />\n                        <button onClick={()=>this.props.SetProgress(\"3\")}\n                                className=\"btn btn-primary btn-lg m-5\">Hide Video</button>\n                    </div>  \n                </div>\n\n                <ConceptDetailPanel\n                    data={this.props.data}\n                    Path_ConceptIndex={this.state.Path_ConceptIndex}\n                    SetPath_ConceptIndex={this.SetPath_ConceptIndex}\n                    SentRange={SentRange}\n                    SetHoverVideoIndex={this.SetHoverVideoIndex}\n                    SetHightlightWord={this.SetHightlightWord}\n                    HoverVideoIndex={this.state.HoverVideoIndex}\n                    HighlightConceptTextIndex={HighlightConceptTextIndex}\n                    BigCircleIndex={this.state.BigCircleIndex}\n                    SetBigCircleIndex={this.SetBigCircleIndex}\n                    SetProgress = {this.props.SetProgress} \n                    SetNewCardContent = {this.SetNewCardContent}\n                    SetVideoId = {this.props.SetVideoId} \n                />\n                <MapApprovPanel \n                    data={this.props.data}\n                    MapConsult={this.state.MapConsult}\n                    SetMapConsult={this.SetMapConsult}\n                    SetVisJson = {this.props.SetVisJson}\n                    SetNewJson = {this.props.SetNewJson}   \n                    NewJson = {this.props.NewJson}\n                />\n                {/*<Notification open={this.state.Path_ConceptIndex == null} />*/}\n            </div>\n\n        );\n    }\n}\nexport default LearningMapFrame;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst styles = {\n  root: {\n    // flexGrow: 1,\n    padding: 10,\n    margin:20,\n  },\n};\n\nfunction LinearIndeterminate(props) {\n  const { classes } = props;\n  return (\n    <div style={styles.root}>\n      <LinearProgress variant=\"determinate\" value={props.value} />\n      <br />\n      {/* <LinearProgress color=\"secondary\" /> */}\n    </div>\n  );\n}\n\nLinearIndeterminate.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(LinearIndeterminate);","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Input from '@material-ui/core/Input';\r\nimport Search from '@material-ui/icons/Search';\r\nimport Button from '@material-ui/core/Button';\r\nimport LinearIndeterminate from './LinearIndeterminate';\r\n\r\nvar progressValue = 10;\r\n\r\nconst styles = ({\r\n    root: {\r\n    //   height: 100,\r\n      padding: 5, //theme.spacing.unit * 2,\r\n      margin : 0,//theme.spacing.unit * 4,\r\n      // paddingTop: theme.spacing.unit * 2,\r\n      // paddingBottom: theme.spacing.unit * 2,\r\n      \r\n    },\r\n    container: {\r\n        // justifyContent: 'center',\r\n    //   display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    input: {\r\n      margin: 10,//theme.spacing.unit,\r\n    },\r\n    buttonContainer:{\r\n        marginLeft:\"auto\",\r\n        marginRight:\"auto\"\r\n    },\r\n    button:{\r\n        fontSize:13,\r\n        padding:10,\r\n        margin:10,\r\n        left:\"46%\",\r\n    },\r\n  });\r\n\r\n  \r\nclass CreateMapField extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            secondsElapsed: 0,\r\n            minutesElapsed:0,\r\n            NotFinish_Create : true,\r\n            progressValue : 3,\r\n            message:\" Collecting data from Youtube ... \"\r\n        }\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n    componentWillMount(){\r\n        // console.log(\"comein!\",this.props.SearchKeyword);\r\n        this.interval = setInterval(() => this.secondtick(), 1000);\r\n        this.interval = setInterval(() => this.progresstick(), 9000);\r\n        var keyword = this.props.SearchKeyword;\r\n        var tmp = this;\r\n        //1.download\r\n        // fetch('http://localhost:8001/Download/'+keyword)\r\n        // .then(function (res) {return res.json();\r\n        // }).then(function(myJson) {\r\n        //     console.log(\"finish download\",myJson);\r\n        //     tmp.setState({\r\n        //         progressValue : 25,\r\n        //         message:\"( Sentiment analysis of youtube comments... )\"\r\n        //     });\r\n        //     //2.start comment anaylze\r\n        //         fetch('http://localhost:8001/Comment_Analyze/'+keyword)\r\n        //         .then(function (res2) {\r\n        //             return res2.json();\r\n        //         }).then(function(myJson2) {\r\n        //             console.log(\"finish comment anaylze\",myJson2);\r\n        //             tmp.setState({\r\n        //                 progressValue : 40,\r\n        //                 message:\"\"\r\n        //             });\r\n        //             //3.start caption anaylze\r\n        //             fetch('http://localhost:8001/Caption_Analyze/'+keyword)\r\n        //             .then(function (res3) {\r\n        //                 return res3.json();\r\n        //             }).then(function(myJson3) {\r\n        //                 console.log(\"finish caption anaylze\",myJson3);\r\n        //                 tmp.setState({\r\n        //                     progressValue : 100,\r\n        //                     NotFinish_Create : false\r\n        //                 });\r\n        //                 return myJson3;\r\n        //             });\r\n        //             return myJson2;\r\n        //         });\r\n        //     return myJson;\r\n        // });\r\n\r\n        fetch('https://conceptmap-backend.herokuapp.com/Analyze/'+keyword)\r\n        .then(function (res) {\r\n            return res.json();\r\n        }).then(function(myJson) {\r\n            // console.log(\"finish analyze\",myJson);\r\n            tmp.setState({\r\n                NotFinish_Create : false,\r\n                progressValue :100\r\n            });\r\n            return myJson;\r\n        });\r\n    }\r\n    componentWillUnmount() {\r\n        clearInterval(this.interval);\r\n      }\r\n    \r\n    secondtick() {\r\n        this.setState((prevState) => ({\r\n          secondsElapsed: prevState.secondsElapsed + 1\r\n        }));\r\n        // message\r\n        if(this.state.secondsElapsed==3*60){\r\n            this.setState((prevState) => ({\r\n                message: \" Analyzing sentiment of videos' comments... \"\r\n              }));\r\n        }\r\n        else if(this.state.secondsElapsed==4*60){\r\n            this.setState((prevState) => ({\r\n                message: \" Extracting concept words from transcript... \"\r\n              }));\r\n        }\r\n        else if(this.state.secondsElapsed==6*60){\r\n            this.setState((prevState) => ({\r\n                message: \" Analyzing concept similarity... \"\r\n              }));\r\n        }\r\n        else if(this.state.secondsElapsed==8*60){\r\n            this.setState((prevState) => ({\r\n                message: \" Analyzing prerequisite relationship... \"\r\n              }));\r\n        }\r\n        else if(this.state.secondsElapsed==10*60){\r\n            this.setState((prevState) => ({\r\n                message: \" Generating Learning map ... \"\r\n              }));\r\n        }\r\n      }\r\n      progresstick() {\r\n        if(this.state.progressValue < 10){\r\n            this.setState((prevState) => ({\r\n                progressValue: prevState.progressValue + 5\r\n              }));\r\n        }\r\n        else if(this.state.progressValue < 96){\r\n            this.setState((prevState) => ({\r\n                progressValue: prevState.progressValue + 1\r\n              }));\r\n        }\r\n      }\r\n\r\n    handleClick(){\r\n        var tmp = this;\r\n        fetch('https://conceptmap-backend.herokuapp.com/GetJson/')\r\n        .then(function (res) {\r\n        //    console.log(res.json());\r\n            return res.json();\r\n        }).then(function(myJson) {\r\n            // console.log(myJson);\r\n            tmp.props.SetProgress(3,myJson);\r\n            return myJson;\r\n          });\r\n          \r\n    }\r\n    render() {\r\n        // console.log(this.state.secondsElapsed/60,\" minutes\");\r\n        return (\r\n            <Paper style={styles.root} elevation={1}>\r\n            <div style={styles.container} >\r\n            \r\n              <LinearIndeterminate value = {this.state.progressValue}/>\r\n              {/* <Typography variant=\"title\" component=\"h5\" align=\"center\">Creating Learning Map...</Typography> */}\r\n              <Typography variant=\"title\" component=\"h5\" align=\"center\">{this.state.progressValue+\"%\"}</Typography>\r\n              <Typography variant=\"title\" component=\"h5\" align=\"center\">{this.state.message}</Typography>\r\n              <br/>\r\n              <div style={styles.buttonContainer}>\r\n              <Button variant=\"raised\"  style = {styles.button} size = \"small\" onClick={this.handleClick} disabled={this.state.NotFinish_Create}>\r\n                    See the map\r\n              </Button>\r\n              </div>\r\n            </div>\r\n            </Paper>\r\n        );\r\n    }\r\n}\r\nexport default CreateMapField;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { PropTypes } from 'prop-types';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Chip from '@material-ui/core/Chip';\r\n\r\nconst styles = ({\r\n    root: {\r\n       width: 450,\r\n      },\r\n    chip: {\r\n        margin: 8,\r\n        padding: 5,\r\n        fontSize: 13\r\n      },\r\n      chip2: {\r\n        margin: 8,\r\n        padding: 5,\r\n        fontSize: 13,\r\n        color:\"blue\",\r\n      },\r\n    root2:{\r\n        width: 450,\r\n        padding: 5,\r\n        margin: 5 ,\r\n    },\r\n    DrawerName: {\r\n        flexGrow: 1,\r\n        marginLeft:20,\r\n        fontSize:20,\r\n        fontFamily:\"Cambria\",\r\n        margin: 15,\r\n    },\r\n});\r\n\r\n\r\nvar hidden_list=['automatic summarization introduction','computer graphic','computer graphics','natural language processing','sentiment analysis introduction','text preprocessing','Sentiment analysis']\r\n\r\nclass MenuDrawer extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            drawer_switch:this.props.open,\r\n        }\r\n        this.TagClick = this.TagClick.bind(this);\r\n        this.TagDelete = this.TagDelete.bind(this);\r\n        this.HandleClose = this.HandleClose.bind(this);\r\n    }\r\n\r\n    TagClick(keyword){\r\n        var tmp = this;\r\n        fetch('https://conceptmap-backend.herokuapp.com/GetAnalyzeResult/'+keyword)\r\n        .then(function (res) {\r\n            return res.json();\r\n        }).then(function(myJson) {\r\n            // console.log(\"myJson\",myJson.search_info);\r\n            tmp.props.SetMenuClose();\r\n            tmp.props.SetProgress(3,myJson);\r\n            return myJson;\r\n        });\r\n    }\r\n    ButtonClick(index){\r\n        var tmp = this;\r\n        fetch('https://conceptmap-backend.herokuapp.com/GetJson_bitcoin/'+index)\r\n        .then(function (res) {\r\n            return res.json();\r\n        }).then(function(myJson) {\r\n            // console.log(\"myJson\",myJson.search_info);\r\n            tmp.props.SetMenuClose();\r\n            tmp.props.SetProgress(3,myJson);\r\n            //tmp.props.SetNewJson(myJson);\r\n            return myJson;\r\n        });\r\n    }\r\n    TagDelete(keyword){\r\n        // console.log(\"tag delete\",this);\r\n        var tmp = this;\r\n        fetch('https://conceptmap-backend.herokuapp.com/DeleteAnalyzeResult/'+keyword)\r\n        .then(function (res) {\r\n            return res.json();\r\n        }).then(function(myJson) {\r\n            // console.log(\"newhistory\",myJson);\r\n            tmp.props.SetSearchHistory(myJson);\r\n            return myJson;\r\n        });\r\n    }\r\n    HandleClose(){\r\n        // console.log(\"close!\");\r\n        this.props.SetMenuClose();\r\n    }\r\n\r\n\r\n    render() {\r\n        if (this.props.SearchHistory) {\r\n            var chips = this.props.SearchHistory.map( (word) => {\r\n                if (hidden_list.includes(word)){\r\n                    return null;\r\n                }\r\n                return (\r\n                <Chip\r\n                    key = {word} \r\n                    label={word} \r\n                    style={styles.chip}  \r\n                    onClick={this.TagClick.bind(this,word)} \r\n                    clickable=\"true\" \r\n                    // onDelete={this.TagDelete.bind(this,word)}\r\n                />);\r\n            });\r\n        }\r\n        \r\n        // console.log(\"opendrawer\",this.props.open,this.state.drawer_switch);\r\n        \r\n        return (\r\n            <div style={styles.root}>\r\n            <Drawer anchor=\"left\" open = {this.props.open} onClose={this.HandleClose} > \r\n                <div style={styles.root2} onKeyDown={this.HandleClose}>\r\n                <Typography variant=\"title\" color=\"inherit\" style={styles.DrawerName}>\r\n                    Search History\r\n                </Typography>\r\n                {chips}\r\n                <Chip\r\n                    key = {\"Bitcoin_Demo\"} \r\n                    label={\"Bitcoin_Demo\"} \r\n                    style={styles.chip2}  \r\n                    onClick={this.ButtonClick.bind(this,0)} \r\n                    clickable=\"true\" \r\n                    // onDelete={this.TagDelete.bind(this,word)}\r\n                />\r\n                <Chip\r\n                    key = {\"Bitcoin_mining_Demo\"} \r\n                    label={\"Bitcoin_mining_Demo\"} \r\n                    style={styles.chip2}  \r\n                    onClick={this.ButtonClick.bind(this,1)} \r\n                    clickable=\"true\" \r\n                    // onDelete={this.TagDelete.bind(this,word)}\r\n                />\r\n                <Chip\r\n                    key = {\"NLP_intro_Demo\"} \r\n                    label={\"NLP_intro_Demo\"} \r\n                    style={styles.chip2}  \r\n                    onClick={this.ButtonClick.bind(this,2)} \r\n                    clickable=\"true\" \r\n                    // onDelete={this.TagDelete.bind(this,word)}\r\n                />\r\n                <Chip\r\n                    key = {\"NLP_Demo\"} \r\n                    label={\"NLP_Demo\"} \r\n                    style={styles.chip2}  \r\n                    onClick={this.ButtonClick.bind(this,3)} \r\n                    clickable=\"true\" \r\n                    // onDelete={this.TagDelete.bind(this,word)}\r\n                />\r\n                </div>\r\n            </Drawer>\r\n            </div>\r\n        );\r\n    }\r\n    \r\n}\r\nexport default MenuDrawer;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport HighlightModeSelector from './HighlightModeSelector';\r\nimport Video_info from './newdirected/Video_info';\r\n// import jsondata from './graphFile.json';\r\nimport BarField from './components/BarField';\r\nimport SearchField from './components/SearchField';\r\nimport LearningMapFrame from './components/LearningMapFrame';\r\nimport VideoMapFrame from './components/VideoMapFrame';\r\nimport CreatingField from './components/CreatingField';\r\nimport MenuDrawer from './components/MenuDrawer';\r\nimport { EditorState } from 'draft-js';\r\nimport Editor from './components/Editor'\r\nimport '../node_modules/react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\nimport Cards from './components/Cards';\r\n\r\n\r\n\r\n\r\n/*** * 獲取當前瀏覽器類型 */ \r\nfunction myBrowser() { \r\n  var userAgent = navigator.userAgent; //取得瀏覽器的userAgent字符串 \r\n  \r\n  var isOpera = userAgent.indexOf(\"Opera\") > -1; \r\n  if (isOpera) { //判斷是否Opera瀏覽器 \r\n  return \"Opera\"; }\r\n  \r\n  if (userAgent.indexOf(\"Firefox\") > -1) { //判斷是否Firefox瀏覽器 \r\n  return \"FF\"; }\r\n  if (userAgent.indexOf(\"Chrome\") > -1){ return \"Chrome\"; }\r\n  if (userAgent.indexOf(\"Safari\") > -1) { //判斷是否Safari瀏覽器\r\n  return \"Safari\"; }\r\n  if (userAgent.indexOf(\"compatible\") > -1 && userAgent.indexOf(\"MSIE\") > -1 && !isOpera) { //判斷是否IE瀏覽器\r\n  return \"IE\"; }\r\n  }\r\nfunction beforunload(event) { event = event ? event : (window.event ? window.event : null); \r\n  var myIE = myBrowser(); \r\n  if (myIE==\"IE\") { // IE \r\n  var cy = event.clientY || event.target.event.clientY;\r\n  var ak = event.altKey || event.target.event.altKey; \r\n  if (cy < 0 || ak) { \r\n  return \"確定要離開本頁面嗎？\"; }\r\n  } \r\n  else {\r\n  // Firefox、Chrome\r\n  var nodeName = event.currentTarget.document.activeElement.nodeName; \r\n  if (nodeName!=\"A\") { return \"確定要離開本頁面嗎？\"; } } } \r\n\r\n    \r\n\r\n\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      MenuOpened : false,\r\n      drawer:false,\r\n      selectedVid:null,\r\n      Progress:1,\r\n      SearchHistory:null,\r\n      VisJson:null,\r\n      SearchKeyword:null,\r\n      videoId:null,\r\n      userId:null,\r\n      HoverConceptIndexAtIndex:null,\r\n      DirectNodesAtIndex:[],\r\n      HighlightNodesAtIndex:[],\r\n  };\r\n    //for graph at videomapframe use---\r\n    this.SetHoverConceptIndexAtIndex = this.SetHoverConceptIndexAtIndex.bind(this);\r\n    this.SetDirectNodesAtIndex = this.SetDirectNodesAtIndex.bind(this);\r\n    this.SetHighlightNodesAtIndex = this.SetHighlightNodesAtIndex.bind(this);\r\n    //---------------------------------\r\n    this.SetUserId = this.SetUserId.bind(this);\r\n    this.SetVideoId = this.SetVideoId.bind(this);\r\n    this.SetProgress = this.SetProgress.bind(this);\r\n    this.SetMenuOpen = this.SetMenuOpen.bind(this);\r\n    this.SetMenuClose = this.SetMenuClose.bind(this);\r\n    this.SetSearchHistory = this.SetSearchHistory.bind(this);\r\n    this.SetSearchKeyword = this.SetSearchKeyword.bind(this);\r\n    this.OpenDrawer = this.OpenDrawer.bind(this);\r\n    this.CloseDrawer = this.CloseDrawer.bind(this);\r\n    this.SetVisJson = this.SetVisJson.bind(this);\r\n    this.SetNewJson = this.SetNewJson.bind(this);\r\n  }\r\n  SetHoverConceptIndexAtIndex(HoverConceptIndexAtIndex){\r\n    this.setState({HoverConceptIndexAtIndex});\r\n  }\r\n  SetDirectNodesAtIndex(DirectNodesAtIndex){\r\n    this.setState({DirectNodesAtIndex});\r\n  }\r\n  SetHighlightNodesAtIndex(HighlightNodesAtIndex){\r\n    this.setState({HighlightNodesAtIndex});\r\n  }\r\n  SetVideoId(vid){\r\n    this.setState({videoId : vid});\r\n  }\r\n  SetUserId(uid){\r\n    this.setState({userId : uid});\r\n  }\r\n  SetVisJson(json){\r\n    this.setState({VisJson : json});\r\n  }\r\n  SetNewJson(json){\r\n    console.log(\"NewJson setted from \", this.state.NewJson, \" to \", json);\r\n    this.setState({NewJson : json});\r\n  }\r\n\r\n\r\n  SetProgress(progress,json){\r\n    // console.log(\"p,k\",progress,json);\r\n    if(json==undefined){\r\n      this.setState({Progress:progress});\r\n    }\r\n    else{\r\n      this.setState({\r\n        Progress: progress,\r\n        VisJson : json,\r\n        NewJson : json\r\n      });\r\n    }\r\n  }\r\n  SetMenuOpen(){\r\n    this.setState({\r\n      MenuOpened: true,\r\n    });\r\n  }\r\n  SetMenuClose(){\r\n    this.setState({\r\n      MenuOpened: false,\r\n    });\r\n  }\r\n\r\n\r\n  SetSearchHistory(v){\r\n    this.setState({SearchHistory:v});\r\n  }\r\n\r\n  SetSearchKeyword(w){\r\n    this.setState({SearchKeyword:w});\r\n  }\r\n  OpenDrawer(vid,e){\r\n    // console.log(\"here\",vid,e,jsondata.videos_info[vid].transcript);\r\n    this.setState(\r\n      {\r\n        drawer:true,\r\n        selectedVid:vid\r\n      });\r\n  }\r\n  CloseDrawer(){\r\n    this.setState({drawer:false});\r\n  }\r\n\r\n  render() {\r\n    window.onbeforeunload = function(event) { \r\n      return beforunload(event); \r\n      }; \r\n      \r\n\r\n  \r\n  \r\n    if(this.state.Progress==1){\r\n      return (       \r\n        <div>\r\n          <MuiThemeProvider>\r\n              <BarField \r\n                SetProgress = {this.SetProgress} \r\n                SetMenuOpen = {this.SetMenuOpen} \r\n                SetSearchHistory={this.SetSearchHistory}\r\n                />\r\n              <MenuDrawer  \r\n                SetNewJson = {this.SetNewJson}\r\n                open = {this.state.MenuOpened} \r\n                SetProgress = {this.SetProgress}  \r\n                SearchHistory={this.state.SearchHistory} \r\n                SetSearchHistory={this.SetSearchHistory} \r\n                SetMenuClose={this.SetMenuClose}\r\n                />\r\n              <SearchField \r\n                SetUserId = {this.SetUserId}\r\n                userId = {this.state.userId}\r\n                SetProgress = {this.SetProgress} SearchHistory={this.state.SearchHistory} SetSearchHistory={this.SetSearchHistory} SetSearchKeyword={this.SetSearchKeyword} Set_NotFinishCreate={this.Set_NotFinishCreate}/>   \r\n          </MuiThemeProvider>\r\n        </div>\r\n      \r\n      );\r\n    }else if(this.state.Progress==2){\r\n      return (       \r\n        <div>\r\n          <MuiThemeProvider>\r\n          <BarField \r\n            SetProgress = {this.SetProgress} \r\n            SetMenuOpen = {this.SetMenuOpen} \r\n            SetSearchHistory={this.SetSearchHistory}\r\n          />\r\n          <CreatingField SetProgress = {this.SetProgress} SearchKeyword={this.state.SearchKeyword} />\r\n          </MuiThemeProvider>\r\n        </div>\r\n      );\r\n    }else if(this.state.Progress==3){\r\n      return(\r\n        <div style={{userSelect: \"none\"}}>\r\n          <MuiThemeProvider>\r\n          <BarField \r\n            SetProgress = {this.SetProgress} \r\n            SetMenuOpen = {this.SetMenuOpen} \r\n            SetSearchHistory={this.SetSearchHistory}\r\n          />\r\n          <LearningMapFrame data={this.state.VisJson} \r\n                            userId={this.state.userId}\r\n                            OpenDrawer={(text) =>this.OpenDrawer(text)}\r\n                            SetProgress = {this.SetProgress} \r\n                            SetVisJson = {this.SetVisJson}\r\n                            SetNewJson = {this.SetNewJson}\r\n                            NewJson = {this.state.NewJson}\r\n                            SetVideoId = {this.SetVideoId}\r\n                            HighlightNodesAtIndex = {this.state.HighlightNodesAtIndex}\r\n                            DirectNodesAtIndex = {this.state.DirectNodesAtIndex}\r\n                            HoverConceptIndexAtIndex = {this.state.HoverConceptIndexAtIndex}\r\n                            \r\n                            SetHoverConceptIndexAtIndex = {this.SetHoverConceptIndexAtIndex}\r\n                            SetDirectNodesAtIndex = {this.SetDirectNodesAtIndex}\r\n                            SetHighlightNodesAtIndex = {this.SetHighlightNodesAtIndex}\r\n \r\n          />\r\n          <Dialog\r\n            fullScreen\r\n            open={this.state.drawer}\r\n            onClose={this.CloseDrawer}\r\n          >\r\n          <Video_info vid = {this.state.selectedVid} videos_info = {this.state.VisJson.videos_info} CloseDrawer={this.CloseDrawer} />\r\n          </Dialog>\r\n          </MuiThemeProvider> \r\n        </div>\r\n      );\r\n    }else if(this.state.Progress==4){\r\n      return(\r\n        <div style={{userSelect: \"none\"}}>\r\n          <MuiThemeProvider>\r\n            <BarField \r\n              SetProgress = {this.SetProgress} \r\n              SetMenuOpen = {this.SetMenuOpen} \r\n              SetSearchHistory={this.SetSearchHistory}\r\n            />\r\n            <VideoMapFrame    data={this.state.VisJson} \r\n                              OpenDrawer={(text) =>this.OpenDrawer(text)}\r\n                              SetVisJson = {this.SetVisJson}\r\n                              userId={this.state.userId}\r\n                              SetNewJson = {this.SetNewJson}\r\n                              NewJson = {this.state.NewJson}\r\n                              SetProgress = {this.SetProgress}\r\n                              videoId = {this.state.videoId}\r\n                              SetVideoId = {this.SetVideoId}\r\n                              \r\n                              HoverConceptIndexAtIndex = {this.state.HoverConceptIndexAtIndex}\r\n                              HighlightNodesAtIndex = {this.state.HighlightNodesAtIndex}\r\n                              DirectNodesAtIndex = {this.state.DirectNodesAtIndex}\r\n                              SetHoverConceptIndexAtIndex = {this.SetHoverConceptIndexAtIndex}\r\n                              SetDirectNodesAtIndex = {this.SetDirectNodesAtIndex}\r\n                              SetHighlightNodesAtIndex = {this.SetHighlightNodesAtIndex} \r\n            />\r\n            <Dialog\r\n              fullScreen\r\n              open={this.state.drawer}\r\n              onClose={this.CloseDrawer}\r\n            >\r\n            <Video_info vid = {this.state.selectedVid} videos_info = {this.state.VisJson.videos_info} CloseDrawer={this.CloseDrawer} />\r\n            </Dialog>\r\n          </MuiThemeProvider> \r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n\r\n    \r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}